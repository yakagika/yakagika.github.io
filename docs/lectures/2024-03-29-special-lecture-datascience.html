<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">

        <title>yakagika - 特別講義(データサイエンス)</title>

        <!-- Stylesheets. -->
        <link rel="stylesheet" type="text/css" href="../style.css?v=0">

        <!-- RSS. -->
        <link rel="alternate" type="application/rss+xml" title="yakagika" href="https://yakagika.github.io/rss.xml">

        <!-- Metadata. -->
        <meta name="keywords" content="yakagika Haskell ExchangeAlgebra">
        <meta name="description" content="Personal home page and blog of yakagika.">
        
        <!-- KaTeXのスタイルシートとJavaScriptのリンクを動的に挿入 -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTUs74ddyc4bFZSM1TVlQDA60VBbJS0oA934VSz82sBx1X7kSx2ATBDIyd" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
        
        <meta property="og:description" content="資料" />
    </head>
    <body>
        <div id="navigation">
            <h1>Contents</h1>
            <a href="../">Home</a>
            <a href="../posts.html">Blog</a>
            <a href="../lectures.html">Lecture</a>
            <a href="../research.html">Research</a>
            <a href="../contact.html">Contact</a>
            <!-- <a href="/cv.html">CV</a> -->
            <h1>Links</h1>
            <a href="http://github.com/yakagika">GitHub</a>
        </div>
        <div id="content">
    <h1>特別講義(データサイエンス)</h1>
<div class="soft">
    資料<br />
    Published on March 29, 2024 under the tag 
</div>

<div class="toc"><div class="header">Table of Contents</div>
<ul>
<li><a href="#注意記法などについて" id="toc-注意記法などについて"><span class="toc-section-number">1</span> 注意,記法などについて</a>
<ul>
<li><a href="#デザインについて" id="toc-デザインについて"><span class="toc-section-number">1.1</span> デザインについて</a></li>
<li><a href="#シンタックスとコーディングスタイル" id="toc-シンタックスとコーディングスタイル"><span class="toc-section-number">1.2</span> シンタックスとコーディングスタイル</a></li>
</ul></li>
<li><a href="#イントロダクション" id="toc-イントロダクション"><span class="toc-section-number">2</span> イントロダクション</a>
<ul>
<li><a href="#プログラミング言語の種類" id="toc-プログラミング言語の種類"><span class="toc-section-number">2.1</span> プログラミング言語の種類</a></li>
<li><a href="#授業準備" id="toc-授業準備"><span class="toc-section-number">2.2</span> 授業準備</a>
<ul>
<li><a href="#テキストエディタ" id="toc-テキストエディタ"><span class="toc-section-number">2.2.1</span> テキストエディタ</a></li>
</ul></li>
<li><a href="#imeの設定" id="toc-imeの設定"><span class="toc-section-number">2.3</span> IMEの設定</a></li>
<li><a href="#cliの基本操作" id="toc-cliの基本操作"><span class="toc-section-number">2.4</span> CLIの基本操作</a>
<ul>
<li><a href="#エンコーディング" id="toc-エンコーディング"><span class="toc-section-number">2.4.1</span> エンコーディング</a></li>
<li><a href="#日本語表示" id="toc-日本語表示"><span class="toc-section-number">2.4.2</span> 日本語表示</a></li>
<li><a href="#ディレクトリ" id="toc-ディレクトリ"><span class="toc-section-number">2.4.3</span> ディレクトリ</a></li>
</ul></li>
<li><a href="#基礎的なコマンド" id="toc-基礎的なコマンド"><span class="toc-section-number">2.5</span> 基礎的なコマンド</a></li>
<li><a href="#環境構築" id="toc-環境構築"><span class="toc-section-number">2.6</span> 環境構築</a></li>
<li><a href="#hello-world" id="toc-hello-world"><span class="toc-section-number">2.7</span> Hello World</a></li>
<li><a href="#プログラミングの勉強の仕方" id="toc-プログラミングの勉強の仕方"><span class="toc-section-number">2.8</span> プログラミングの勉強の仕方</a></li>
</ul></li>
<li><a href="#pythonことはじめ" id="toc-pythonことはじめ"><span class="toc-section-number">3</span> Pythonことはじめ</a>
<ul>
<li><a href="#replを使ってみよう" id="toc-replを使ってみよう"><span class="toc-section-number">3.1</span> REPLを使ってみよう</a></li>
<li><a href="#コメントアウト" id="toc-コメントアウト"><span class="toc-section-number">3.2</span> コメントアウト</a></li>
<li><a href="#データ型" id="toc-データ型"><span class="toc-section-number">3.3</span> データ型</a>
<ul>
<li><a href="#数値型pythonを電卓として使う" id="toc-数値型pythonを電卓として使う"><span class="toc-section-number">3.3.1</span> 数値型(Pythonを電卓として使う)</a></li>
</ul></li>
<li><a href="#変数と代入" id="toc-変数と代入"><span class="toc-section-number">3.4</span> 変数と代入</a>
<ul>
<li><a href="#代入演算子" id="toc-代入演算子"><span class="toc-section-number">3.4.1</span> 代入演算子</a></li>
</ul></li>
<li><a href="#文字列型" id="toc-文字列型"><span class="toc-section-number">3.5</span> 文字列型</a>
<ul>
<li><a href="#文字列の演算" id="toc-文字列の演算"><span class="toc-section-number">3.5.1</span> 文字列の演算</a></li>
</ul></li>
<li><a href="#リスト" id="toc-リスト"><span class="toc-section-number">3.6</span> リスト</a>
<ul>
<li><a href="#リストの演算" id="toc-リストの演算"><span class="toc-section-number">3.6.1</span> リストの演算</a></li>
</ul></li>
<li><a href="#タプル" id="toc-タプル"><span class="toc-section-number">3.7</span> タプル</a></li>
<li><a href="#辞書型" id="toc-辞書型"><span class="toc-section-number">3.8</span> 辞書型</a></li>
<li><a href="#論理演算" id="toc-論理演算"><span class="toc-section-number">3.9</span> 論理演算</a></li>
<li><a href="#復習スクリプトの実行" id="toc-復習スクリプトの実行"><span class="toc-section-number">3.10</span> (復習)スクリプトの実行</a></li>
<li><a href="#エラーへの対応法とよくある間違い" id="toc-エラーへの対応法とよくある間違い"><span class="toc-section-number">3.11</span> エラーへの対応法とよくある間違い</a>
<ul>
<li><a href="#エラーへの対応方法" id="toc-エラーへの対応方法"><span class="toc-section-number">3.11.1</span> エラーへの対応方法</a></li>
<li><a href="#エラーを体験してみよう" id="toc-エラーを体験してみよう"><span class="toc-section-number">3.11.2</span> エラーを体験してみよう</a></li>
</ul></li>
</ul></li>
<li><a href="#ライブラリの利用" id="toc-ライブラリの利用"><span class="toc-section-number">4</span> ライブラリの利用</a>
<ul>
<li><a href="#ライブラリとは" id="toc-ライブラリとは"><span class="toc-section-number">4.1</span> ライブラリとは</a></li>
<li><a href="#ライブラリを使ってみよう" id="toc-ライブラリを使ってみよう"><span class="toc-section-number">4.2</span> ライブラリを使ってみよう</a></li>
<li><a href="#なぜexcelではだめなのか" id="toc-なぜexcelではだめなのか"><span class="toc-section-number">4.3</span> なぜExcelではだめなのか</a></li>
</ul></li>
<li><a href="#データの取得と編集-執筆中" id="toc-データの取得と編集-執筆中"><span class="toc-section-number">5</span> データの取得と編集 (執筆中)</a>
<ul>
<li><a href="#データの尺度" id="toc-データの尺度"><span class="toc-section-number">5.1</span> データの尺度</a></li>
<li><a href="#データの種類" id="toc-データの種類"><span class="toc-section-number">5.2</span> データの種類</a></li>
<li><a href="#データの取得と編集" id="toc-データの取得と編集"><span class="toc-section-number">5.3</span> データの取得と編集</a></li>
<li><a href="#e-statを使ってみよう" id="toc-e-statを使ってみよう"><span class="toc-section-number">5.4</span> e-statを使ってみよう</a></li>
<li><a href="#機械判読可能データの作成" id="toc-機械判読可能データの作成"><span class="toc-section-number">5.5</span> 機械判読可能データの作成</a></li>
<li><a href="#pandasによるデータ処理" id="toc-pandasによるデータ処理"><span class="toc-section-number">5.6</span> pandasによるデータ処理</a>
<ul>
<li><a href="#ファイルの読み込み" id="toc-ファイルの読み込み"><span class="toc-section-number">5.6.1</span> ファイルの読み込み</a></li>
</ul></li>
</ul></li>
<li><a href="#行名列名の変更" id="toc-行名列名の変更"><span class="toc-section-number">6</span> 行名,列名の変更</a>
<ul>
<li><a href="#値の抽出" id="toc-値の抽出"><span class="toc-section-number">6.1</span> 値の抽出</a></li>
<li><a href="#条件による抽出" id="toc-条件による抽出"><span class="toc-section-number">6.2</span> 条件による抽出</a></li>
<li><a href="#値の変更" id="toc-値の変更"><span class="toc-section-number">6.3</span> 値の変更</a></li>
<li><a href="#dataframeの作成" id="toc-dataframeの作成"><span class="toc-section-number">6.4</span> DataFrameの作成</a></li>
<li><a href="#データ型の変更" id="toc-データ型の変更"><span class="toc-section-number">6.5</span> データ型の変更</a></li>
<li><a href="#データの削除" id="toc-データの削除"><span class="toc-section-number">6.6</span> データの削除</a></li>
<li><a href="#データの追加" id="toc-データの追加"><span class="toc-section-number">6.7</span> データの追加</a></li>
<li><a href="#データの確認" id="toc-データの確認"><span class="toc-section-number">6.8</span> データの確認</a></li>
<li><a href="#欠損値の処理" id="toc-欠損値の処理"><span class="toc-section-number">6.9</span> 欠損値の処理</a></li>
<li><a href="#データの保存" id="toc-データの保存"><span class="toc-section-number">6.10</span> データの保存</a></li>
</ul></li>
<li><a href="#pythonの基本構文執筆中" id="toc-pythonの基本構文執筆中"><span class="toc-section-number">7</span> Pythonの基本構文(執筆中)</a>
<ul>
<li><a href="#アルゴリズムとは" id="toc-アルゴリズムとは"><span class="toc-section-number">7.1</span> アルゴリズムとは</a></li>
<li><a href="#インデントとブロック" id="toc-インデントとブロック"><span class="toc-section-number">7.2</span> インデントとブロック</a></li>
<li><a href="#分岐" id="toc-分岐"><span class="toc-section-number">7.3</span> 分岐</a></li>
<li><a href="#繰り返し" id="toc-繰り返し"><span class="toc-section-number">7.4</span> 繰り返し</a>
<ul>
<li><a href="#for文" id="toc-for文"><span class="toc-section-number">7.4.1</span> for文</a></li>
<li><a href="#while文" id="toc-while文"><span class="toc-section-number">7.4.2</span> While文</a></li>
</ul></li>
<li><a href="#関数-執筆中" id="toc-関数-執筆中"><span class="toc-section-number">7.5</span> 関数 (執筆中)</a></li>
</ul></li>
<li><a href="#データの可視化" id="toc-データの可視化"><span class="toc-section-number">8</span> データの可視化</a></li>
<li><a href="#一般化線形モデル執筆中" id="toc-一般化線形モデル執筆中"><span class="toc-section-number">9</span> 一般化線形モデル(執筆中)</a></li>
</ul>
</div>
<h2 data-number="1" id="注意記法などについて"><span class="header-section-number">1</span> 注意,記法などについて</h2>
<details>
<summary>
開く
</summary>
<p>特別講義(データサイエンス)の授業資料などを書いてく予定です.
(執筆準備中)</p>
<p>本資料は,文系学部生向けにデータサイエンスすることを目的にしたものです.
これまでにプログラミングや理数系科目を学習していないことを前提にしているので,
初歩の初歩から一つずつ扱う科目です.</p>
<p>こちらの資料では,授業に必要な技術的な内容に限定して掲載します.
授業概要,授業の注意点,成績等については講義中に別資料で説明します.</p>
<h3 data-number="1.1" id="デザインについて"><span class="header-section-number">1.1</span> デザインについて</h3>
<p>文章中で色の変わっているブロックはオレンジ色が注意(warn),青色が演習や強調(note)など独立した部分を表しています.
講義ではwarnに関しては,飛ばす場合があるので,興味のある人は自分で読み進めてください.</p>
<div class="warn">
<p>これは注意や発展的内容を示しています.</p>
</div>
<div class="note">
<p>これは演習や強調したい箇所に利用されています.</p>
</div>
<p>リンクは<a href="https://www.google.co.jp">Google</a>のように下線で表示されます.クリックすることでリンクに飛ぶことが可能です. 右クリックして,新しいタブで開くことを推奨しています.</p>
<h3 data-number="1.2" id="シンタックスとコーディングスタイル"><span class="header-section-number">1.2</span> シンタックスとコーディングスタイル</h3>
<p>本講義ではプログラムブロックは以下のように黒い背景でシンタックスハイライトが適用されています.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Sample'</span>)</span></code></pre></div>
<p>コピー&amp;ペーストが可能なので, 自分のプログラムに利用してください.</p>
<div class="warn">
<ul>
<li>Pythonのコーディングスタイルについて</li>
</ul>
<p>Pythonの書き方は,基本的に可読性を高めるために,決まったルールで記載されます.
このルールを<strong>コーディングスタイル</strong>といいます.
Pythonにおける標準的なコーディングスタイルには<a href="https://peps.python.org/pep-0008/">PEP8(Python Enhancement Proposal)</a>などがありますが,本講義では一部従っていません.</p>
<p>特に,リストや辞書型などの改行において</p>
<ul>
<li><p>コンマを改行後の先頭に記述する</p></li>
<li><p>ブランケットの終わりを改行した最後に記述する</p></li>
</ul>
<p>といった記法を採用しています.これは,関数型言語(特にHaskell)の講義との対応関係を持たせるために筆者が好んでいるものですが,
一般的な手続き型言語のコーディングスタイルではありませんので注意してください.</p>
<p>また, リストなどを<code>xs</code>などの<code>s</code>をつけた複数形で表現する命名規則も多用していますが,
こちらも一般的なコーディングスタイルではありません.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#通常の記法</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'cat'</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">'dog'</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>           <span class="st">'bird'</span>]</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#本資料における記法</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'cat'</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>          ,<span class="st">'dog'</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>          ,<span class="st">'bird'</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>          ]</span></code></pre></div>
</div>
</details>
<h2 data-number="2" id="イントロダクション"><span class="header-section-number">2</span> イントロダクション</h2>
<details>
<summary>
開く
</summary>
<p>データサイエンスは,データを利用して現象を発見したり,予測をする科学の総称です. データの作成やデータを分析する前の処理,利用するコンピュータ関連の技術なども対象となります.</p>
<p>データサイエンスと関連の深い分野/用語として統計や機械学習,AIがありますが,それらもデータサイエンスの一部とみなすことができます.</p>
<p>統計は,データ自体の取得・作成・集計から,データの構造を分かりやすく分析・可視化する学問です.機械学習は,データから予測モデルを作り,意思決定などに応用する学問です. 統計や機械学習・AIは明確に分割することができるものではなく,かなりの部分が共通しています. 特に皆さんがこの講義の先修科目である統計学入門で学んだ,初歩的な統計は,機械学習やAI,データサイエンス全般を学ぶ上で,前提知識となります.この他,どちらかに分類できるわけではない,モデリング,AI,シミュレーション,最適化,次元削減,など様々なトピックが含まれています.</p>
<figure>
<img src="../images/data-science-and-components.png" alt="データサイエンス" />
<figcaption aria-hidden="true">データサイエンス</figcaption>
</figure>
<p>この講義では,統計学入門で学んだ,可視化,数値化,検定,回帰などの統計学の手法をPCを使って行う他,統計学入門の範囲を超えたより発展的な手法に関しても学習します.</p>
<p>しかし,このようにデータサイエンスは非常に広範な学問なので,統計学入門のように個別の手法に関して,細かく理解することはせず,それぞれの概要と利用方に関してのみを扱います.</p>
<h3 data-number="2.1" id="プログラミング言語の種類"><span class="header-section-number">2.1</span> プログラミング言語の種類</h3>
<p>データサイエンスは言葉の通り,データを扱います. 現在ではデータは基本的に,電子データとして収集,処理されるため,それらの編集,処理にはコンピュータを利用し,操作は基本的にはプログラムによってなされます. したがってプログラミングは,データサイエンスのための前提知識となります.</p>
<p>この講義では最終的には,学生それぞれに研究のためのプログラムを組んでもらいます.
データサイエンスや統計でよく使われる言語は, Python, Julia, R, SPSS, matlab などいくつかありますが, この授業では, 現在世界的に広く使われており,習得も容易なPythonを利用します.</p>
<p>プログラミング言語には沢山の種類がありますが,言語によって機能や得意なことが異なります.</p>
<figure>
<img src="../images/2024-04-08-lecture-DS-languages.png" alt="Langage icons" />
<figcaption aria-hidden="true">Langage icons</figcaption>
</figure>
<p>プログラミング言語は <strong>実行方式</strong>, <strong>書き方</strong>,<strong>検査の仕方</strong>などの特徴がそれぞれ異なり,大まかにはそれぞれ以下のような意味になります.</p>
<hr />
<p><strong>実行方式</strong></p>
<p>プログラミング言語は,人間にとって理解しやすくデータ構造やアルゴリズムを記述するための手段です.しかし,コンピュータはプログラミング言語を直接理解することはできません.そのため,書かれたプログラムはコンピュータが解釈できる形式,すなわち0と1のビット列である機械語に翻訳される必要があります.この翻訳プロセスは,プログラムの実行方式を以下の二つに分ける要因となります.</p>
<div class="note">
<ul>
<li>インタプリタ方式</li>
</ul>
<p>インタプリタ方式では,プログラムは逐次的に機械語に翻訳されながら実行されます.この方式の特徴は,コンパイルする必要がないため,翻訳と実行が同時に行われる点です.これにより,プログラムの変更がすぐに反映されるため,開発中のテストやデバッグが容易になります.しかし,実行のたびに翻訳を行う必要があるため,実行速度が遅くなることが欠点です.</p>
</div>
<div class="note">
<ul>
<li>コンパイラ方式</li>
</ul>
<p>コンパイラ方式では,プログラム全体が事前に機械語に翻訳され,その結果として得られる実行可能なプログラムが生成されます.コンパイラ方式の利点は,一度コンパイルされたプログラムは,何度も実行される際に追加の翻訳が不要であるため,実行速度が速いことです.また,コンパイル時にプログラム全体を分析できるため,エラーやバグの発見が早期に行え,より安全性が高まるという利点があります.</p>
</div>
<p>この二つの実行方式は,プログラムの性質や用途に応じて選択されます.インタプリタ方式は開発の柔軟性が求められる場合に適しており,コンパイラ方式は性能が重視される場合に好まれます.プログラマはこれらの特性を理解し,それぞれの場面で最適な選択をすることが求められます.</p>
<hr />
<p><strong>書き方</strong></p>
<p>プログラミングとは,基本的にコンピュータに対して実行してほしい命令を記述する作業です.現在主流のプログラミング言語には,大まかに<strong>手続き型言語</strong>と<strong>関数型言語</strong>の二つの記述方法が存在します.</p>
<div class="note">
<ul>
<li>手続き型言語</li>
</ul>
<p>この言語タイプでは,プログラムが｢何を,どうするか｣を順番に記述していきます. Python,Java,VBAなど多くの広く使われている言語がこの方法を採用しています. これにより,処理の流れが直観的に理解しやすくなります.</p>
</div>
<div class="note">
<ul>
<li>関数型言語</li>
</ul>
<p>関数型言語では,プログラムを実行によってユーザーが得たい結果を抽象化し,関数の組み合わせで記述します.このアプローチは,安全性の向上やデバッグのしやすさといったメリットを提供しますが. 概念の抽象化により理解が難しくなることがあります.</p>
</div>
<p>近年では,手続き型言語にも関数型の構文が取り入れられるようになり,手続き型言語内で関数型風に記述することや,その逆も可能になっています.</p>
<p>これらの違いについて更に詳しく知りたい方は,別の<a href="../lectures/2024-03-29-introduction-to-algebraic-programing.html">講義資料</a>で更に詳しく説明しています.</p>
<hr />
<p><strong>検査の仕方</strong></p>
<p>プログラミングは,データ構造とアルゴリズムを使用して命令を記述する作業です.ここではデータ型の詳細に深くは触れませんが,あらゆるプログラミング言語において,データはコンピュータのメモリ上に数値の羅列として存在します.それらの数値に意味を与えることでデータ型が形成されます.</p>
<p>プログラムは実行時に,これらのデータ型が適切に使用されているかを検査します.主な検査方法には<strong>動的型付け</strong>と<strong>静的型付け</strong>があります.動的型付けでは,プログラムの実行時にデータ型が決定され,静的型付けではコンパイル時にデータ型が固定されます.さらに,型付けには「弱い型付け」と「強い型付け」という区別も存在しますが,この講義ではその詳細には触れません.興味のある方は,このトピックについてさらに調査してみてください.</p>
<div class="note">
<ul>
<li>動的型付け
動的型付けのシステムでは,プログラマが変数の型を明示的に宣言する必要がありません.代わりに,コンピュータはプログラムの実行時に型を推論し,適切な型を自動で割り当てます.この柔軟性により,プログラマはより迅速に開発を進めることが可能になります.一方で,このシステムではコンパイル時の型チェックが行われないため,実行時に型関連のエラーが発生するリスクが高まります.そのため,安全性を確保するためには,プログラマ自身が型の整合性に注意を払い,エラー処理やテストにより問題を検出する必要があります.</li>
</ul>
</div>
<div class="note">
<ul>
<li>静的型付け</li>
</ul>
<p>静的型付けでは,プログラマが変数や関数の型をコード内で明示的に宣言し,これらはコンパイル時にチェックされます.この事前の型チェックにより,プログラムの安全性が向上し,実行時のエラーが減少します.また,コンパイラが型情報を利用して効率的なコード生成を行い,パフォーマンスが向上することがあります.静的型付けは特に,大規模プロジェクトや高い信頼性が求められる場合に適しています.</p>
</div>
<hr />
<p>プログラミング言語は,このような区分や,それ以外の様々な機能によって,用途の向き不向きが決まります(大雑把な目安です).</p>
<figure>
<img src="../images/2024-04-08-language-and-purpose.png" alt="Languages and usages" />
<figcaption aria-hidden="true">Languages and usages</figcaption>
</figure>
<p>ではこれらの特徴を踏まえて,Pythonとはどのような言語なのかを見てみましょう.</p>
<div class="note">
<p>Pythonは</p>
<pre><code>- インタプリタ型言語で
    - 機械語に翻訳しながら動く
    - 手軽に書けて手軽に試せる
    - でも少し安全性が低く,遅い

- 手続き型言語で
    - 次に何をするかを順番に書く
    - (ただし関数型っぽい書き方もできる)

- 動的型付け言語で
    - 型検査を動かしながら実施
    - 動かしてから型が違うと失敗する</code></pre>
</div>
<p>これらは,プログラミング言語の大きな分類からみたPythonですが, Python固有の特徴として以下のようなものがあります.</p>
<div class="note">
<pre><code>- とにかく読みやすく書きやすく覚えやすい
    - ABC言語という教育用言語が元になっている
        - 予約語が少ない,      → 覚えることが少ない
        - インデントでかき分け → 間違いが少ない
        - だれが書いても同じになる(と言われてはいる)

- ライブラリが豊富
    - 統計処理を全部0から自分で書くのは大変
    - 他の人が作ったものを使えるようにするのがライブラリ
    - 様々な大学や企業,研究者が膨大な量の統計処理,機械学習ライブラリを開発している

- 遅いけど,Cなどと連携しやすい.
    - プログラミング言語ごとに速度は異なる.
    - Pythonは結構遅いので大きな計算に時間がかかる.
        - とても早い言語で遅い部分を書き換えやすい
        - ライブラリは基本的に早くなっている</code></pre>
</div>
<p>Pythonが教育用に良く使われるのは, インタプリタ方式の動的型付け言語であることから手軽に書けるだけではなく,もともと言語として簡単に書けるように作られていることが大きいです.</p>
<p>また, 統計,データサイエンス分野のライブラリが充実しており, これによって誰でも簡単に複雑な統計処理やデータサイエンスの技法が利用できることで,Pythonが広く普及しています.</p>
<p>簡単 → 教育用に → 多くの人が使う → ライブラリが充実 → もっと多くの人が使う</p>
<p>という流れがPythonの最大の強みと言えるでしょう.</p>
<p>実際にPythonはユーザー数が増え続けており,プログラムの共有サイトGitHubにおける2023年のすべての言語のなかで2番目にユーザ数が多い言語となっています.
<a href="https://github.blog/2023-11-08-the-state-of-open-source-and-ai/">Top 10 Programming languages on GitHub</a></p>
<figure>
<img src="../images/top-programming-languages-2023.png" alt="Top 10 Programming languages on GitHub" />
<figcaption aria-hidden="true">Top 10 Programming languages on GitHub</figcaption>
</figure>
<h3 data-number="2.2" id="授業準備"><span class="header-section-number">2.2</span> 授業準備</h3>
<p>この講義では,プログラムを自分で作成し,様々な演習をこなしてもらいますが,その前段階として,いくつかの準備が必要となります. このあたりはこの科目の先修科目の統計学入門でも扱っていますが,履修していない人もいますので,順番にやっていきましょう. 非常に基礎的な内容なので, 問題のない人は飛ばしましょう.</p>
<h4 data-number="2.2.1" id="テキストエディタ"><span class="header-section-number">2.2.1</span> テキストエディタ</h4>
<p>テキストエディタとは,プログラムを書くためのソフトウェアです.
プログラムを書くことをコーディング(Coding)といいます.</p>
<p>テキストエディタには沢山の種類があり,それぞれ独自の機能を持っています.
Windwosに最初から入っている｢メモ帳｣もテキストエディタですが,プログラムを書くために様々な機能が追加された高機能なテキストエディタも沢山あります.</p>
<p>例えば,シンタックスハイライト機能は,以下のプログラムのように,プログラムの記述を役割や意味に応じて色付けして見やすくしてくれます.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">## シンタックスハイライト</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet_based_on_time():</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    now <span class="op">=</span> datetime.now()</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    current_hour <span class="op">=</span> now.hour</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="dv">5</span> <span class="op">&lt;=</span> current_hour <span class="op">&lt;</span> <span class="dv">12</span>:</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        greeting <span class="op">=</span> <span class="st">&quot;Good morning, world!&quot;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">12</span> <span class="op">&lt;=</span> current_hour <span class="op">&lt;</span> <span class="dv">18</span>:</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        greeting <span class="op">=</span> <span class="st">&quot;Good afternoon, world!&quot;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        greeting <span class="op">=</span> <span class="st">&quot;Good night, world!&quot;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> greeting</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 関数を呼び出して結果を表示</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(greet_based_on_time())</span></code></pre></div>
<p>また,スペースをタブに変換するなどの機能も非常に便利です. 最近では生成AIを利用した自動補完機能がついたエディタなどもありますが,本講義における生成AIの利用に関しては第2回でコードを書き始めた際に説明します.</p>
<p>今までメモ帳以外のテキストエディタを利用したことが無い方には,シンプルなSublime Text 3をおすすめします(今世界的に人気があるのは VSCodeです.非常に便利ですが機能が多すぎて皆さんが混乱する可能性があるので,こちらを選びました).</p>
<p>既に何かしらのテキストエディタを利用している方は,現在使用しているエディタをそのまま利用して頂いても構いません.</p>
<p><a href="https://www.sublimetext.com/3">このURL</a>をクリックして,ページ上部にあるDownloadをクリックします. 自分のPCに合わせたインストール方法を選択しましょう.</p>
<figure>
<img src="../images/2024-04-08-lecture-DS-sublime-install.png" alt="Screenshot Sublime Text" />
<figcaption aria-hidden="true">Screenshot Sublime Text</figcaption>
</figure>
<div class="warn">
<p>SublimeTextもいろいろな機能を追加することができます.
｢SublimeText 設定｣などで調べて,好きなようにカスタマイズして構い舞いません.
カスタマイズをしなくても基本的な機能には問題ありません.</p>
</div>
<h3 data-number="2.3" id="imeの設定"><span class="header-section-number">2.3</span> IMEの設定</h3>
<p>プログラムは基本的に <strong>｢半角英数字｣</strong> で記述されます. プログラム中に全角の空白や記号が交じるとエラーの原因となる場合があります. そのため,プログラムを書く前に,そういったミスが起きないようにIMEの設定をしましょう.</p>
<p>タスクトレーからIMEの設定ができます．基本的に記号をすべて半角に設定しましょう（スペースは必ず半角にしましょう）．特に，句読点をコンマとピリオドに変更しましょう．</p>
<figure>
<img src="../images/2024-04-08-lecture-DS-IME.png" alt="IME" />
<figcaption aria-hidden="true">IME</figcaption>
</figure>
<h3 data-number="2.4" id="cliの基本操作"><span class="header-section-number">2.4</span> CLIの基本操作</h3>
<p>プログラムの開発環境にはマウスなどでクリックして操作するGUI(Graphical User Interface)をもったIDE(Integrated Development Environment)などもありますが,基本的には文字によってコンピュータに命令を送るCLI(Command Line Interface)を利用します. 映画やマンガなどで,ハッカーが黒い画面に文字を打っているあれのことです.</p>
<p>コンピュータのオペレーティングシステムとユーザー間のCLIを提供するプログラムをShellといい,Windowsでは,Command PromptやPowerShellなどがあります. MacなどのUnix系では,Bashやzshがあります. いずれも (Windows) Terminalというソフトウェアを介して利用します.</p>
<p>本講義では環境や好みによって好きな環境で開発して構いませんが,ここでは,PowerShellの利用法を解説します.</p>
<p>Windows11の検索バーで <code>Terminal</code>と検索して,出てきた <code>Terminal</code>をクリックしましょう.</p>
<figure>
<img src="../images/Terminal-launch.png" alt="Screenshot Terminal" />
<figcaption aria-hidden="true">Screenshot Terminal</figcaption>
</figure>
<p>自動的に<code>Windows PowerShell</code>が起動します. 立ち上がった,黒色の画面に文字でコマンド(命令)を入力して,コンピュータを操作します.</p>
<figure>
<img src="../images/Terminal-window.png" alt="Screenshot Terminal" />
<figcaption aria-hidden="true">Screenshot Terminal</figcaption>
</figure>
<h4 data-number="2.4.1" id="エンコーディング"><span class="header-section-number">2.4.1</span> エンコーディング</h4>
<p>実際にコマンドを入力する前に, 初心者がつまづきやすいポイントとして,Windowsのエンコーディングについて解説します.</p>
<p>PCは人間の使う文字（日本語，英語など）が理解できません.PCは機械語と呼ばれる言語で命令を受け付けます.一方で,人間は機械語を読むのが困難です.そこで,人間の使う文字と,機械語の間に変換ルールを設けて人間の文字でされた命令をPCにわかる文字に変換します.この変換ルールを文字エンコーディングと呼びます.</p>
<p>エンコーディングには複数の種類があります(日本語設定のWindowsはShift-JIS,Unix系はUnicodeが一般的です).
PythonはUTF-8という文字エンコーディングがデフォルトなので,Windowsにおいても可能な限りUTF-8を用いた方が良いです.</p>
<p>そこで,ターミナル上で利用するエンコーディングを変更します.
PowerShellを起動して, <code>chcp 65001</code> と打ち込み, PowerShell上で利用する文字エンコーディングをUTF-8に変更しましょう. <code>chcp</code>が利用する文字コードを変更するコマンド(change code page)で,その後に変更したい文字コードを入力します. <code>65001</code>は<code>UTF-8</code>のコードページ(Windows独自の文字エンコーディング)です. これはPowerShellを起動する度に行ってください．</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">chcp</span> 65001</span></code></pre></div>
<p>と入力すると,</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Active</span> code page: 65001</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:<span class="dt">\U</span>sers<span class="dt">\u</span>ser<span class="op">&gt;</span></span></code></pre></div>
<p>のように表示されるはずです.</p>
<h4 data-number="2.4.2" id="日本語表示"><span class="header-section-number">2.4.2</span> 日本語表示</h4>
<p>Power Shellの設定によっては日本語が表示されず,日本語部分が <code>□</code> で置き換えられて表示されます.これは,使用しているフォントに日本語が含まれていないために発生します.</p>
<figure>
<img src="../images/powershell-tofu.png" alt="Screenshot PowerShell" />
<figcaption aria-hidden="true">Screenshot PowerShell</figcaption>
</figure>
<p>設定を変更してて日本語を表示可能にしましょう(
適当な日本語を入力してみて,問題なく表示されるようであれば,変更は必要ありません).</p>
<p>左上の<code>下向きの矢印 &gt; 既定値 &gt; 外観 &gt; フォントフェイス</code>の部分を日本語フォントに変更し<code>保存</code>をクリックすることで,日本語が表示されるようになります.</p>
<figure>
<img src="../images/Terminal-setting1.png" alt="Screenshot Terminal" />
<figcaption aria-hidden="true">Screenshot Terminal</figcaption>
</figure>
<figure>
<img src="../images/Terminal-setting2.png" alt="Screenshot Terminal" />
<figcaption aria-hidden="true">Screenshot Terminal</figcaption>
</figure>
<figure>
<img src="../images/Terminal-setting3.png" alt="Screenshot Terminal" />
<figcaption aria-hidden="true">Screenshot Terminal</figcaption>
</figure>
<p>その他色やサイズなど,好きな設定に変更できます. あとで,好みにカスタマイズしましょう.</p>
<h4 data-number="2.4.3" id="ディレクトリ"><span class="header-section-number">2.4.3</span> ディレクトリ</h4>
<p>基礎的なコマンドを学ぶ前に,ディレクトリに関して理解しておきましょう.
コンピュータの中のデータは,以下のような木構造になっています. このような木構造によるファイルの構造をディレクトリといいます.</p>
<pre><code>C: -- Users -- hoge
          |
            -- hoge2 -- Desktop
                   |
                     -- Downloads
                   |
                     -- Documents -- huga
                                |
                                  -- huga2</code></pre>
<p>CLIにおいて,ユーザはこの木構造のどこかに存在しており,この木構造を移動しながら様々な作業を行います. 現在いるディレクトリのことを <code>working directory</code>(以下wd)や<code>current directory</code>といいます.</p>
<h3 data-number="2.5" id="基礎的なコマンド"><span class="header-section-number">2.5</span> 基礎的なコマンド</h3>
<p>ここでは, この講義で必要となる最低限のコマンド,特にディレクトリの移動に関するコマンドを学習します.</p>
<p>wdは, CLIの左側に表示されていることが多いです.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:/Users/hoge2<span class="op">&gt;</span></span></code></pre></div>
<p>のように表示されていれば今<code>C:</code>ドライブ下の<code>Users</code>下の<code>hoge2</code>がwdとなります.</p>
<div class="warn">
<ul>
<li><p>Windowsでは,ディレクトリを区切る文字が<code>¥</code>あるいは<code>\</code>で表示されていると思います.</p></li>
<li><p>Macでは,<code>/</code>です.</p></li>
</ul>
<p>本資料では,<code>¥</code>を表示するのが <del>ダルい</del> 技術的に難しいので<code>/</code>を利用しています. 自分の環境に併せて適宜読み替えてください.</p>
</div>
<p>CLIの左側に表示されていない場合にも<code>pwd</code>コマンド (print working directory)を入力すると,現在のディレクトリが表示されます.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:/Users/hoge2<span class="op">&gt;</span> pwd</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="ex">PATH</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="ex">----</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="ex">C:/Users/hoge2</span></span></code></pre></div>
<p>wdの下に何があるかを調べるコマンドとして<code>ls</code>コマンド(list)があります.</p>
<div class="warn">
<p>以下, <code>PS C:\Users\hoge2</code>の部分は省略します.</p>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> ls</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Desktop</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Downloads</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Documents</span></span></code></pre></div>
<p>※実際の画面では,もう少しいろいろな情報が書かれているかと思います.</p>
<p>wdから別のディレクトリに移動するコマンドとして <code>cd</code> コマンド(change directory)があります</p>
<p><code>cd [移動先]</code> と打つことで,lsコマンドで出てきた,ディレクトリに移動することができます.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> ls</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Desktop</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Downloads</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Documents</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> cd <span class="ex">Documents</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> pwd</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:/Users/hoge2/Documents</span></code></pre></div>
<div class="warn">
<p>移動先のディレクトリ名はすべて自分で入力する必要はありません. 最初の数文字を入力して<code>Tab</code> Keyを押すと,自動で保管してくれます.</p>
</div>
<p><code>cd ..</code> と打つと一つ前のディレクトリ,<code>cd ~</code>と打つとホームディレクトリ(基本的には最初に開いた際にいた場所)に一挙に移動することができます.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> pwd</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:/Users/hoge2/Documents</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> cd <span class="ex">..</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> pwd</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:/Users/hoge2</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> cd <span class="ex">Documents/huga</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> pwd</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:/Users/hoge2/huga</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> cd <span class="ex">~</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> pwd</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:/Users/hoge2</span></code></pre></div>
<p><code>mkdir [作りたいディレクトリ名]</code> コマンド(make directory)で,新しいディレクトリを作成できます.</p>
<p><code>rmdir [消したいディレクトリ名]</code> コマンド(remove directory)で,ディレクトリを消すことができます.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> pwd</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">PS</span> C:/Users/hoge2</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> ls</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Desktop</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Downloads</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Documents</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> cd <span class="ex">Documents</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> ls</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="ex">huga</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="ex">huga2</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> mkdir <span class="ex">huga3</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> ls</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="ex">huga</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="ex">huga2</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="ex">huga3</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> rmdir <span class="ex">huga3</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> ls</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="ex">huga</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="ex">huga2</span></span></code></pre></div>
<p><code>rmdir</code> コマンドでは中身のあるディレクトリは消せません. オプションを追加することで消せますが,危険なのでここでは教えません.興味があったら自分で調べてみましょう.</p>
<div class="note">
<p><strong>練習:作業用ディレクトリを作ろう</strong></p>
<ul>
<li><p>これから,作業をするためのディレクトリをコマンドで作成しましょう.</p>
<ul>
<li>Documentsに移動</li>
<li>Programs というディレクトリを作成し移動</li>
<li>Python というディレクトリを作成し移動</li>
<li>slds というディレクトリを作成し移動
(名前は好きに設定して良いです. slds; special lecture data science)</li>
</ul></li>
</ul>
<p>これからこの講義で利用するプログラムなどはsldsに保存しましょう.</p>
</div>
<h3 data-number="2.6" id="環境構築"><span class="header-section-number">2.6</span> 環境構築</h3>
<p>自身の環境(PC)でプログラムが動くようにすることを環境構築といいます. Python自分のPCで動くように設定をしましょう.</p>
<p>Pythonの環境構築に関して説明します.Pythonを動かす方法は沢山あります.一つのソフトの中でプログラムの編集から実行まで全て完結するIDE(統合開発環境)やブラウザ上で実行する方法もありますが,ここではCLIを利用して実行する方法を準備します.Windowsを所有している学生が多いと思われるので,Windowsを前提に説明します. それ以外のOSの方は分からなければ教員に聞いて下さい.</p>
<p>Pythonの<a href="https://www.python.org/downloads/windows/">公式サイト</a>からPythonをダウンロードしましょう.</p>
<p>Windows → 最新の一つ前のバージョンの Windows installer (64-bit) をクリック</p>
<p>最新版を入れたいところですが,最新のVersionは色々と不具合が起きる可能性があるので,上から1つ目のVersionにしておきましょう.ここでは最新が3.12.2なので,3.11台のバージョンを入れます.(バージョンの数字は,サイトを開いた時期によって変わります.)</p>
<figure>
<img src="../images/python-download.png" alt="Download Python" />
<figcaption aria-hidden="true">Download Python</figcaption>
</figure>
<p>ダウンロードした Python-3.11.8.exeをクリックするとウィンドウが開きます. 指示に従ってインストールしましょう．</p>
<div class="warn">
<p>注意点</p>
<p>開いたWindowで</p>
<ul>
<li><p><code>Insatall launcher for all users(recommended)</code></p></li>
<li><p><code>Add Python 11.8 to PATH</code></p></li>
</ul>
<p>というチェックボックスが出てきたら,それらにチェックを入れてから次に進みましょう.</p>
<p>この画面もVersionなどによって変わるため,分からなければ教員に聞いて下さい.</p>
<figure>
<img src="../images/install-python.png" alt="Install Python" />
<figcaption aria-hidden="true">Install Python</figcaption>
</figure>
</div>
<p>インストールが終わったら <strong>新しくPowerShellを開いて</strong> <code>python --version</code> と入力しましょう.
<strong>Macの人は</strong> <code>python3 --version</code> とコマンドが変わりますので注意してください. Macの人は以降,<code>python</code> コマンドはすべて <code>python3</code> コマンドに読み替えてください.</p>
<p>install したversionのPythonが表示されれば無事インストールされています.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> python <span class="ex">--version</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Python</span> 3.11.8</span></code></pre></div>
<h3 data-number="2.7" id="hello-world"><span class="header-section-number">2.7</span> Hello World</h3>
<p>初めて作成するプログラムとして標準出力(PowerShellなどの画面)に<code>Hello World</code>と出力するだけのプログラムを作成してみます.</p>
<p><code>PowerShell</code>を開いて,自分の作業用ディレクトリに移動します.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> chcp <span class="ex">65001</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> cd <span class="ex">Documents/Programs/Python/slds</span></span></code></pre></div>
<p>テキストエディタで新しいファイルを開き,<strong>作業用ディレクトリ</strong>に<code>hello.py</code>という名前で保存しましょう.</p>
<p><code>.py</code>はPythonプログラムの拡張子です.</p>
<p>保存は,タブから<code>File &gt; save with encoding &gt; UTF-8</code>の順にクリックし<code>UTF-8</code>で保存しましょう.
それ以降は <code>Ctrl + s</code>などで上書き保存しても構いません.</p>
<p>作成したディレクトリに移動し, lsコマンドでファイルがあるか確認しましょう.
ょう.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> ls</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">hello.py</span></span></code></pre></div>
<p>確認できたらhello.pyに以下の2行を書き足して上書き保存します.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(“Hello world<span class="op">!</span>”)</span></code></pre></div>
<p>保存できたら<code>python hello.py</code>コマンドでプログラムを実行します.
(Macの人は <code>python3 hello.py</code>です.)</p>
<p>標準出力に<code>Hello World!</code>と表示されれば成功です.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> python <span class="ex">hello.py</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Hello</span> World!</span></code></pre></div>
<p>ここまでで，皆さんはPCでプログラムを書く準備が整いました．
あとはプログラムの書き方を学習すれば自身の環境で開発が行なえます．</p>
<h3 data-number="2.8" id="プログラミングの勉強の仕方"><span class="header-section-number">2.8</span> プログラミングの勉強の仕方</h3>
<p>プログラミング言語は,文字通り<strong>言語</strong>です. 英語などと同じ様に,使わないと身につきません.なので,大事なことは<strong>勉強するより使う</strong>ことです.</p>
<p>英語の勉強で,一つひとつ文法を覚えることは大切かもしれませんが,実際に英文を書いたり,会話しないと使えるようにはなりません. プログラミングの学習で,学習用の資料や教科書を一つ一つ<strong>読んだり,ノートに書き写す人</strong>がたまにいますが,かなり効率が悪い方法です. 何も分からなくてもいいので,取り敢えずプログラムを書いて実行するようにしましょう. 資料に載っている例はすべて,実際に書いて実行してみましょう.</p>
<p>一番いい方法は,何も分からなくても取り敢えず,プログラムをつかってしてみたいことを実行することです.1からすべての構文などを覚えようとしないで,自分がやりたい,しなければならないことを,書き始めましょう. <strong>分からないところだけを</strong>調べれば十分です.</p>
<p>その際に,新しく知ったことは,メモなどして,あとで参照できるようにしておきましょう. その資料が後々役に立ちます.</p>
<p>プログラミングは,すべて暗記する必要はありません. 覚えていなくても,それの調べ方や載っている資料を知っていれば十分です. 何回も使う機能であれば自然に覚えます.</p>
<p><strong>ただし,</strong> Pythonは非常に多くの人が利用しているので,みなさんがこの講義で習うレベルのことは検索すれば既に,完成したプログラムを参考にすることができます. また,ChatGPTなどの生成AIを利用すれば,皆さんの書いたプログラムよりかなりできの良いものをすぐに得ることができます. それらを見て勉強することは大切ですが,ただ,只管コピペしたり,生成AIの結果を利用しているだけでは,全く身につきません. 検索して出てきたコードや,生成AIによるコードを利用しても構いませんが, それをただ貼り付けるのではなく,<strong>自分で読んで,理解する</strong>ようにしましょう.</p>
<p>知らない部分,自分では書けない部分が見つかったらそれを理解するように勉強しましょう. ChatGPTに質問しても構いません. ただ,聞いたことを説明できるようにしましょう.</p>
<p>自分で説明できないものを使えるのは<strong>せいぜい学校の課題くらいです</strong>. 仕事や研究では,中身の良く分からないコードは利用できません. 最低限自分で理解したものだけを利用してください.</p>
<p>講義では,結果があっていればよいだけではなく,<strong>なぜそのように書いたのか</strong>,<strong>どのような意味か</strong>,<strong>なぜこうなるのか</strong>などを皆さんに聞きますので,理解に務めるようにしましょう.</p>
<div class="note">
<p><strong>演習</strong></p>
<ul>
<li><u>演習1 Shellコマンドの調査</u></li>
</ul>
<p>今回ならったいくつかのコマンド以外にも便利なコマンドが沢山あります. 3つ調べて,使い方を説明してください.</p>
<ul>
<li><u>演習2 チートシートの作成</u></li>
</ul>
<p>チートシートとは「それだけを見れば必要な情報が分かるメモ書き」のことです.
プログラミングの学習では, 自分でノートを取って,それさえ見ればなんとかできる資料を作る のは非常に有用です.</p>
<p><code>.ppt</code>でも<code>.txt</code>でも形態は何でも良いので, 自分だけのチートシートを作成して, 今日覚えたこと,調べたことなどをメモしていきましょう.</p>
<p>◦ CLI, Pythonの基礎, Pandasなど学習の区切りごとにシートを分けると便利です.</p>
<p>◦ スライドサイズを事前に大きく設定しておくと便利です</p>
<p>書き方は自由ですが, <a href="https://www.google.com/search?newwindow=1&amp;client=safari&amp;sca_esv=635483f0705dd420&amp;sca_upv=1&amp;q=python+%E3%83%81%E3%83%BC%E3%83%88%E3%82%B7%E3%83%BC%E3%83%88&amp;uds=AMwkrPtd7EXxieMQKehnHvZf8S6pNpVcJzQvmfSMfustdt5GVU4paqDezVS1KwRLLfnWdTPfRKqI2vio1swnpAMe65pQfFGqsLrhLm9FBruViqbu8gs83egRP5pID9cAUWbOoFAII8Bi4Sa9pC2nZB8uNY_Im_IVhSc-ISQJazoPJyS7Y5hq8j_wtxEDwusT0kav7Mhx_On2phc8rZKZ0rWb3f5AykS1iJlyMqAYBs5Ke8QgUSIasP6AkeP9P6DIKWQaXCglNYTRDcA_cLO0qv_MU45G2ng9BfipwmjcaL4l2EsY-TdRRazsTUowT__BAUHIv2lsEG32&amp;udm=2&amp;prmd=ivsnmbtz&amp;sa=X&amp;ved=2ahUKEwiA48qB-bOFAxU3aPUHHYJmBQsQtKgLegQICRAB&amp;biw=1147&amp;bih=1269&amp;dpr=1">検索して</a>有名なチートシートを参考にしてください.</p>
<p>このチートシートは後で紹介してもらいます.</p>
<ul>
<li><u>演習3 <code>print()</code>の利用</u></li>
</ul>
<p>今回作成した<code>hello.py</code>における
<code>print()</code> という関数は()内の文字(<code>""</code>で囲われている部分)を標準出力する関数です.
<code>print()</code>の括弧内の <code>Hello World!</code> 部分を好きな文字に書き換えて実行してみましょう.</p>
</div>
<div class="warn">
<p><strong>演習について</strong></p>
<p>この資料では,所々に演習が指定されています.
演習は自分で行い, どのようにやったのかを講義中に発表,あるいは宿題として提出してもらいます.</p>
<p>家で演習を進めた場合には,講義中にそれが再現できるように,</p>
<ul>
<li>どのようにやったのか</li>
<li>なぜやったのか</li>
</ul>
<p>などを人に説明できるように<strong>必ず作成したメモ,資料</strong>などを残しておきましょう.</p>
</div>
</details>
<h2 data-number="3" id="pythonことはじめ"><span class="header-section-number">3</span> Pythonことはじめ</h2>
<details>
<summary>
開く
</summary>
<p>第2回では,Pythonの基礎の基礎を学習します.
本講義はプログラミング自体の学習を対象としているわけではないので,
講義内で必要な技能を紹介するのみに留めます.</p>
<p>基本的には,公式の<a href="https://docs.python.org/ja/3/tutorial/index.html">Pythonチュートリアル</a>の内容で必要十分ですので,そちらにそって学習を進めます.
より詳しい内容を勉強したい場合には,プログラミングの講義を履修するか,
<a href="http://cucieee.stars.ne.jp/index.html">千葉商科大学IEEESB</a>
などに参加するのが良いかと思います.</p>
<p>今回は取り敢えず,以下の作業を自分で行いながら,Pythonの体験をしてみましょう.</p>
<h3 data-number="3.1" id="replを使ってみよう"><span class="header-section-number">3.1</span> REPLを使ってみよう</h3>
<p>プログラムの対話環境全般をREPL (Read Eval Print Loop)と呼びます. 長いプログラム(スクリプト)を書かなくても対話的にプログラムを実行することができます.</p>
<p>Pythonには複数のREPLがあり,iPython, jupyternotebook, Google Colaboratoryなどがあります.ここではとりあえず,iPythonを利用します. 他のものについても,後ほど出てきます.</p>
<p>CLI(PowerShellやTerminal)を開いて,<code>python</code>(Mac の人はPython3)とだけ打ってEnter Keyを入力するとPythonのREPLが立ち上がります.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">~/Desktop</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Python</span> 3.10.11 <span class="er">(</span><span class="ex">v3.10.11:7d4cc5aa85,</span> Apr  4 2023, 19:05:19<span class="kw">)</span> <span class="ex">[Clang</span> 13.0.0 <span class="er">(</span><span class="ex">clang-1300.0.29.30</span><span class="kw">)</span><span class="ex">]</span> on darwin</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Type</span> <span class="st">&quot;help&quot;</span>, <span class="st">&quot;copyright&quot;</span>, <span class="st">&quot;credits&quot;</span> or <span class="st">&quot;license&quot;</span> for more information.</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span></span></code></pre></div>
<p>プログラムを書いてEnter Keyを押すとその行のプログラムが実行されます.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span></code></pre></div>
<p>終了するには,<code>exit()</code>と入力します.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">~/Desktop</span> 1m 7s</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Python</span> 3.10.11 <span class="er">(</span><span class="ex">v3.10.11:7d4cc5aa85,</span> Apr  4 2023, 19:05:19<span class="kw">)</span> <span class="ex">[Clang</span> 13.0.0 <span class="er">(</span><span class="ex">clang-1300.0.29.30</span><span class="kw">)</span><span class="ex">]</span> on darwin</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Type</span> <span class="st">&quot;help&quot;</span>, <span class="st">&quot;copyright&quot;</span>, <span class="st">&quot;credits&quot;</span> or <span class="st">&quot;license&quot;</span> for more information.</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> 1 <span class="ex">+</span> 1</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> exit<span class="kw">()</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="ex">~/Desktop</span> 1m 7s</span></code></pre></div>
<h3 data-number="3.2" id="コメントアウト"><span class="header-section-number">3.2</span> コメントアウト</h3>
<p>REPL上でもスクリプトでも,#を先頭につけると,その行はコメントとして扱われます.</p>
<p>ただのコメントであり,プログラムとしては何も実行されません.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># これはコメント何も起きない</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span></span></code></pre></div>
<h3 data-number="3.3" id="データ型"><span class="header-section-number">3.3</span> データ型</h3>
<p>第1回の検査に関する説明で軽く触れましたが, プログラミングで扱うデータはコンピュータのメモリ上に数値の羅列として存在します. それらの数値に人間が解釈可能な意味を与えたものをデータ型といいます.</p>
<p>Pythonで最初から準備されているデータ型(<strong>組み込み型</strong>)には以下のようなものがあります.
詳細はこのあと順番に見ていきますので, こんなものがあるということだけ,頭に入れておきましょう.</p>
<div class="note">
<p>Pythonのデータ型(一部)</p>
<ul>
<li><p>数値型:数値を表す</p>
<ul>
<li>整数(<code>int</code>)</li>
<li>浮動小数点数(<code>float</code>)</li>
<li>複素数(<code>complex</code>)</li>
</ul></li>
<li><p>文字列型(<code>str</code>):文字を表す</p></li>
<li><p>リスト(<code>list</code>):いくつかのデータをまとめたもの</p></li>
<li><p>タプル(<code>tuple</code>):データの組み合わせ</p></li>
<li><p>辞書型(<code>dict</code>):<code>key</code>と<code>value</code>からなる辞書を表す</p></li>
<li><p>真偽値(<code>bool</code>):正しいか正しくないかなどを表す</p></li>
</ul>
</div>
<h4 data-number="3.3.1" id="数値型pythonを電卓として使う"><span class="header-section-number">3.3.1</span> 数値型(Pythonを電卓として使う)</h4>
<p>REPLの動きに慣れるために,電卓で行うような簡単な計算をREPL上で行いましょう.
電卓で行う計算なので,ここで扱うデータ型は数値型になります.
Pythonは,における数値型には整数を表す<code>int</code>,小数を表す<code>float</code>,複素数を表す<code>complex</code>があります. 本資料では,その内<code>int</code>と<code>float</code>について扱います.</p>
<p>基本的には<code>1</code>や<code>100</code>のような整数を書けば<code>int</code>型として認識され,<code>1.0</code>や<code>100.3</code>のように小数点をつけると<code>float</code>型として認識されます.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">1</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="fl">1.0</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fl">1.0</span></span></code></pre></div>
<p>Pythonでは<code>type()</code>の丸括弧の中にデータを記述することで特定のデータのデータ型を確認することができます.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(<span class="dv">1</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="kw">class</span> <span class="st">'int'</span><span class="op">&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(<span class="fl">1.0</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="kw">class</span> <span class="st">'float'</span><span class="op">&gt;</span></span></code></pre></div>
<p>整数や後述の文字など変換可能なデータ型から,<code>int</code>型へ変換するには<code>int()</code>の中に,そのデータを書きます. <code>float</code>型に変換するには,<code>float()</code>を使います.<code>int</code>から<code>float</code>への変換では,小数点以下が切り捨てられます.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">int</span>(<span class="fl">4.9</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">float</span>(<span class="dv">2</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fl">2.0</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">float</span>(<span class="st">&quot;2&quot;</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fl">2.0</span></span></code></pre></div>
<p>Pythonでは複数の数値型が混ざった計算に対応しています. 基本的に,特定の計算で複数の数値型が混じっている場合には, <code>int</code>型は<code>float</code>型に,<code>float</code>型は<code>complex</code>型に自動で拡張されるので本講義の範囲ではそれほど意識する必要はありません.</p>
<p>簡単な計算に用いる記号は以下のとおりです.</p>
<table>
<thead>
<tr class="header">
<th>計算</th>
<th>記号</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>足し算</td>
<td><code>+</code></td>
</tr>
<tr class="even">
<td>引き算</td>
<td><code>-</code></td>
</tr>
<tr class="odd">
<td>掛け算</td>
<td><code>*</code></td>
</tr>
<tr class="even">
<td>割り算</td>
<td><code>/</code></td>
</tr>
<tr class="odd">
<td>整数除算</td>
<td><code>//</code></td>
</tr>
<tr class="even">
<td>剰余(余り)</td>
<td><code>%</code></td>
</tr>
<tr class="odd">
<td>累乗</td>
<td><code>**</code></td>
</tr>
<tr class="even">
<td>絶対値</td>
<td><code>abs()</code></td>
</tr>
<tr class="odd">
<td>整数変換</td>
<td><code>int()</code></td>
</tr>
<tr class="even">
<td>小数変換</td>
<td><code>float()</code></td>
</tr>
</tbody>
</table>
<p>実際の計算は以下のようになるはずです.</p>
<p>計算は普通の電卓と同じような感覚で使えます.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># 足し算</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># 引き算</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">10</span> <span class="op">-</span> <span class="dv">5</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># 掛け算</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">2</span> <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># 割り算</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">100</span> <span class="op">/</span> <span class="dv">5</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="fl">20.0</span></span></code></pre></div>
<p>計算には順序があり丸括弧 <code>()</code>で囲うことで計算する順番を変えることができます.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> (<span class="dv">50</span> <span class="op">-</span> <span class="dv">5</span> <span class="op">*</span> <span class="dv">6</span>) <span class="op">/</span> <span class="dv">4</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fl">5.0</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">50</span> <span class="op">-</span> <span class="dv">5</span> <span class="op">*</span> <span class="dv">6</span> <span class="op">/</span> <span class="dv">4</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fl">42.5</span></span></code></pre></div>
<p>マイナスの数は数値の前に<code>-</code>をつけます</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">-</span><span class="dv">5</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span></span></code></pre></div>
<p>割り算の商と余りは<code>//</code>や,<code>%</code>で計算できます.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># 整数除算(余りを表示しない)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">6</span> <span class="op">//</span> <span class="dv">4</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="fl">1.0</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># 剰余(余り)</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">17</span> <span class="op">%</span> <span class="dv">3</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">5</span> <span class="op">*</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span></span></code></pre></div>
<p>同じ数字をX回掛けたものを累乗といい,<code>**</code>といいます. <code>2 ** 3 = 2 * 2 * 2</code></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># 累乗</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">2</span> <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">2</span> <span class="op">**</span> <span class="dv">3</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span></span></code></pre></div>
<p><code>abs()</code> の中に数値を入れることで絶対値が計算できます</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">abs</span>(<span class="dv">4</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">abs</span>(<span class="op">-</span><span class="dv">4</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span></code></pre></div>
<p>:::</p>
<p><strong>演習</strong></p>
<p>以下の計算をREPLを使って自分でしてみましょう.
Pythonの計算になれることが目的ですので,どのように計算したかを説明できるようにしましょう.</p>
<ul>
<li><p>飴が40個あります.7人で同じ数ずつ分けると1人分は何個で何個あまりますか?</p></li>
<li><p>底辺5cm,高さ4cmの三角形の面積はいくつですか?</p></li>
<li><p>2の8乗はいくつですか?</p></li>
<li><p>累乗と掛け算の計算順序を丸括弧を使った計算で確かめてください.</p></li>
</ul>
<p>:::</p>
<h3 data-number="3.4" id="変数と代入"><span class="header-section-number">3.4</span> 変数と代入</h3>
<p>値に名前をつけることを<code>代入</code>といい,名前のついた値を<code>変数</code>といいます. <code>=</code> の左側に付けたい名前,右側に値を書きます.</p>
<p>プログラムでは,データはコンピュータの記憶領域(メモリ)に格納されています. メモリは,1バイト(8bit, 1bit は0/1の値)ごとにアドレスという連番がついています.</p>
<figure>
<img src="../images/memory-null.png" alt="memory null" />
<figcaption aria-hidden="true">memory null</figcaption>
</figure>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="dv">10</span></span></code></pre></div>
<p>変数を宣言するということは,このアドレスにデータを割り当てることを意味します.
<code>x = 10</code>という変数が4バイト利用するとしたら以下のようにアドレス 201 から204 に 10という数字(int)を割り当てるイメージです.</p>
<figure>
<img src="../images/memory-10.png" alt="memory 10" />
<figcaption aria-hidden="true">memory 10</figcaption>
</figure>
<p><code>x</code>のアドレスは<code>id(x)</code>で確認できます.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(x)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639120</span></span></code></pre></div>
<p><code>y = x</code> と変数に別の名前を宣言する場合は,同じ場所が参照されます.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> x</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(x)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639120</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(y)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639120</span></span></code></pre></div>
<figure>
<img src="../images/memory-10y.png" alt="memory 10" />
<figcaption aria-hidden="true">memory 10</figcaption>
</figure>
<p><code>x=15</code>と再度代入する(再代入)と,新しくメモリが確保されます.
その際に,<code>x</code>をコピーしていた<code>y</code>の値も変わることに注意しましょう.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(x)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639280</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(y)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639280</span></span></code></pre></div>
<figure>
<img src="../images/memory-15.png" alt="memory 15" />
<figcaption aria-hidden="true">memory 15</figcaption>
</figure>
<p>数値の場合には<code>y</code>に再代入しても,<code>x</code>の値は変わりません.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> x</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(x)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639120</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(y)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639120</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> y</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(x)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639120</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(y)</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="dv">4438639280</span></span></code></pre></div>
<p>この挙動は,後に出てくる配列では,異なるので注意が必要です.</p>
<div class="note">
<p>変数に名前をつける際には,以下の点に注意しましょう.</p>
<ul>
<li><p>小文字で始まる英数字を使う</p></li>
<li><p>複数の単語を使うときは<code>_</code>(アンダーバー)でつなげる</p></li>
<li><p>英語で名前をつける</p>
<ul>
<li><code>nagasa</code> ではなく <code>length</code></li>
<li><code>namae</code> ではなく <code>name</code></li>
</ul></li>
<li><p>長くなっても良いので他の人が見たときに意味がわかる名前をつける</p>
<ul>
<li>三角形の高さを表したいとして
<ul>
<li><code>x</code>や<code>h</code>などの一文字よりも</li>
<li><code>height</code>のほうが良い</li>
<li>他にも高さを表す変数が登場するなら
<code>triangle_height</code>のほうがより分かりやすい</li>
</ul></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co"># 長方形の面積を求める</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> width <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> height <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> area <span class="op">=</span> width <span class="op">*</span> height</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> area</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="dv">900</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co">#定義されていないものはエラーがでます</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> space</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a> File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="pp">NameError</span>: name <span class="st">'space'</span> <span class="kw">is</span> <span class="kw">not</span> defined</span></code></pre></div>
</div>
<div class="note">
<p><strong>演習</strong></p>
<ul>
<li>変数を利用して以下の猫型ロボットのBMIを計算してください
<ul>
<li>BMI = 体重(kg)÷身長(m)の2乗</li>
<li>猫型ロボットの身長 129.3cm</li>
<li>猫型ロボットの体重 129.3kg</li>
</ul></li>
</ul>
</div>
<h4 data-number="3.4.1" id="代入演算子"><span class="header-section-number">3.4.1</span> 代入演算子</h4>
<p>代入は<code>=</code>でつなげる以外にもいくつかのパターンがあります.
まずは,普通に変数に数値を代入してみます.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span></code></pre></div>
<p>このように具体的な値を<code>=</code>の右側に記入するのは直感的に分かりやすいのですが,pythonのプログラムを見ていると,左右に同じ変数名が登場する場合があります.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> x <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span></code></pre></div>
<p>これは,<strong>右側に登場する</strong><code>x</code>は過去の<code>x</code>を表しており,<strong>左側に登場する</strong><code>x</code>は,過去の<code>x</code>を利用して作られた新しい<code>x</code>であると解釈しましょう.</p>
<p>上の例では,<code>x=1</code>という過去の変数を使って, <code>x(=1) + 1</code>という新しい<code>x</code>を作っています.
これは<strong>自己代入</strong>と呼ばれ,数学や関数型言語における<strong>再帰</strong>とは異なり,手続き型言語独特の記法なので注意しましょう.</p>
<p>足し算<code>+</code>を使った自己代入は省略して, <code>x += 1</code>のように書けます. これは <code>x = x + 1</code>の省略形で<strong>複合代入演算子</strong>といいます.</p>
<p>同様に,引き算<code>-=</code>,掛け算 <code>*=</code>, 割り算 <code>/=</code>などの代入演算子も存在します.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">-=</span> <span class="dv">5</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">*=</span> <span class="dv">5</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">/=</span> <span class="dv">5</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span></span></code></pre></div>
<h3 data-number="3.5" id="文字列型"><span class="header-section-number">3.5</span> 文字列型</h3>
<p>ここまでは,数値のみを扱ってきましたが,Pythonには数値以外にもいくつものデータ型が存在します.
次に, 文字を表す<code>文字列型(str)</code>の利用法について見ていきましょう.</p>
<p>文字列型は,文字を<code>""</code>(ダブルクオーテーション),あるいは<code>''</code>(シングルクォーテーション)で囲みます.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;イヌ&quot;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">'イヌ'</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">'ネコ'</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">'ネコ'</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(<span class="st">'ネコ'</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="kw">class</span> <span class="st">'str'</span><span class="op">&gt;</span></span></code></pre></div>
<p>三連引用符<code>"""</code>で囲むことで複数行書くことができます.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;&quot;&quot; あ</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="st">... い</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="st">... う&quot;&quot;&quot;</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">'あ</span><span class="ch">\n</span><span class="co">い</span><span class="ch">\n</span><span class="co">う'</span></span></code></pre></div>
<p><code>\n</code>は改行を表しています.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">'あ</span><span class="ch">\n</span><span class="st">い</span><span class="ch">\n</span><span class="st">う'</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>あ</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>い</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>う</span></code></pre></div>
<h4 data-number="3.5.1" id="文字列の演算"><span class="header-section-number">3.5.1</span> 文字列の演算</h4>
<p>文字列は<code>+</code>で連結,<code>*</code>で反復させることができます.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> name <span class="op">=</span> <span class="st">'太郎'</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">'私は'</span> <span class="op">+</span> name  <span class="op">+</span> <span class="st">'です!'</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">'私は太郎です!'</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> name <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co">'太郎太郎太郎'</span></span></code></pre></div>
<p>変数を文字列の中で使いたいときには,上の例のように<code>+</code>で連結することもできますが,変数が文字列型ではないときには,<code>str()</code>を利用して文字列型に変換してから,結合する必要があります.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> cat_num <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(cat_num)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="kw">class</span> <span class="st">'int'</span><span class="op">&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co">#そのまま文字列と結合するとエラーが出る</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">'私はネコを'</span> <span class="op">+</span> cat_num <span class="op">+</span> <span class="st">'匹飼っています.'</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="pp">TypeError</span>: can only concatenate <span class="bu">str</span> (<span class="kw">not</span> <span class="st">&quot;int&quot;</span>) to <span class="bu">str</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="co">#str()を利用して文字列に変換する</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">'私はネコを'</span> <span class="op">+</span> <span class="bu">str</span>(cat_num) <span class="op">+</span> <span class="st">'匹飼っています.'</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="co">'私はネコを10匹飼っています.'</span></span></code></pre></div>
<p>また,変数の値を文字列の中で利用する場合には<code>str()</code>や<code>+</code>を利用して結合する以外にも<code>f'文字列'</code>という記法を利用することができます.文字列の前に<code>f</code>と書くと,文字列内の<code>{変数名}</code>の部分が変数の値に変更されます.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="ss">f'私はネコを</span><span class="sc">{</span>cat_num<span class="sc">}</span><span class="ss">匹飼っています.'</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">'私はネコを10匹飼っています.'</span></span></code></pre></div>
<p><code>{変数名}</code>の部分には式を入れることも可能です.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="ss">f'私はネコを</span><span class="sc">{</span>cat_num<span class="op">*</span><span class="dv">10</span><span class="sc">}</span><span class="ss">匹飼っています.'</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co">'私はネコを100匹飼っています.'</span></span></code></pre></div>
<p>文字列が代入された変数の後ろに<code>[]</code>をつけて,番号を<code>[]</code>の中に入れると,指定した番号番目の文字が取得できます. このような<code>[]</code>で指定する数字を<code>index</code>といいます.</p>
<p><code>Python</code>という文字に対して,indexは以下のように振られています.
<code>-</code>をつけて後ろから数えることもできます.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">文字列</th>
<th style="text-align: center;">P</th>
<th style="text-align: center;">y</th>
<th style="text-align: center;">t</th>
<th style="text-align: center;">h</th>
<th style="text-align: center;">o</th>
<th style="text-align: center;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">前から</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">5</td>
</tr>
<tr class="even">
<td style="text-align: center;">後ろから</td>
<td style="text-align: center;">-6</td>
<td style="text-align: center;">-5</td>
<td style="text-align: center;">-4</td>
<td style="text-align: center;">-3</td>
<td style="text-align: center;">-2</td>
<td style="text-align: center;">-1</td>
</tr>
</tbody>
</table>
<p>Pythonの文字列は,最初の文字を<code>0</code>番目と数えるので注意しましょう.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> word <span class="op">=</span> <span class="st">'Python'</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> word[<span class="dv">0</span>]</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">'P'</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> word[<span class="dv">5</span>]</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co">'n'</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> word[<span class="op">-</span><span class="dv">6</span>]</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co">'p'</span></span></code></pre></div>
<p>インデックスの<code>[]</code>の中で,<code>[Start:End]</code>のようにはじめと終わりのインデックスを指定することで,文字列の1文字ではなく,部分的な文字列を取得することもできます. これを<strong>スライス</strong>といいます.</p>
<p>終わりは,一つ手前までになるので注意しましょう.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> word[<span class="dv">0</span>:<span class="dv">2</span>]</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">'Py'</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> word[<span class="dv">2</span>:<span class="dv">5</span>]</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">'tho'</span></span></code></pre></div>
<p>はじめか終わりのインデックスを省略すると,<strong>以降全て</strong>という意味になります.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> word[:<span class="dv">4</span>] <span class="co">#0から4まで</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">'Pyth'</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> word[<span class="dv">2</span>:] <span class="co">#2から最後まで</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">'thon'</span></span></code></pre></div>
<div class="note">
<p><strong>演習</strong></p>
<ul>
<li>演習1</li>
</ul>
<p><code>'abcdefg'</code> から <code>'cde'</code>をスライスで抜き出してください.</p>
<ul>
<li>演習2</li>
</ul>
<p><code>x = 'abcdefg'</code>と定義して, xに操作を加えて<code>'abfg'</code>を作ってください.</p>
<ul>
<li>演習3</li>
</ul>
<p><code>x = 'abcdefg'</code>と定義して, xに操作を加えて<code>'bbbeee'</code>を作ってください.</p>
</div>
<h3 data-number="3.6" id="リスト"><span class="header-section-number">3.6</span> リスト</h3>
<p>複数の値をまとめるデータ型の一種に<strong>リスト型</strong>があります. コンマで区切って角括弧の中に複数の値を書くことで,ひとまとまりのデータを作れます.
リストの中身一つ一つを<strong>要素</strong>といいます.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> squares <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>]</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> squares</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>]</span></code></pre></div>
<p>リストは文字列と同じ様に,インデックスやスライスで要素を取得できます.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> squares[<span class="dv">0</span>]</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> squares[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> squares[<span class="op">-</span><span class="dv">3</span>:]</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>]</span></code></pre></div>
<h4 data-number="3.6.1" id="リストの演算"><span class="header-section-number">3.6.1</span> リストの演算</h4>
<p>リストも<code>+</code>で連結,<code>*</code>で反復させることができます.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>] <span class="op">+</span> [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> [<span class="dv">1</span>] <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> [<span class="dv">1</span>,<span class="dv">2</span>] <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>]</span></code></pre></div>
<p>リストはインデックスやスライスで指定した要素に値を再代入して変更することができます.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals <span class="op">=</span> [<span class="st">'cat'</span>,<span class="st">'dog'</span>,<span class="st">'bird'</span>]</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals[<span class="dv">1</span>] <span class="op">=</span> <span class="st">'mouse'</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>[<span class="st">'cat'</span>,<span class="st">'mouse'</span>,<span class="st">'bird'</span>]</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals[<span class="dv">1</span>:] <span class="op">=</span> [<span class="st">'fish'</span>,<span class="st">'pig'</span>]</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>[<span class="st">'cat'</span>,<span class="st">'fish'</span>,<span class="st">'pig'</span>]</span></code></pre></div>
<div class="warn">
<p>リストは,数値などとは<strong>変数に別の名前をつけたときの挙動が異なる</strong>ので注意が必要です.</p>
<p>数値や文字列は,別の名前をつけた変数に再代入した場合もとの変数は,変更されません.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> cat <span class="op">=</span> <span class="st">'cat'</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> cute_cat <span class="op">=</span> cat</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> cute_cat <span class="op">=</span> <span class="st">'cute_cat'</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> cat</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co">'cat'</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> cute_cat</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co">'cute_cat'</span></span></code></pre></div>
<p><code>cute_cat</code>を変更しても<code>cat</code>は変わりません. 代入の説明箇所で見たように,数値などの変数の場合は,<code>cute_cat</code>には<code>cat</code>の値が渡されており,値が同じ場合には同じアドレスを参照するが,値が変更された場合には,
新しいメモリが確保されます.</p>
<p>しかし,リストは別名の変数を変更すると元の変数の値も変更されます.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals <span class="op">=</span> [<span class="st">'cat'</span>,<span class="st">'fish'</span>,<span class="st">'pig'</span>]</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> species <span class="op">=</span> animals</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> species[<span class="dv">0</span>] <span class="op">=</span> <span class="st">'horse'</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>[<span class="st">'horse'</span>, <span class="st">'fish'</span>, <span class="st">'pig'</span>]</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> species</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>[<span class="st">'horse'</span>, <span class="st">'fish'</span>, <span class="st">'pig'</span>]</span></code></pre></div>
<p><code>animal</code>の別名<code>species</code>を変更すると<code>animal</code>も変更されています. これは,配列などは新しい名称の変数に,値ではなくアドレスを渡していることによります.どちらの変数もずっと同じアドレスを参照しつづけるため,片方が変化すると同じアドレスを参照しているもう片方の値も変わります.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(animals)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="dv">4441753024</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(species)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4441753024</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> species[<span class="dv">0</span>] <span class="op">=</span> <span class="st">'cat'</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(species)</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4441753024</span></span></code></pre></div>
<p>しかし,インデックスやスライスによる要素の変更ではなく,全体を再代入した場合には新しいアドレスが割り当てられます.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> species <span class="op">=</span> [<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>]</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(species)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="dv">4441834752</span></span></code></pre></div>
<p>同じ値を持つが異なる場所を参照するリストを作りたい場合には,<code>copy()</code>を利用します.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals <span class="op">=</span> [<span class="st">'cat'</span>,<span class="st">'fish'</span>,<span class="st">'pig'</span>]</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> species <span class="op">=</span> animals.copy()</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(animals)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4441764160</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">id</span>(species)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4441798208</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> species[<span class="dv">0</span>] <span class="op">=</span> <span class="st">'dog'</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>[<span class="st">'cat'</span>, <span class="st">'fish'</span>, <span class="st">'pig'</span>]</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> species</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>[<span class="st">'dog'</span>, <span class="st">'fish'</span>, <span class="st">'pig'</span>]</span></code></pre></div>
<p>このような挙動は今後出てくる<code>pandas</code>などの配列でも同様なので,注意が必要です.</p>
</div>
<p><code>append()</code>というメソッドを使って,リストの末尾に要素を追加することができます.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>[<span class="st">'cat'</span>,<span class="st">'fish'</span>,<span class="st">'pig'</span>]</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals.append(<span class="st">'dog'</span>)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>[<span class="st">'cat'</span>,<span class="st">'fish'</span>,<span class="st">'pig'</span>,<span class="st">'dog'</span>]</span></code></pre></div>
<p>リストの長さ(要素数)を知りたい場合には,<code>len()</code>関数を利用します.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> animals</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>[<span class="st">'cat'</span>,<span class="st">'fish'</span>,<span class="st">'pig'</span>,<span class="st">'dog'</span>]</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">len</span>(animals)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span></code></pre></div>
<div class="warn">
<p><code>メソッド</code>,<code>関数</code>という言葉が説明無しに突然でてきました.
これらの違いについて理解するには段階が必要なため,後に説明します.
ここでは,変数などの後ろに<code>変数.f()</code>の形で<code>.</code>を利用してつけるものを<code>メソッド</code>,単独で<code>f()</code>のように利用するものを<code>関数</code>ということだけ覚えておきましょう.
なお,いずれも<code>()</code>の中に値や変数を書いたり書かなかったりしますが,その意味についても後ほど扱います.</p>
</div>
<p>リストはリストも要素にすることができます. このようなリストを<strong>多重リスト</strong>と呼びます.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> x <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> y <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> z <span class="op">=</span> [x,y]</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> z</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]]</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> z[<span class="dv">1</span>]</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> z[<span class="dv">0</span>][<span class="dv">1</span>]</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span></code></pre></div>
<div class="note">
<p><strong>演習</strong></p>
<p><code>xs = [[1,2,3],[4,5,6],[7,8,9]]</code> というリストを作り,以下の操作を行ってください.</p>
<ul>
<li><p><code>xs</code>の長さを求める</p></li>
<li><p>スライスを使って以下を抽出する</p>
<ul>
<li><code>[[4,5,6],[7,8,9]]</code></li>
<li><code>[[1,2,3]]</code></li>
<li><code>[[7,8,9]]</code></li>
<li><code>[8,9]</code></li>
</ul></li>
<li><p><code>[4,5,6]</code>を<code>[-4,-5,-6]</code>に更新する</p></li>
<li><p><code>1</code> を <code>-1</code>に,<code>9</code>を<code>-9</code>にする</p></li>
<li><p><code>[7,8,-9]</code>のあとに,<code>[10,11,12]</code>を追加する</p></li>
</ul>
</div>
<h3 data-number="3.7" id="タプル"><span class="header-section-number">3.7</span> タプル</h3>
<p>Pythonにはリスト以外にも複数のデータ型の組み合わせを表すデータ型が存在します. タプルは,データの組を表すデータ型であり,<code>()</code>の中に<code>,</code>で区切ってデータを入れることでリストのようにデータを格納することができます.
タプルも複数のデータをまとめることができます.</p>
<p>しかし, リストのように扱うことは推奨されません.
(後に扱う関数などで返り値を複数返したいときなど)基本的に2,3個のデータの組を扱いたい場合に利用して,3個以上のデータを扱い場合にはリストなどを使うようにしましょう.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> name_and_age <span class="op">=</span> (<span class="st">'Taro'</span>,<span class="dv">10</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> name_and_age</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>(<span class="st">'Taro'</span>, <span class="dv">10</span>)</span></code></pre></div>
<p>タプルの値の取り出しには,同じ形のタプルに変数を格納することで値を取り出す<code>パターンマッチ</code>が良く利用されます.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> (name,age) <span class="op">=</span> name_and_age</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> name</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co">'Taro'</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> age</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span></code></pre></div>
<p>インデックスによる値の取得も可能です.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> name_and_age[<span class="dv">0</span>]</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="co">'Taro'</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> name_and_age[<span class="dv">1</span>]</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span></code></pre></div>
<p>ただし,インデックスを利用した要素の変更はできません.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> name_and_age[<span class="dv">0</span>] <span class="op">=</span> <span class="st">'Hanako'</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="pp">TypeError</span>: <span class="st">'tuple'</span> <span class="bu">object</span> does <span class="kw">not</span> support item assignment</span></code></pre></div>
<h3 data-number="3.8" id="辞書型"><span class="header-section-number">3.8</span> 辞書型</h3>
<p>名前とその意味, 商品と在庫数,日本語名と英語名など,特定のデータに対応する別のデータの組み合わせを沢山扱いたい場合には,<code>辞書型</code>(dict)が利用されます. 辞書型は<code>key</code>と<code>value</code>と呼ばれるデータの組み合わせからなります.</p>
<p>辞書型のデータは,<code>{key1:value1,key2:value2,...}</code>のように,<code>key</code>と<code>value</code>の組み合わせを<code>:</code>で表して,<code>{}</code>にコンマで区切るかたちで作成します.</p>
<p>例えば, 学生と学生の出席回数の組み合わせを表すデータは以下のように作成されます.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance <span class="op">=</span> {<span class="st">'Taro'</span>:<span class="dv">10</span>,<span class="st">'Hanako'</span>:<span class="dv">12</span>,<span class="st">'Kenta'</span>:<span class="dv">9</span>,<span class="st">'Shizuka'</span>:<span class="dv">10</span>}</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>{<span class="st">'Taro'</span>: <span class="dv">10</span>, <span class="st">'Hanako'</span>: <span class="dv">12</span>, <span class="st">'Kenta'</span>: <span class="dv">9</span>, <span class="st">'Shizuka'</span>: <span class="dv">10</span>}</span></code></pre></div>
<p><code>dict()</code>に<code>key</code>と<code>value</code>のタプルのリストを渡すことで生成する事もできます.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance <span class="op">=</span> <span class="bu">dict</span>([(<span class="st">'Taro'</span>,<span class="dv">10</span>),(<span class="st">'Hanako'</span>,<span class="dv">12</span>),(<span class="st">'Kenta'</span>,<span class="dv">9</span>)])</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>{<span class="st">'Taro'</span>: <span class="dv">10</span>, <span class="st">'Hanako'</span>: <span class="dv">12</span>, <span class="st">'Kenta'</span>: <span class="dv">9</span>}</span></code></pre></div>
<p>特定の<code>key</code>でそれに対応する<code>value</code>を呼び出すには,<code>key</code>をインデックスとして<code>[]</code>を利用します.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance[<span class="st">'Taro'</span>]</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance[<span class="st">'Shizuka'</span>]</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span></code></pre></div>
<p>新しい<code>key:value</code>を加える場合にも,<code>value</code>を変更する場合にも,インデックスによる代入が利用できます.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance[<span class="st">'Taro'</span>] <span class="op">=</span> <span class="dv">11</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance[<span class="st">'Taro'</span>]</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance[<span class="st">'Shinzi'</span>] <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance[<span class="st">'Shinzi'</span>]</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span></span></code></pre></div>
<p><code>key</code>を削除するには<code>pop(消したいkey)</code>メソッドを利用します.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance.pop(<span class="st">'Hanako'</span>)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>{<span class="st">'Taro'</span>: <span class="dv">11</span>, <span class="st">'Kenta'</span>: <span class="dv">9</span>, <span class="st">'Shizuka'</span>: <span class="dv">10</span>, <span class="st">'Shinzi'</span>: <span class="dv">12</span>}</span></code></pre></div>
<p>辞書型のデータから,<code>key</code>のみ,<code>value</code>のみを抜き出すには,<code>keys()</code>,<code>values()</code>メソッドを利用します.
リストとして取得したい場合には,<code>list()</code>関数で囲みます.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance.keys()</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>dict_keys([<span class="st">'Taro'</span>, <span class="st">'Kenta'</span>, <span class="st">'Shizuka'</span>, <span class="st">'Shinzi'</span>])</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> attendance.values()</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>dict_values([<span class="dv">11</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">12</span>])</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(attendance.values())</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">12</span>]</span></code></pre></div>
<p>これらの処理はリストを利用しても可能ですが,辞書型のほうが計算が速いため辞書型を利用するようにしましょう. プログラミングにおいては用途に応じて適切なデータ型を選択することが重要です.</p>
<div class="warn">
<p>同じような処理が可能なデータ型でも,その処理を実行するのにコンピュータが必要な計算の数や,使用するメモリの量,速度などに違いがあります.</p>
<p>この資料では扱いませんが,大規模なデータを扱う場合や,大量の計算を行うプログラムを書く際には,<code>計算量</code>を考慮して<code>アルゴリズムとデータ構造</code>を適切に設計する必要があります. 興味のある方は,調べてみましょう.</p>
</div>
<div class="note">
<p><strong>演習</strong></p>
<ul>
<li><p>5種類の果物の日本語名と英語名を変換する辞書を作成し,実際に機能する様子を紹介してください.</p></li>
<li><p>上で作成した辞書にもう一つ果物を追加してください.</p></li>
</ul>
</div>
<h3 data-number="3.9" id="論理演算"><span class="header-section-number">3.9</span> 論理演算</h3>
<p>それが正しいか間違っているか判別できる文を<strong>命題</strong>といいます. 命題の結果を表すものとして真(正しい),偽(間違っている)という値を用います. 真と偽を併せて<strong>真偽値</strong>といいます.</p>
<p>例えば,<code>1は2より大きい</code>という命題は,間違っているので<strong>偽</strong>となります. <code>人間は必ず死ぬ</code>という命題は,今のところ不老不死の人間がいないので<strong>真</strong>です.</p>
<p>プログラミングではこのような命題の判断がしばしば必要となるため,それらを扱うデータ型が提供されています.</p>
<p>真偽値を表すデータ型として<code>Bool</code>があります. <code>Bool</code>は<code>True</code>(真),<code>False</code>(偽)のいずれかです.</p>
<p>Pythonには命題の判定を行う演算子として,以下のようなものが準備されています.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">記号</th>
<th style="text-align: center;">意味</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>&gt;</code></td>
<td style="text-align: center;">より大きい</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>&gt;=</code></td>
<td style="text-align: center;">以上</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>&lt;</code></td>
<td style="text-align: center;">より小さい</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>&lt;=</code></td>
<td style="text-align: center;">以下</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>==</code></td>
<td style="text-align: center;">等しい</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>!=</code></td>
<td style="text-align: center;">等しくない</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>in</code></td>
<td style="text-align: center;">含む</td>
</tr>
</tbody>
</table>
<p>数値などの大小関係を調べるときには,比較演算子 <code>&gt;</code>,<code>&gt;=</code>.<code>&lt;</code>,<code>&lt;=</code>を利用します. 演算子の左右に数値を書くと,結果に応じて真偽値が帰ってきます.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">1</span> <span class="op">&lt;</span> <span class="fl">1.5</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span></code></pre></div>
<p>リストや文字列に特定の要素(文字列)が含まれているかは,<code>in</code>で判定できます.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">'ab'</span> <span class="kw">in</span> <span class="st">'abcd'</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">1</span> <span class="kw">in</span> [<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span></code></pre></div>
<p>値が等しいか/等しくないかを判定するには,<code>==</code>と<code>!=</code>を利用します.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">4</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">'cat'</span> <span class="op">!=</span> <span class="st">'cat'</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span></code></pre></div>
<p>これ以外にもPythonにはいくつかの演算が準備されていますし,自分で作ることも可能です.</p>
<p><code>True</code> や <code>False</code>などの<code>Bool</code>値は, <code>AND</code>(かつ),<code>OR</code>(または),<code>NOT</code>という演算で計算することができます(<code>XOR</code>というのもあるが省略).
PythonではAND は <code>&amp;</code>, OR は <code>|</code>, NOT は <code>not</code> という演算子が提供されています.</p>
<p>A,Bが命題だとして,<code>A &amp; B</code>は両方<code>True</code>のときに,<code>True</code>となります. <code>A | B</code>は片方どちらかが<code>True</code>のときに<code>True</code>となります.</p>
<p>例えば,</p>
<ul>
<li><p><code>1は2より大きい かつ 2は0より大きい</code> という命題は,<code>2は0より大きい</code>は正しいですが,<code>1は2より大きい</code>が間違っているので全体として,<code>False</code>です.</p></li>
<li><p><code>ネコは哺乳類である または ネコは鳥類である</code>という命題は <code>ネコは鳥類である</code>が間違っていますが全体としては<code>True</code>です.</p></li>
</ul>
<p>演算の結果は,それぞれ以下のようになります. これを真偽値表といいます. ここでは,最低限の例だけを紹介しますが,より深く理解したい人は論理学などの講義を受講しましょう.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">命題Aの値</th>
<th style="text-align: center;">Bの値</th>
<th style="text-align: center;"><code>A &amp; B</code></th>
<th style="text-align: center;"><code>A | B</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">True</td>
<td style="text-align: center;">True</td>
<td style="text-align: center;">True</td>
<td style="text-align: center;">True</td>
</tr>
<tr class="even">
<td style="text-align: center;">False</td>
<td style="text-align: center;">True</td>
<td style="text-align: center;">False</td>
<td style="text-align: center;">True</td>
</tr>
<tr class="odd">
<td style="text-align: center;">True</td>
<td style="text-align: center;">False</td>
<td style="text-align: center;">False</td>
<td style="text-align: center;">True</td>
</tr>
<tr class="even">
<td style="text-align: center;">False</td>
<td style="text-align: center;">False</td>
<td style="text-align: center;">False</td>
<td style="text-align: center;">False</td>
</tr>
</tbody>
</table>
<p>Pythonではそれぞれの命題を丸括弧で囲んで,<code>&amp;</code>,<code>|</code>演算子で論理演算を行うことができます.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span>)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> (<span class="dv">2</span> <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span>) <span class="op">&amp;</span> (<span class="dv">2</span> <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span>) <span class="op">|</span> (<span class="dv">2</span> <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span></code></pre></div>
<p><code>not</code> は命題の否定を表しており <code>True</code>が<code>False</code>,<code>False</code>が<code>True</code>になります.<code>not</code>は命題の前に書きます.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">not</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span>)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span></code></pre></div>
<div class="note">
<p><strong>演習</strong></p>
<p>ある値が偶数かどうかは,2で割った余りが0かどうかを判定することで判定できます.
<code>x=101</code>,<code>y=202</code>として, 以下の命題の真偽をPythonで計算してください.</p>
<ul>
<li>xが偶数</li>
<li>yが偶数</li>
<li>xが偶数かつyが偶数</li>
<li>xが偶数またはyが偶数</li>
<li>x + y が奇数</li>
</ul>
</div>
<h3 data-number="3.10" id="復習スクリプトの実行"><span class="header-section-number">3.10</span> (復習)スクリプトの実行</h3>
<p>これまでは,対話環境でプログラムを実行してきましたが,対話環境は複雑な処理には適しません.
これから,1行1行プログラムを記述して対話環境で実行するのではなく,複数行のプログラムをまとめて記述して一気に実行する方式に切り替えます. 複数行のプログラムを一つのファイルにまとめたものをスクリプトファイルと呼び, 書かれているプログラムをスクリプトといいます. 初回に行った<code>Hello World</code>はスクリプトを実行していました.</p>
<div class="note">
<p><strong>Pythonのスクリプト実行の方法</strong></p>
<ul>
<li><p>テキストファイルにプログラムを書く</p></li>
<li><p>ファイルの拡張子を<code>.py</code>にして保存する</p>
<ul>
<li>講義で作成したプログラムは,あとで自分が参考にできる最高の資料です.
<ul>
<li><p>あとで何をやっているのか自分が理解できるように
プログラムにはできるだけ沢山のコメントを付けましょう</p></li>
<li><p>ファイル名は,後からみて,中身が何であるかわかるよう<code>英数字</code>で名付けましょう</p>
<ul>
<li><code>a.py</code>や<code>file.py</code>,<code>課題.py</code>などはやめましょう</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Shell上でそのファイルが保存されている場所に移動する</p></li>
<li><p><code>python ファイル名</code> コマンドで実行する</p>
<ul>
<li>※ <code>python</code> は空白の後に続くプログラムを実行するためのコマンドです.</li>
<li>※ Macの人は <code>python3</code> を利用します.</li>
</ul></li>
</ul>
</div>
<div class="note">
<p><strong>演習</strong></p>
<p>第1回で行ったことを参考に,<code>Let's start the Python programming!!</code> と表示されるプログラムを作成しましょう. ファイル名などは適切に名付けてください.
まだ,今後沢山のスクリプトを書いていきますので,適切にフォルダなどを整理しましょう.</p>
</div>
<h3 data-number="3.11" id="エラーへの対応法とよくある間違い"><span class="header-section-number">3.11</span> エラーへの対応法とよくある間違い</h3>
<p>これまで皆さんは1行のプログラムを記述して, REPL上で実行してきました. これから何行かに渡るプログラムを記述すると, うまくできない人が出てきます. ここでは,学生のつまずきやすいポイントとその対策について,事前に学習しておきましょう.</p>
<h4 data-number="3.11.1" id="エラーへの対応方法"><span class="header-section-number">3.11.1</span> エラーへの対応方法</h4>
<p>間違った手順,プログラムの記述方法でプログラムを実行すると,エラー文がTerminalに表示されます. どれだけプログラミングが得意な人でも, 完璧な作業はできません. 必ずエラーが発生します. そのような意味でも,プログラミングをするというのは,プログラムを書いて発生したエラーに対応するということでもあります.</p>
<p>エラーへの対応は, プログラミングにある程度習熟した人でも,Webなどで調べて解決する場合が多いです.PCやプログラミングができるということは,すべての場合をすべて記憶して対応できるということではなく,<strong>問題が起きたら自分で解決できる</strong>ということを意味しています.</p>
<p>したがって, まず必要なのは問題が起きたら解決策を<strong>自分で調べること</strong>です.</p>
<p>解決方法を調べるためには,検索するためのワードとして,<strong>機能や名称を知っていること</strong>が重要です.
例として, Excelのフィルター機能の存在を知っていれば, <strong>Excel フィルター 使い方</strong>などで検索することができます.しかし,Excelも,フィルターも知らなければ,調べることすらできません.</p>
<p>すべての概念や機能を最初から完全に理解する必要はありませんが,概念の存在や名称を覚えるようにしましょう. そのためにも自分の<strong>メモやチートシートを作成,整理しておくこと</strong>が重要です.</p>
<p>プログラミングの学習において, 何かが間違っている場合には, Terminalにエラー文が表示されます. Pythonはエラー文が親切なので,エラー文を読めば大抵のことは解決できるようになっています.</p>
<p>しかし,エラーが起きても<strong>エラー文を一切読まない人</strong>が一定の割合で存在します. そのような人に理由を尋ねると最も多い理由は<strong>英語で書かれていること</strong>,2番目に<strong>どこを見ればいいのか分からないこと</strong>を挙げます.</p>
<p>それほど難しい英語は使われていませんが,まず英語で書かれていても読んでみましょう. 英語が理解できなければ,機械翻訳にかけましょう.</p>
<p>pythonのエラー文は,基本的にエラー文の<strong>一番最初にスクリプトのエラーが発生している場所</strong>が書かれています.また,<strong>一番最後にどのようなエラーが起きているのか</strong>が書かれています. 複雑なプログラムになると,エラー全体を理解する必要が出てきますが,この講義で扱う程度の事例に関してはその2個所のみを読めばほとんどが解決します. ただし,検索結果は珠玉混合です, 正しい情報の取捨選択に関しては,情報入門の教科書などで復習しておきましょう.</p>
<figure>
<img src="../images/python-error-sample1.png" alt="エラー文の読み方" />
<figcaption aria-hidden="true">エラー文の読み方</figcaption>
</figure>
<p><img src="../images/translate-error.png" /></p>
<p>エラー文を読んでも意味が理解できない,あるいは対処方法が分からない場合には,エラー文の最後をそのまま検索しましょう. なお,Googleでは,<code>""</code>で囲うことで文章ごと検索(センテンス検索)できます. Pythonは日本語ユーザーも非常に多いため,<code>エラー文 Python</code>で検索すれば,大抵の問題は日本語で解決方法を読むことができます.</p>
<p>解決しない場合には,AND検索で情報を付加して,結果を絞りましょう. 検索条件に加えるべき情報の候補としては以下のようなものがあります.</p>
<div class="note">
<ul>
<li><p>OS (Windows, Mac)</p></li>
<li><p>Pythonのversion</p></li>
<li><p>利用しているライブラリ</p></li>
<li><p>やろうとしている作業</p></li>
</ul>
</div>
<p>例えば,これから行う<code>pandas</code>を利用した<code>ファイルの読み込み</code>において<code>No such file or directory</code>というエラーが出た場合には <code>pandas ファイル読み込み "No such file or directory" Windows</code>などで検索してみましょう.</p>
<p><strong>エラー文を読んで</strong>,<strong>Webで検索しても</strong>問題が解決しない場合には, 教員に聞いて下さい. 専門的な内容になるほど,日本語のページは少なくなります.また,新しい情報に関しては,日本語に翻訳されておらず公式のドキュメントなどを読む必要があります. それでも解決しない場合には, Pythonのコミュニティなどで質問をする必要があります. 最終的にはこれらを自分でできるようになる必要がありますが,最初は難しいと思います. 講義の教員は,それらを代替するためにいますので,教員に聞きましょう.</p>
<p>しかし,繰り返しになりますが,PCが使える,プログラミングができる,ということは自分で問題の解決策を調べて解決できるということです.したがって,まずは自分で調べて解決する癖をつけるようにしましょう.</p>
<h4 data-number="3.11.2" id="エラーを体験してみよう"><span class="header-section-number">3.11.2</span> エラーを体験してみよう</h4>
<p>皆さんのプログラムが上手く動かない理由の圧倒的No1が<strong>スペルミス,タイプミス</strong>です. プログラミングの作業は,プログラムもコマンドも英語で記述します. プログラムは,1文字でも間違っていると上手く動かないので,しっかりとタイピングしましょう. 特にこれから行う作業で非常に多いスペルミスは以下のようなものです.</p>
<div class="note">
<ul>
<li>学生のスペルミス例
<ul>
<li>Data → Date (なぜか3割くらいの学生が間違えます.)</li>
<li>industry → indusutry, industly, indstry</li>
<li>python → pyton, pyhon</li>
<li>answer → anser, answere, ansewer</li>
<li>salary → sarary, saraly, sarasly</li>
<li>python –version → python version, python –vertion</li>
</ul></li>
</ul>
</div>
<p>スペルミスに対応するには注意するしかありません. 単純に英語の単語を覚えていない or タイピングミスが原因なので注意しましょう.英単語の意味がや綴がわからない場合には検索しましょう.
基本的にプログラミングにおいて無意味な英単語は利用していないので,意味を考えましょう(意味がない単語の例としてhoge,hugaなどは良く使いますが).特に<code>Date (日付)</code>, <code>Data(データ)</code>などは頻出ですが, 単語の意味を考えればミスしづらいかと思います. また,エラー文を読めばどこが間違っているか教えてくれています.
エラー文にでてきた文字列’industry’や’Data’に該当する部分が間違っていないかチェックしましょう.</p>
<p>事例として,以下のプログラムの実行結果と,エラーについて見てみましょう. なお,プログラムの内容や詳細に関しては,このあとやるので理解できなくても問題ありません.</p>
<p>プログラムを実行するにあたって作業ディレクトリに以下のプログラム<code>error_sample.py</code>とプログラム内で読み込むデータ<code>data/error_sample.csv</code>が存在することを前提とします. ここでは,あくまで事例として紹介するので皆さんはデータとプログラムを用意する必要はありません.</p>
<div class="warn">
<p>やる必要はありませんが,同じ作業を試してみたい場合は,作業ディレクトリで以下のコマンドをコピーして実行しましょう</p>
<ul>
<li>Windowsの人</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pandas</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;name,salary\ntaro,100&quot;</span> <span class="op">&gt;</span> data/error_sample.csv</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;import pandas as pd\ndf = pd.read_csv('data/error_sample.csv') \nprint(df['salary'])&quot;</span> <span class="op">&gt;</span> error_sample.py</span></code></pre></div>
<ul>
<li>Macの人</li>
</ul>
<div class="sourceCode" id="cb80"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip3</span> install pandas</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;name,salary\ntaro,100&quot;</span> <span class="op">&gt;</span> data/error_sample.csv</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;import pandas as pd\ndf = pd.read_csv('data/error_sample.csv') \nprint(df['salary'])&quot;</span> <span class="op">&gt;</span> error_sample.py</span></code></pre></div>
<p>ファイルの構成が以下のようになっていれば問題ありません.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="ex">❯</span> ls</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="ex">error_sample.py</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="ex">❯</span> ls data</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="ex">salary_data.csv</span></span></code></pre></div>
<p>それぞれ,以下のようなファイルができているはずです(コメントは入っていません).</p>
<ul>
<li>error_sample.py</li>
</ul>
<div class="sourceCode" id="cb82"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dataフォルダにある,error_sample.csvファイルを読み込み</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'data/error_sample.csv'</span>)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co">#読み込んだファイルのsalary列を表示</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'salary'</span>])</span></code></pre></div>
<ul>
<li>error_sample.csv</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>name,salary</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>taro,<span class="dv">100</span></span></code></pre></div>
</div>
<p>このプログラムを実行してみると,<code>error_sample.csv</code>の<code>salary</code>列の値が表示されます.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="ex">❯</span> python error_sample.py</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    100</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Name:</span> salary, dtype: int64</span></code></pre></div>
<p>プログラムを以下のように修正して実行してみます.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="co"># error_sample.csvをarara_sample.csv に変更</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'data/arara_sample.csv'</span>)</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'salary'</span>])</span></code></pre></div>
<p>以下のようなエラーが表示されます.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="ex">❯</span> python3 error_sample.py</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Traceback</span> <span class="er">(</span><span class="ex">most</span> recent call last<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Users/akagi/Documents/Programs/Python/slds/error_sample.py&quot;</span>, line 2, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">df</span> = pd.read_csv<span class="er">(</span><span class="st">'data/arara_sample.csv'</span><span class="kw">)</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pandas/io/parsers/readers.py&quot;</span>, line 912, in read_csv</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ex">_read</span><span class="er">(</span><span class="ex">filepath_or_buffer,</span> kwds<span class="kw">)</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pandas/io/parsers/readers.py&quot;</span>, line 577, in _read</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">parser</span> = TextFileReader<span class="er">(</span><span class="ex">filepath_or_buffer,</span> <span class="pp">**</span>kwds<span class="kw">)</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pandas/io/parsers/readers.py&quot;</span>, line 1407, in __init__</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>    <span class="ex">self._engine</span> = self._make_engine<span class="er">(</span><span class="ex">f,</span> self.engine<span class="kw">)</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pandas/io/parsers/readers.py&quot;</span>, line 1661, in _make_engine</span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>    <span class="ex">self.handles</span> = get_handle<span class="er">(</span></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pandas/io/common.py&quot;</span>, line 859, in get_handle</span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>    <span class="ex">handle</span> = open<span class="er">(</span></span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a><span class="ex">FileNotFoundError:</span> [Errno 2] No such file or directory: <span class="st">'data/arara_sample.csv'</span></span></code></pre></div>
<p>先ほど解説したように最初の部分と,最後の部分だけを見てみましょう.
最初の部分ではエラーの発生場所を説明しています. このエラーは
<code>line 2, in &lt;module&gt;</code>の<code>df = pd.read_csv('data/arara_sample.csv')</code>
部分で発生しています.先ほど変更を加えた2行目のファイル名の部分ですね.</p>
<p>最後の部分では,発生したエラーの中身について説明しています. エラーの詳細は</p>
<p><code>FileNotFoundError: [Errno 2] No such file or directory: 'data/arara_sample.csv'</code></p>
<p>であり,<code>data</code>フォルダに<code>arara_sample.csv</code>というファイルがないという意味です.</p>
<p>プログラムの<code>arara_sample.csv</code>の部分を修正して,今度は,最後の行をエラーが出るように変更しています.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dataフォルダにある,error_sample.csvファイルを読み込み</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'data/error_sample.csv'</span>)</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="co">#salaryをsararyに変更</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'sarary'</span>])</span></code></pre></div>
<p>実行すると以下のようなエラーが発生します.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="ex">❯</span> python3 error_sample.py</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Traceback</span> <span class="er">(</span><span class="ex">most</span> recent call last<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pandas/core/indexes/base.py&quot;</span>, line 3652, in get_loc</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ex">self._engine.get_loc</span><span class="er">(</span><span class="ex">casted_key</span><span class="kw">)</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;pandas/_libs/index.pyx&quot;</span>, line 147, in pandas._libs.index.IndexEngine.get_loc</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;pandas/_libs/index.pyx&quot;</span>, line 176, in pandas._libs.index.IndexEngine.get_loc</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;pandas/_libs/hashtable_class_helper.pxi&quot;</span>, line 7080, in pandas._libs.hashtable.PyObjectHashTable.get_item</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;pandas/_libs/hashtable_class_helper.pxi&quot;</span>, line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="ex">KeyError:</span> <span class="st">'sarary'</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> above exception was the direct cause of the following exception:</span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a><span class="ex">Traceback</span> <span class="er">(</span><span class="ex">most</span> recent call last<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Users/akagi/Documents/Programs/Python/slds/error_sample.py&quot;</span>, line 3, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>    <span class="ex">print</span><span class="er">(</span><span class="va">df</span><span class="op">[</span><span class="st">'sarary'</span><span class="op">]</span><span class="kw">)</span></span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pandas/core/frame.py&quot;</span>, line 3761, in __getitem__</span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>    <span class="ex">indexer</span> = self.columns.get_loc<span class="er">(</span><span class="ex">key</span><span class="kw">)</span></span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">&quot;/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pandas/core/indexes/base.py&quot;</span>, line 3654, in get_loc</span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>    <span class="ex">raise</span> KeyError<span class="er">(</span><span class="ex">key</span><span class="kw">)</span> <span class="ex">from</span> err</span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a><span class="ex">KeyError:</span> <span class="st">'sarary'</span></span></code></pre></div>
<p>今度のエラー文を見てみると,先ほど変更を加えた</p>
<p><code>File "/Users/akagi/Documents/Programs/Python/slds/error_sample.py", line 3, in &lt;module&gt;</code></p>
<p>の <code>print(df['sarary'])</code>でエラーが発生しており,エラーの内容は,<code>sarary</code>という<code>Key</code>が存在しないという意味の<code>KeyError: 'sarary'</code>です. pandasのDataFrameにおけるKeyについてはまだ扱っていませんが,辞書型で発生するエラーと同様なので,辞書型を参考にして大まかな意味を掴みましょう.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> xs <span class="op">=</span> {<span class="st">&quot;name&quot;</span>:<span class="st">&quot;taro&quot;</span>,<span class="st">&quot;salary&quot;</span>:<span class="dv">100</span>}</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> xs[<span class="st">'salary'</span>]</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="dv">100</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> xs[<span class="st">'sarary'</span>]</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="pp">KeyError</span>: <span class="st">'sarary'</span></span></code></pre></div>
<p>上のコードでは,<code>sarary</code>という<code>xs</code>に存在しない<code>key</code>を呼び出したことで<code>KeyError</code>が発生しています.</p>
<div class="note">
<ul>
<li>演習</li>
</ul>
<p>以下のプログラムをコピーして保存・実行し,エラーを確認しましょう.
どのようなエラーが含まれているのか,エラー文を読んで修正し,説明してください.</p>
<ul>
<li>error_sample2.py</li>
</ul>
<div class="sourceCode" id="cb90"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Morningの&quot;Good&quot;部分を抽出したい.</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="co">#わざとエラーを含むプログラム</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>greetings <span class="op">=</span> {<span class="st">&quot;Morning&quot;</span>:<span class="st">&quot;Good Morning&quot;</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Noon&quot;</span>:<span class="st">&quot;Hello&quot;</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>            ,<span class="st">&quot;Night&quot;</span>:<span class="st">&quot;Good Night&quot;</span>}</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(greeting[<span class="st">&quot;Morming&quot;</span>][<span class="st">&quot;0&quot;</span>:<span class="st">&quot;4&quot;</span>]</span></code></pre></div>
</div>
</details>
<h2 data-number="4" id="ライブラリの利用"><span class="header-section-number">4</span> ライブラリの利用</h2>
<details>
<summary>
開く/閉じる
</summary>
<p>通常のPythonの学習では,基礎的な演算のあとにFor文やIF分を学びます.
しかし,この講義では通常のリストなどよりもむしろPandasとよばれるライブラリの機能を多用します.なので, 先にライブラリの利用法と,Pandasの利用法を学び,それらを事例としてFor文やIF文,関数などの基本的な構文を学習します.</p>
<h3 data-number="4.1" id="ライブラリとは"><span class="header-section-number">4.1</span> ライブラリとは</h3>
<p>第1回の講義で説明しましたが,プログラムをまとめて他の人がプログラム内で利用できるようにしたものをライブラリといいます. Pythonは,統計,データサイエンス関連のライブラリが充実しているために,利用者が多いということでしたね.</p>
<p>Pythonは様々なライブラリを呼び出して利用するための言語として利用されている側面が大きいです.なので, 目的に応じた様々なライブラリの使用法を知って初めてPythonの力を活用できます.</p>
<p>ライブラリのより細かい概念として, <strong>モジュール(Module)</strong>と<strong>Package(Package)</strong>があります.</p>
<div class="note">
<ul>
<li><code>Module</code>
<ul>
<li>他のプログラムに読み込む(<code>import</code>)することができるスクリプトファイル</li>
</ul></li>
<li><code>Package</code>
<ul>
<li>Moduleの名前空間をドットで構造化する手段</li>
</ul></li>
<li><code>Library</code>
<ul>
<li>用途に応じてPackageをまとめたもの</li>
</ul></li>
</ul>
</div>
<p><code>import</code>や名前空間の意味は,実際に使っていきながら見ていきましょう.</p>
<h3 data-number="4.2" id="ライブラリを使ってみよう"><span class="header-section-number">4.2</span> ライブラリを使ってみよう</h3>
<p>データサイエンスは,名前の通りデータを扱いデータから何かしらの示唆を得るための学問です.
データサイエンスにおける分析は概ね以下のように推移します.</p>
<figure>
<img src="../images/data-science-flow.png" alt="データ分析の流れ" />
<figcaption aria-hidden="true">データ分析の流れ</figcaption>
</figure>
<p>それぞれの段階の処理は,基本的には特定のライブラリを利用して行います. したがって,Pythonによるデータ分析の学習では,基本的にそれぞれの段階でのライブラリの利用法を学ぶことが中心になります.それぞれのライブラリの利用法はこれから順次扱いますが,ここでは,第1段階として,データの読み込みに関するライブラリ<code>pandas</code>を事例に一般的なライブラリの使用法を体験します.</p>
<p>何かしらのデータを分析するにはプログラムにデータを読み込む必要があります. Pythonにおいてデータの読み書き,整形,編集,生成などを支援する代表的なライブラリに <code>pandas</code>があります.</p>
<p>ライブラリを利用するためには,まずライブラリを皆さんのコンピュータにインストールする必要があります.
Pythonでライブラリをインストールするには<code>pip</code>を利用します. <code>pip</code>は,Pythonのインストール時に資料の指示に従ってチェックをつけていれば,既にインストールされているはずです.Shellに<code>pip --version</code>と入力してバージョンが表示されていれば,インストールされているので確認してみましょう(Macの人は<code>pip3 --version</code>).</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> pip <span class="ex">--version</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> 24.0 from /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pip <span class="er">(</span><span class="ex">python</span> 3.10<span class="kw">)</span></span></code></pre></div>
<p><code>pip install</code>のあとに,インストールしたいライブラリ名を入力すると,ライブラリがインストールされます. 今回は <code>pandas</code>をインストールするので<code>pip install pandas</code>と入力しましょう. 文字が沢山表示されますが, 問題ありません. 画面が止まるまで待ちましょう.</p>
<p>pandasはデータを扱うためのライブラリなので利用するには,何かしらのデータが必要です. 本格的な利用はこのあとでしますが,取り敢えず利用確認用の簡単なデータを作成しましょう.</p>
<p>データはテーブルデータの形式を取ることが多く,pandasで読み込みや書き込みができるテーブルデータとして代表的な形式に<code>CSV(Comma  Separated Values)</code>があります.</p>
<div class="warn">
<p>最近はテーブルデータの高速な処理が可能な<a href="https://pola.rs"><code>Polars</code></a>なども流行っていますが,本資料ではPandasに限定します.</p>
<p>また,<code>JSON</code>や<code>XML</code>などの他のデータ形式に関しては扱いません.</p>
</div>
<p>CSVは,テキストファイルの一種で,その名の通りコンマ(<code>,</code>)で列を区切り,改行で行を区切ることでテーブルを表現します. 標準的なCSVでは最初の1行は,データではなく,各列の中身を表すタイトルとなっており<code>Header</code>と呼びます.2行目以下のデータ部分を<code>Body</code>と呼びます.</p>
<p>Excelを開いて1行目に<code>Weight</code>,<code>Height</code>,<code>BMI</code>と記入し,それぞれの列に以下のように数値を記入しましょう.<code>BMI</code>列は空欄で構いません.</p>
<figure>
<img src="../images/pandas-csv-sample.png" alt="csv sample" />
<figcaption aria-hidden="true">csv sample</figcaption>
</figure>
<p>このファイルを<code>UTF-8</code>の<code>CSV</code>として保存します. ファイル名は<code>body_data.csv</code>としましょう. Excelでは<code>ファイルの種類</code>で<code>CSV UTF-8 (コンマ区切り)(*.csv)</code>と選択することで保存できます.</p>
<figure>
<img src="../images/excel-file-type.png" alt="excel file type" />
<figcaption aria-hidden="true">excel file type</figcaption>
</figure>
<p>このファイルを作業ディレクトリの中に作った<code>data</code>という名前のフォルダに保存します.</p>
<p>試しに,<code>body_data.csv</code>をテキストエディタで開くと,中身がコンマと改行で表現されていることが分かります.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>Height,Weight,BMI</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="dv">170</span>,<span class="dv">55</span>,</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="dv">180</span>,<span class="dv">72</span>,</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="dv">155</span>,<span class="dv">42</span>,</span></code></pre></div>
<p>Sublime Textでは <code>File</code>タブの<code>Save with Encoding</code>内の<code>UTF-8 with BOM</code>で保存し,拡張子を<code>.csv</code>にすることで保存できます.</p>
<p><img src="../images/Sublime-utf-8-bom.png" /></p>
<div class="warn">
<p><strong><code>BOM(Byte Order Mark)</code>について</strong></p>
<p>Unicode(UTF-8, UTF-16など)で文章が記載されていることを示す符号をBOMといい,ファイルの最初に記載されます.
これがついていることで,ソフトウェアでデータを読み込む際に自動的に,適切なエンコーディングが選択されます.
Excelの場合は<code>CSV UTF-8 (コンマ区切り)(*.csv)</code>でBOM付きのUTF-8として保存されますが,日本語環境ではBOMがついていないCSVファイルを<code>Shift-JIS</code>で開くため,外部ファイルの読み込みから適切なエンコーディングを選ばないと文字化けします.</p>
<p>この知識は後ほどpandasを利用したCSVの保存で再度扱います.</p>
</div>
<p>このファイルを読み込んで,pandasの機能をいくつか確認するためのスクリプトを書きます.
テキストエディタで<code>pandas_test.py</code>という空のファイルを作成し,以下のように記述しましょう.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'data/body_data.csv'</span>)</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'Weight'</span>].mean())</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'Weight'</span>].median())</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'BMI'</span>] <span class="op">=</span> df[<span class="st">'Weight'</span>] <span class="op">/</span> (df[<span class="st">'Height'</span>]<span class="op">/</span><span class="dv">100</span>) <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div>
<p>このプログラムを実行すると,以下のように表示されるはずです.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="ex">❯</span> python3 pandas_test.py</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Height</span>  Weight  BMI</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>     170      55  NaN</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>     180      72  NaN</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>     155      42  NaN</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="ex">56.333333333333336</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="ex">170.0</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>   <span class="ex">Height</span>  Weight        BMI</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>     170      55  19.031142</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>     180      72  22.222222</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>     155      42  17.481790</span></code></pre></div>
<p>このプログラムで何をしているのかを簡単に見ていきましょう.</p>
<p>まず一行目の<code>import pandas as pd</code>ですが,<code>import pandas</code>によってこのプログラム内で<code>pandas</code>を利用可能にしています. しかし,<code>pandas</code>と毎回かくのは面倒なので,省略形の<code>pd</code>という名前を定義しています. Pythonでは<code>import [利用したいライブラリ名] as [省略形]</code>
の形で,ライブラリのインポートと省略形の定義を同時に行えます. pandasは<code>df</code>と省略するのが一般的です.</p>
<p>続いて2行目の <code>df = pd.read_csv('data/body_data.csv')</code>で,先ほど作成した <code>data</code>フォルダにある<code>body_data.csv</code>というファイルを読み込んでいます. <code>df =</code>で読み込んだデータに<code>df</code>という名前をつけています.</p>
<p>3行目の<code>print(df)</code>で,読み込んでdfという名前をつかたデータを表示しています. REPLでは,変数を書くだけで表示されていましたが,スクリプトでは標準出力したいものは<code>print()</code>関数を適用する必要があります.</p>
<p>4,5行目は<code>Weight</code>列の平均(<code>mean</code>)と中央値(<code>median</code>)を求めて表示しています.</p>
<p>6,7行目はもともとのデータで空だった,<code>BMI</code>列を計算し,計算結果を表示しています.</p>
<p>これらの操作の具体的な使い方や意味はこのあと細かく扱いますが,取り敢えず,pandasではこのようにして,データを読み込み,処理することができます.</p>
<h3 data-number="4.3" id="なぜexcelではだめなのか"><span class="header-section-number">4.3</span> なぜExcelではだめなのか</h3>
<p>先ほど行った簡単な表計算であれば,Excelでも簡単に同じことができます. では,なぜややこしいPythonなどを学んでプログラムで同じことをするのでしょうか.</p>
<p>まず,第1にPythonを利用することで</p>
<p><strong>機械学習や高度な検定など,Excelではできない高度な処理が可能</strong>になります.</p>
<p>先ほど行った簡単な集計であればExcelでも可能ですが,後ほど行う機械学習や自然言語処理などの高度な処理はExcelでは実行が困難です. また, データに関してもExcelでは最大で1,048,576行程度のデータしか扱うことができませんが,(この講義では扱いませんが)データサイエンスでは,それを超えた大容量のデータを扱うことがしばしばあります.</p>
<p>第2の理由として,</p>
<p><strong>Excelが複数の連続した複雑な処理には向いていない</strong>ということが挙げられます.</p>
<p>Excelでは,何か作業をしても<strong>過程が記録されず,結果だけが残ります.</strong> また,折角複雑な処理を実行しても,異なるデータなどで同じ処理を行う場合にはゼロから繰り返す必要があり,<strong>処理自体を再利用できません</strong>(VBAやマクロなどはありますが,それらは結局プログラミングをしているので同じです.)</p>
<p>Excelのこのような特性から,Excelによる複雑な処理の実行は,人間の作業に依存する傾向が強く,ミスの原因となります.</p>
<p>このことについて,以下のデータを事例にもう少し具体的に意味を見ていきましょう.</p>
<p><img src="../images/excel-procedure1.png" /></p>
<p>例としてこのデータに対して以下の3つの処理をすることを考えます.</p>
<div class="note">
<pre><code>1. いらない部分を削除する
2. 右側に行和を表す列を足す
3. とある列の値が一定以下のデータを抜き出す</code></pre>
</div>
<p><img src="../images/excel-procedure2.png" /></p>
<p>この場合,EXCELでは最後の抜き出したデータだけが残り,中間の段階の処理も,過程も記録されません.
したがって,</p>
<div class="note">
<ol type="1">
<li>途中で間違っていても気づけない,チェックできない</li>
<li>何をしたのかを他の場所にメモして置かなければ分からない,メモも難しい</li>
<li>別のデータを使う場合同じ処理をもう一度する必要がある</li>
</ol>
</div>
<p>などの問題がよく起こります.</p>
<p>また,削除の作業などは(これくらいなら自動でもできますが)一つ一つ消していく必要があり大きなデータ(数万行とか)では非常に手間がかかります.</p>
<p>Excelはこのように,処理が人間の記憶や,正確さに依存しています. その結果,ミスの原因となっています.</p>
<div class="note">
<p>例えば, こちらの記事(<a href="https://www.teampay.co/blog/biggest-excel-mistakes-of-all-time">The 7 Biggest Excel Mistakes of All Time</a>)では,過去にExcelの操作ミスで起きた大規模なミスの事例が紹介されています.</p>
<ul>
<li>2008年 バークレイズ・キャピタル</li>
</ul>
<p>隠していたセルがPDF板では表示されていたことによる数百万ドルの損失が発生.</p>
<ul>
<li>2012年 ロンドン オリンピック</li>
</ul>
<p>作業員のタイプミスで,10万枚のチケットが払い戻し</p>
<ul>
<li>2012 JPモルガン</li>
</ul>
<p>Excelのコピペミスにより60億ドルの損失</p>
<p>ちなみにこの記事には載っていませんが,2019年に話題になった,厚生労働省の毎月勤労統計における不正問題もExcelのミスが原因の一つです.</p>
</div>
<p>一方プログラムでは,これらの問題が解決可能です.</p>
<p>先程のExcelの作業と同じ例で考えてみましょう.
以下のコードは先程のExcelで行った作業を実行しています.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co">#データの読み込み</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'sample.csv'</span>)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="co">#いらない部分を削除する</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>df.dropna(axis<span class="op">=</span><span class="st">'index'</span>,how<span class="op">=</span><span class="st">'any'</span>,inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="co">#右側に行和を追加する</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'sum'</span>] <span class="op">=</span> df.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a><span class="co">#data3が50以下の行を消す</span></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df[df[<span class="st">'data3'</span>]<span class="op">&gt;</span><span class="dv">50</span>]</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a><span class="co">#確認</span></span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div>
<p>実行結果は当然Excelで行ったものと同じです.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> python <span class="ex">sample.py</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">data1</span>   data2   data3    sum</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    86.0      75    67.0  228.0</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>    66.0      92    90.0  248.0</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>     6.0      66    93.0  165.0</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>   27.0      32    52.0  111.0</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="ex">18</span>   27.0      61    91.0  179.0</span></code></pre></div>
<p>しかし, Excelと異なりこのプログラムを実行しても<strong>元データは変わっていない</strong>ため,元の状態にいつでも戻ることが可能です. 更に何を行ったかの<strong>処理がプログラムとして残っている</strong>ため,途中で間違いがないかのチェックや修正が可能です.
(本講義では扱いませんが, 実際にはプログラムでもミスは絶対におきます.そのためテストを実施するのですが,人間の行うチェックリストなどのテストよりもプログラムで行うテストの方が信頼性が高いのも利点です.)</p>
<p>また,
<strong>プログラムがそのまま作業メモ</strong>になっているので,他人に何を行ったかの説明が可能です. 加えて,このプログラムを再利用することで,<strong>異なるデータで同じ作業をする場合に再利用することが可能</strong>です. また,実際の処理はすべてプログラムが自動で行うため<strong>作業の手間がデータの容量にかかわらず一定</strong>です.</p>
<p>確かに,これまでに皆さんが講義で習ってきたような内容であれば,Excelのほうが学習コストが低く手軽に行えます. しかし,今後行うような統計処理やデータサイエンスなど,処理が複雑になればなるほど,プログラムで処理するメリットが大きくなります.</p>
</details>
<h2 data-number="5" id="データの取得と編集-執筆中"><span class="header-section-number">5</span> データの取得と編集 (執筆中)</h2>
<details>
<summary>
開く/閉じる
</summary>
<p>これからデータをプログラム上で扱うにあたって,まずはデータについて考えてみましょう.</p>
<p>データは,基本的に誰かが収集・作成したものです. 自然科学においては,<strong>実験</strong>によってデータを収集し,人文・社会科学では,<strong>調査</strong>によってデータが集められます. データの作成はそれ自体でそれぞれ,<strong>実験計画法</strong>,<strong>社会調査法</strong>といった学問分野になっています.</p>
<p>データサイエンスは,データを利用して行う学問でセウが,データを収集・作成するのは専門知識,技能,時間,お金などが必要であり,データの作成自体が大きな仕事です.</p>
<p>データを自分で集めるには大変な手間がかかるので, 研究機関や,行政,大学,調査会社など他者が集めて公開しているデータを利用するのも一つの手段です. この講義では, 基本的に公開されているデータを利用して, 学習,研究を行います.</p>
<p>実験や調査によって集められたデータを<strong>原データ</strong>といい,調査によって集められた個別の調査票などを<strong>個票</strong>といいます.</p>
<p>原データに統計処理を加えてまとめたものを,<strong>統計資料</strong>あるいは<strong>調査結果</strong>などと呼びます.もともと<strong>統計(statistics)</strong>という言葉は,(国家の状況に関して)
集められた原データを編集してわかりやすく加工することを意味していました. データサイエンスではしばしば原データが利用されますが,公開されているデータはこれらの統計資料である場合が多く,原データを利用するのは困難な場合が多いです.</p>
<p>統計資料に更に加工を加えたものを,<strong>二次統計</strong>や<strong>加工統計</strong>と呼びます.</p>
<p>例えば, 国税調査によって個票が収集され,統計処理を加えた統計資料が公開され, それを更に複数の統計と併せて加工することで,国民経済計算などの加工統計が作成されます.</p>
<figure>
<img src="../images/statistical-data-flow.png" alt="データの作られ方" />
<figcaption aria-hidden="true">データの作られ方</figcaption>
</figure>
<h3 data-number="5.1" id="データの尺度"><span class="header-section-number">5.1</span> データの尺度</h3>
<p>データには様々な種類があり,種類ごとに利用可能な統計やデータサイエンスの手法が異なります.したがって,今後データを分析するにあたって,大まかなデータの区分を知っておく必要があります.</p>
<p>データの区分として,一番大きいものに <strong>量的データ(quantitative data)</strong>,<strong>質的データ(qualitative data)</strong>があります. 質的データはカテゴリーデータなどとも呼ばれます.</p>
<div class="warn">
<p>このどちらにも当てはまらないような,画像,音声,文字データなどの<strong>非構造データ</strong>もありますが,それらはそれぞれ個別の対処手法があります.</p>
<p>この講義では後半で文字データを扱う自然言語処理について扱いますが,しばらくはこれらに関しては無視して,量的データと質的データを扱います.</p>
</div>
<div class="note">
<ul>
<li>量的データ</li>
</ul>
<p>数量的なデータであり,データを数直線上の位置で表現できます.</p>
<p>例:</p>
<pre><code>- 年齢(5歳,10歳,100歳)
- 身長(150cm,170cm,200cm)
- 年収(200万円,500万円,1億円)

など基本的には,何かしらの**単位**で計量されます.</code></pre>
<hr />
<ul>
<li>質的データ</li>
</ul>
<p>あらかじめ定められたカテゴリーのいずれかに属する値を持つデータです.</p>
<p>例:</p>
<pre><code>- 性別(F or M)
- 犬の種類(ゴールデンレトリバー, 柴犬, プードル,など)
- 天気(晴れ,雨,曇など)
- 満足度(とても満足, まぁ満足, どちらでもない,など)</code></pre>
</div>
<p>質的データと量的データは更に細かい区分として<strong>尺度(scale)</strong>に分解されます.
それぞれは,｢比較が可能か｣,｢和差積商｣の計算が可能かどうかという観点で定義されます.</p>
<div class="note">
<ul>
<li>質的データ</li>
</ul>
<hr />
<p><strong>名義尺度(nominal scale)</strong></p>
<p>質的データの中で区分にしか意味がなく順序が定義されていないもの.</p>
<pre><code>- 例:氏名,性別,種類,など</code></pre>
<p>和差積商のどれも定義されない.</p>
<pre><code>- 例:青木 + 赤木 = 紫木 のような計算はできない.
- 青木は赤木よりも良い,大きい,などの比較もできない</code></pre>
<hr />
<p><strong>順序尺度(ordinal scale)</strong></p>
<p>質的データの中で順序が定義されているもの.</p>
<pre><code>- 例: 満足度,成績区分(S,A,B,...)など</code></pre>
<p>和差積商のどれも定義されないが比較が可能</p>
<pre><code>- 例: ｢満足｣は｢不満足｣よりも満足度が高いが,
- 普通 + 普通 = 満足 のような計算はできない.</code></pre>
<hr />
<ul>
<li>量的データ</li>
</ul>
<hr />
<p><strong>間隔尺度(interval scale)</strong></p>
<p>量的データの中で,間隔は定義されているが,比率が定義されていないもの.</p>
<pre><code>- 例: 時刻,日付,IQ,気温,西暦,etc</code></pre>
<p>足し算引き算はできるが,掛け算割り算ができない.</p>
<pre><code>- 1月1日 + 364日 = 12月31日 ですが,
- 1月1日 * 2 = 2月2日 のような計算は定義されていません.</code></pre>
<hr />
<p><strong>比率尺度(ratio scale)</strong></p>
<p>量的データの中で,比率が定義されているもの.</p>
<pre><code>- 例: 長さ,速度,重さ,面積など</code></pre>
<p>和差積商すべて計算できます.</p>
<pre><code>- 10Kg + 10Kg = 20Kg
- 10Kg * 2    = 20Kg</code></pre>
</div>
<p>これらの区分は今後データの処理手法を選択する際に使用するので,
データがでてきたら尺度は何かを判断するようにしましょう.</p>
<div class="note">
<p><strong>演習問題</strong></p>
<p>以下のデータの尺度を判断し,なぜそのように判断できるかを説明してください.</p>
<ol type="1">
<li><p>ペットの種類 (イヌ,ネコ,鳥,魚,爬虫類,その他から選択)</p></li>
<li><p>偏差値</p></li>
<li><p>電話番号</p></li>
<li><p>一週間に読んだ本のページ数</p></li>
</ol>
</div>
<h3 data-number="5.2" id="データの種類"><span class="header-section-number">5.2</span> データの種類</h3>
<p>これまでは一つの種類の値の区分に関して,説明してきましたが,データは複数の値の組み合わせで表現され,<strong>観測対象(ケース)</strong>別の<strong>観測項目(変数)</strong>の<strong>テーブルデータ</strong>として表現される場合が多いです.</p>
<figure>
<img src="../images/case-and-variable.png" alt="観測対象と観測項目" />
<figcaption aria-hidden="true">観測対象と観測項目</figcaption>
</figure>
<p>データの観測項目の数のことを<strong>次元</strong>と呼び, 1観測項目のデータを<strong>1次元データ</strong>,2観測項目以上のデータを<strong>多次元データ</strong>と呼びます.</p>
<figure>
<img src="../images/data-dimention.png" alt="データの次元" />
<figcaption aria-hidden="true">データの次元</figcaption>
</figure>
<p>また,観測項目や観測対象の組み合わせによって,特別に呼称され,それぞれ独自の分析手法が存在するデータもあります(時系列データと時系列解析,パネルデータと,パネルデータ分析など)</p>
<p><img src="../images/data-types.png" /></p>
<p>上の時系列データは,特定の時間単位で集計,区分されたデータを指しますが,データの発生時刻が記録されたデータを<strong>点過程データ</strong>と呼びます. 点過程データを日毎,月ごとなどで集計することで時系列データが作成されます.</p>
<h3 data-number="5.3" id="データの取得と編集"><span class="header-section-number">5.3</span> データの取得と編集</h3>
<p>先に述べたように,データは自分で集めることもできますが,手間,時間,お金がかかるため,目的に応じて他人の集めたデータを利用することも一般的です.</p>
<p>現在では,無料で利用可能なデータも多数あり,この講義ではそれらのデータを利用します.</p>
<div class="warn">
<p>後ほど自分で選んだ研究テーマによっては自分でデータを収集することも可能です.
過去のこの講義でも, HPの視線移動データ,アンケートデータ,ヒットチャートの音楽の特徴量を表すデータ
などを自分で作った事例もあります.</p>
<p>それらに関しては,個々の研究計画に応じて必要であれば補足的に講義内で扱います.</p>
</div>
<p>無料で誰でも利用可能なデータの代表として,<strong>公的統計</strong>があります. 公的統計は,国や地方自治体の作成する統計情報であり,政策立案と評価のための基礎資料として利用されており, 作成過程なども含めて一般に公開されているものが多数あります. プライバシーや個人情報保護の観点から個票は公開されていない場合が大半ですが,研究目的であれば申請して利用することも可能です.しかし,通常データが手元に来るまでに1年程度時間を要するのでこの講義では扱いません.</p>
<p>日本の統計情報を活用するには,“日本の統計が閲覧できる政府統計ポータルサイト”<a href="https://www.e-stat.go.jp"><code>e-stat</code></a>があります. e-statでは日本の各種公的統計の情報を統計別,分野別,地域別,時系列などで取得することができます.</p>
<p><img src="../images/e-stat-screenshot1.png" alt="e-stat screenshot1" />
<img src="../images/e-stat-screenshot2.png" alt="e-stat screenshot2" /></p>
<p>日本以外のデータに関しては,各国の統計サイトに直接アクセスするか,あるいは国連による各種子交際期間の統計の横断検索サイト<a href="https://data.un.org"><code>UNData</code></a>などを利用することで取得可能です.</p>
<figure>
<img src="../images/UNData-screenshot.png" alt="UNData" />
<figcaption aria-hidden="true">UNData</figcaption>
</figure>
<p>各国の公的統計は通常数量的なデータを扱っていますが,大学の講義や研究などで欲利用される質的データとして,<a href="https://www.worldvaluessurvey.org/wvs.jsp"><code>World Value Survey</code></a>があります. 世界各国の価値観に関する調査のパネルデータを提供しており, ｢人生において大切にするもの｣｢男女平等意識｣ などの調査結果が利用できます.</p>
<p>その他にも各種研究機関や企業が提供するデータも利用可能です.</p>
<p>統計ではありませんが, <a href="https://disclosure2.edinet-fsa.go.jp/WEEK0010.aspx"><code>EDINET</code></a>のWEB APIを利用して有価証券報告書のデータを取得する,Wikipediaのテキストデータを自然言語処理してデータを作成するなどもこの講義における過去の研究事例があります.</p>
<p>これらに関しては後ほど, Webページから自動でデータを取得する<code>Webスクレイピング</code>やTwitterなどのSNSの提供する<code>API</code>を利用してデータを取得する方法も扱います.</p>
<p>Webから取得可能な情報以外にも, 特定の組織に直接交渉してデータを活用することも可能です. この講義では千葉商科大学の授業データや,電力消費データを提供してもらい分析した事例もあります.</p>
<h3 data-number="5.4" id="e-statを使ってみよう"><span class="header-section-number">5.4</span> e-statを使ってみよう</h3>
<p>e-statを利用して,pandasで読み込める形式のCSVを作成しましょう. 練習用なので,何を持ってきてもいいのですがここでは,｢産業別の給与｣に関するデータを取得します. 就職活動中の学生も多いかと思います. 産業別の給与はどのように異なるのでしょうか.</p>
<p>まずは使いたいデータを探します. 方法はいくつもありますが,ここでは<code>分野</code>から探してみましょう. <code>分野→労働・賃金→民間給与実態調査</code>の順にクリックしてください.</p>
<p><img src="../images/e-stat-salary1.png" /></p>
<p><code>データベース</code>形式か,<code>ファイル</code>形式か選択することができます. データベース形式は必要なデータをブラウザ上で選択,編集してデータを取得することができます. ファイル形式は,ExcelやPDFファイルをダウンロードできます. どちらでも問題ありませんが,ここではただのExcelファイルと,pandasで読み込めるデータの違いを確認するために,<code>ファイル</code>をクリックしましょう.</p>
<p><img src="../images/e-stat-salary2.png" /></p>
<p>官庁の作成する統計は,<code>民間給与実態調査</code>などの調査名,統計名の下位分類として,年次推計,延長推計などの提供分類,その下に対象年次,更にその下に表レベルの分類があります. これはそれぞれの統計にある程度詳しくないと意味がわからないかと思いますが,今は練習ですので気にせず,<code>結果表</code>の<code>年次推計</code>の<code>2018年度</code>の<code>第1表</code> の<code>Excel</code>をクリックしましょう.</p>
<p><img src="../images/e-stat-salary3.png" /></p>
<p>これで,民間給与実態統計調査結果表年次推計2018年度第1表 給与所得者数・給与額・税額 全国計表 がダウンロードできましたので,開いてみましょう.</p>
<p><img src="../images/e-stat-salary4.png" /></p>
<p>省庁から取得したExcel表は,このような形態になっていることが多いですが,このデータはそのままではpandasなどで読み込める形になっていません. もちろん,データベース機能で編集したデータや2018年ではなくもっと新しいデータの場合には,ある程度利用できる形態になっていますが,このようなデータは未だに多数存在します.</p>
<p>ではこのデータは一体,何が駄目なのでしょうか. プログラムで利用できるデータを作成するにあたって,e-statのデータは良い<strong>悪い見本</strong>なので,e-stat全般の問題点に関して少し見ていきましょう.</p>
<p>先ほどダウンロードしたような形式のデータを俗に<strong>ネ申Excel</strong>といいます(以降<strong>神Excel</strong>と記載).</p>
<p>神Excelとは,紙で印刷した際の見栄えを重視した,データとしての利用性のまったくないExcelシートです(参考:<a href="https://okumuralab.org/~okumura/SSS2013.pdf">｢ネ申Excel｣問題</a>).</p>
<p>例えば, 見栄えを重視するために<strong>セルを結合する</strong>,<strong>画像を挿入する</strong>,<strong>スペースなどで幅を揃える</strong>,<strong>1セルに1文字を入力する(Excel方眼紙)</strong>などが神Excelの特徴となります.</p>
<p>先程の民間給与実態統計調査を見てみるとこれらの特徴が見事に当てはまります.</p>
<figure>
<img src="../images/kami-excel.png" alt="神Excel" />
<figcaption aria-hidden="true">神Excel</figcaption>
</figure>
<p>人間は,文字の間に空白が挟まっていてもつながった単語として認識できますが,コンピュータにはできません.また,セルが結合されている場合に表として解釈することもできません,画像も処理できません.このようなExcel表はデータとしては利用できないので,データとして形式を揃えるだけで大変な手間がかかります(このあと実際にやります).</p>
<p>逆に, プログラムで利用可能なデータを<strong>機械判読可能</strong>なデータといいます.
機械判読可能な分析しやすいExcelデータをまとめる基本チェック表として,以下のものが有名です(<a href="https://www.tandfonline.com/doi/full/10.1080/00031305.2017.1375989">Data Organization in Spredsheets</a>).</p>
<div class="note">
<ul>
<li><p>一貫性を保つ</p>
<ul>
<li>名前の一貫性</li>
<li>記述方法の一貫性</li>
</ul></li>
<li><p>名前の付け方</p>
<ul>
<li>スペースを使わない</li>
<li>意味が分かる名前をつける</li>
<li>日付の書き方をYYYY-MM-DDに</li>
</ul></li>
<li><p>空のセルを作らない</p></li>
<li><p>セルに一つしかものを入れない</p></li>
<li><p>長方形にする</p></li>
<li><p>データと計算を分離する</p></li>
<li><p>フォントの色やハイライトをデータとして使用しない</p></li>
<li><p>データ検証機能を使う</p></li>
<li><p>CSVファイルに保存する</p></li>
</ul>
</div>
<p>データをプログラムで処理するのが一般的な現代において,自分で使うためのみならず,データの価値を保つためにも機械判読可能な形式でデータを作成するように心がけましょう.Excelを使っていると,せっかくある機能を使いたくなりますができるだけデータとしての利用可能性を高める意識が必要です.</p>
<div class="warn">
<p>ちなみにe-statの問題点は,神Excelにとどまりません.</p>
<p>一番恐ろしいのは一部のデータにおいて,<strong>データベース機能に登録されている元データが神Excel</strong>のままになっていることです.</p>
<p>Excel表上でスペースが混じっているセルの値などがデータベース機能で編集してもそのまま出てくる場合があります.</p>
<p>その他にも,</p>
<ul>
<li>同じ統計でも作成年毎に表記が異なる</li>
<li>データの構造が統計名-提供分類-年次-表の形式になっているため,APIなどでデータを一意に絞り込めない.</li>
<li>公表が遅い</li>
<li>APIにおける一部文字化けやJSONの構造が崩れている</li>
</ul>
<p>など沢山の問題があります. 徐々に改善されているようですので,今後に期待したいところですね.</p>
</div>
<h3 data-number="5.5" id="機械判読可能データの作成"><span class="header-section-number">5.5</span> 機械判読可能データの作成</h3>
<p>では,e-statからダウンロードしたデータを編集して, <strong>機械判読可能なBOM付きUTF-8のCSV</strong>に変換してみましょう. ここでは, Execelを用いて行います.</p>
<p>今回ダウンロードしたデータの中で扱いたいのは,<strong>業種別の給料</strong>です.
それ以外の邪魔な情報は削除しましょう(コピーして別のシートに貼り付けた方が早いです).
新しいファイルを作成し,一行目にHeaderとして,<code>industry</code>, <code>salary</code> と記入しましょう.
日本語でも大丈夫ですが英語の方が安心です.
しかし,業種名を他のファイルにそのまま貼り付けようとすると,セルが結合されているためうまくいきません.このままでは,プログラムで上手く処理できないので編集します.</p>
<p>ダウンロードしたファイルの業種の部分をコピーしたら,新しいファイルのindustry の下のセルを右クリックして｢値だけ貼り付け｣をしましょう.
一部の行の中に句読点が入っていますがこれもエラーのもととなるので,編集します.</p>
<figure>
<img src="../images/e-stat-salary5.png" alt="ヘッダーの作成" />
<figcaption aria-hidden="true">ヘッダーの作成</figcaption>
</figure>
<figure>
<img src="../images/e-stat-salary6.png" alt="データのコピー" />
<figcaption aria-hidden="true">データのコピー</figcaption>
</figure>
<p>プログラムは基本的に英語の利用を想定されているのでデータも英語の方が安定します.
日本語でも問題ない場合が大半なので,日本語のままでも良いですが,プログラム記述中に日本語と英語が混ざるとエラーの原因となりやすいので,文章自体に意味があるテキストデータなどを除いて可能な限り英語に変換しておくことをおすすめします.
自分で適切な英語に変換できない場合はExcelでは翻訳したいセルを右クリックして<code>翻訳</code>を選ぶと翻訳してくれます. Excelでは現状自分でコピーアンドペーストしなければなりません.
Google Sheetなど使うと一発で全て変換する関数 GoogleTranslate などがあります.</p>
<figure>
<img src="../images/e-stat-salary7.png" alt="翻訳されたデータ" />
<figcaption aria-hidden="true">翻訳されたデータ</figcaption>
</figure>
<figure>
<img src="../images/e-stat-salary8.png" alt="Excelの翻訳機能" />
<figcaption aria-hidden="true">Excelの翻訳機能</figcaption>
</figure>
<p>CSVでデータを詠み込む場合, 空白,コンマ,Tabなどはエラーになりやすいので,可能な限り消しましょう.
特に今回の業種データは｢電気･ガス･熱供給・水道業｣ などなぜか中点を利用しているものもあれば,句点で区切られているものもあり,意味が分かりません.
長過ぎるのも問題が起きやすいので,頭文字のみにするなどわかりやすい形に変更しましょう(電気･ガス･熱供給・水道業 → インフラ, 卸売,小売業 → 商業 など)</p>
<p>再度に作成されたデータをCSVとして保存して終了です.保存する際のデータ型式にCSV UTF-8があるのでそれを選択し, ｢<code>salary.csv</code>｣という名前で作業ディレクトリのDataフォルダに保存します.</p>
<figure>
<img src="../images/e-stat-salary9.png" alt="データの保存" />
<figcaption aria-hidden="true">データの保存</figcaption>
</figure>
<h3 data-number="5.6" id="pandasによるデータ処理"><span class="header-section-number">5.6</span> pandasによるデータ処理</h3>
<p>ここから,先ほど作成したデータを利用してpandasの基本的な機能について確認していきます.</p>
<h4 data-number="5.6.1" id="ファイルの読み込み"><span class="header-section-number">5.6.1</span> ファイルの読み込み</h4>
<p>先程作成したデータを作業ディレクトリのdataフォルダに保存して,Pythonで読み込んでみます.
以下の用に <code>import pandas as pd</code> でpandasをimportしたあとに, <code>pd.read_csv('ファイルパス')</code>でファイルが読み込めます. また,同じ行で読み込んだファイルを<code>df</code>という変数に代入しています.
最後の行で読み込んだファイルを表示しています.</p>
<p>最初のうちは自分で作成するプログラムにも以下の例の用に,それぞれの行で何をしているのかコメントを書くようにしましょう.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pandas を import し, pdと呼ぶという意味</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co"># pandas はデータの読み込みなどに利用します</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="co"># データの読み込み</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="co"># CSVファイルを読み込んでデータフレーム(後述)に格納</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="co"># pd.関数名 でpandasの関数が利用できる</span></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataフォルダを作成し,そこにデータを入れておきましょう</span></span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="co"># data/salary_data.csv は  data フォルダの salary.csv という意味</span></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'data/salary.csv'</span>)</span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div>
<p>正しくプログラムをデータが作成できていれば,プログラムを実行することで以下のようにデータの中身が標準出力に表示されるはずです. プログラムを記述する際には,このようにところどころで,<code>print()</code>を利用して,自分のイメージしたとおりにデータが編集されているか確認する癖をつけるようにしましょう.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="ex">❯</span> python3 salary.py</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>         <span class="ex">Industry</span>  Salary</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    Construction    4503</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing    4756</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>       Wholesale    3186</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation    1949</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>         Finance    5711</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate    3786</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>       Transport    3909</span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy    8199</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>            Info    5337</span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu    3913</span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>            Med    4144</span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other    4239</span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>       Suervice    3086</span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>           AFFC    2190</span></code></pre></div>
<div class="note">
<p>pandasでは主に<code>DataFrame</code>というデータ型を利用してデータを扱います.
<code>DataFrame</code>オブジェクトには様々な機能が実装されており,様々な形に変形することができますが,基本的には以下の3属性から成っています.</p>
<ul>
<li><p>values : データ部分 n × m の行列</p></li>
<li><p>columns: 列名, header情報</p></li>
<li><p>index: 行名</p></li>
</ul>
<figure>
<img src="../images/data-frame-image.png" alt="DataFrameのイメージ" />
<figcaption aria-hidden="true">DataFrameのイメージ</figcaption>
</figure>
</div>
<p>クラスの属性には<code>オブジェクト名.属性名</code>でアクセスできます. 以下のコードを追加して実行し,それぞれどのように表示されるか確認してみましょう.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dfのvalues属性を表示したい場合</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.values)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co">#dfのcolumns属性を表示したい場合</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.columns)</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a><span class="co">#dfのindex属性を表示したい場合</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.index)</span></code></pre></div>
<div class="sourceCode" id="cb111"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[[</span><span class="st">'Construction'</span> 4503]</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Manufacturing'</span> 4756]</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Wholesale'</span> 3186]</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Accomodation'</span> 1949]</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Finance'</span> 5711]</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Real Estate'</span> 3786]</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Transport'</span> 3909]</span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Energy'</span> 8199]</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Info'</span> 5337]</span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Edu'</span> 3913]</span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Med'</span> 4144]</span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Other'</span> 4239]</span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'Suervice'</span> 3086]</span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a> <span class="ex">[</span><span class="st">'AFFC'</span> 2190]]</span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a><span class="ex">Index</span><span class="er">(</span><span class="ex">[</span><span class="st">'Industry'</span><span class="ex">,</span> <span class="st">'Salary'</span>], dtype=<span class="st">'object'</span><span class="kw">)</span></span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a><span class="ex">RangeIndex</span><span class="er">(</span><span class="va">start</span><span class="op">=</span>0, <span class="va">stop</span><span class="op">=</span>14, <span class="va">step</span><span class="op">=</span>1<span class="kw">)</span></span></code></pre></div>
<h2 data-number="6" id="行名列名の変更"><span class="header-section-number">6</span> 行名,列名の変更</h2>
<p>columnsとindexは任意の値を設定できます(ただし重複はなし).
リストでそれぞれの属性を更新することで新しい列名,行名を指定できます.</p>
<ul>
<li>列名の変更</li>
</ul>
<p><code>df.columns = [新しい列名のリスト]</code></p>
<ul>
<li>行名の変更</li>
</ul>
<p><code>df.index = [新しい行名のリスト]</code></p>
<p>試しに列名を<code>['Ind','Sal']</code>に,行名を<code>a~n</code>のアルファベットに変更してみましょう.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co">#列名の変更</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> [<span class="st">'Ind'</span>,<span class="st">'Sal'</span>]</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="co">#行名の変更</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>df.index <span class="op">=</span> [<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>,<span class="st">'d'</span>,<span class="st">'e'</span>,<span class="st">'f'</span>,<span class="st">'g'</span>,<span class="st">'h'</span>,<span class="st">'i'</span>,<span class="st">'j'</span>,<span class="st">'k'</span>,<span class="st">'l'</span>,<span class="st">'m'</span>,<span class="st">'n'</span>]</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div>
<p>指定した通りに列名や行名が変更されていれば成功です.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>             <span class="ex">Ind</span>   Sal</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="ex">a</span>   Construction  4503</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="ex">b</span>  Manufacturing  4756</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="ex">c</span>      Wholesale  3186</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="ex">d</span>   Accomodation  1949</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="ex">e</span>        Finance  5711</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="ex">f</span>    Real Estate  3786</span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="ex">g</span>      Transport  3909</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="ex">h</span>         Energy  8199</span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="ex">i</span>           Info  5337</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="ex">j</span>            Edu  3913</span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="ex">k</span>            Med  4144</span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a><span class="ex">l</span>          Other  4239</span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a><span class="ex">m</span>       Suervice  3086</span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a><span class="ex">n</span>           AFFC  2190</span></code></pre></div>
<p>ただし,indexは0から始まる連番を利用するのが一般的なので,むやみに文字などにしないほうが良いです. indexに0から始まる連番を振り直すには,<code>.reset_index()</code>メソッドを利用するのが一般的です.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co">#元の連番に戻す</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co">## ()の中に inplace = True と書くことでdfのindexが変更される</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co">## inplace=Trueを書かないと変更されません.</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co">## drop = True と書くことで,変更前に使用していたindexが消去されます.</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co">## drop = False の場合先ほどのアルファベットが列として残ります.</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>df.reset_index(inplace<span class="op">=</span><span class="va">True</span>,drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>             <span class="ex">Ind</span>   Sal</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    Construction  4503</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing  4756</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>       Wholesale  3186</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation  1949</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>         Finance  5711</span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate  3786</span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>       Transport  3909</span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy  8199</span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>            Info  5337</span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu  3913</span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>            Med  4144</span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other  4239</span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>       Suervice  3086</span></code></pre></div>
<h3 data-number="6.1" id="値の抽出"><span class="header-section-number">6.1</span> 値の抽出</h3>
<p>valuesにアクセスする方法は多数存在し,用途によって使い分けます.</p>
<p>列の指定は,<code>df['列名']</code>あるいは<code>df.列名</code>のように記述することで指定するのが最も単純な方法です.
<code>df</code>の<code>'Ind'</code>列を抽出したい場合には<code>df['Ind']</code>あるいは<code>df.Ind</code>と書きます.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co">#列の指定(Ind列)</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'Ind'</span>])</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="co">#列の指定(Sal列)</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.Sal)</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>      Construction</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>     Manufacturing</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>         Wholesale</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>      Accomodation</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>           Finance</span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>       Real Estate</span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>         Transport</span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>            Energy</span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>              Info</span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>               Edu</span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>              Med</span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>            Other</span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>         Suervice</span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>             AFFC</span>
<span id="cb117-15"><a href="#cb117-15" aria-hidden="true" tabindex="-1"></a><span class="ex">Name:</span> Ind, dtype: object</span>
<span id="cb117-16"><a href="#cb117-16" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>     4503</span>
<span id="cb117-17"><a href="#cb117-17" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>     4756</span>
<span id="cb117-18"><a href="#cb117-18" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>     3186</span>
<span id="cb117-19"><a href="#cb117-19" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>     1949</span>
<span id="cb117-20"><a href="#cb117-20" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>     5711</span>
<span id="cb117-21"><a href="#cb117-21" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     3786</span>
<span id="cb117-22"><a href="#cb117-22" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>     3909</span>
<span id="cb117-23"><a href="#cb117-23" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>     8199</span>
<span id="cb117-24"><a href="#cb117-24" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>     5337</span>
<span id="cb117-25"><a href="#cb117-25" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>     3913</span>
<span id="cb117-26"><a href="#cb117-26" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>    4144</span>
<span id="cb117-27"><a href="#cb117-27" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>    4239</span>
<span id="cb117-28"><a href="#cb117-28" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>    3086</span>
<span id="cb117-29"><a href="#cb117-29" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>    2190</span>
<span id="cb117-30"><a href="#cb117-30" aria-hidden="true" tabindex="-1"></a><span class="ex">Name:</span> Sal, dtype: int64</span></code></pre></div>
<p><code>X列の,Y行</code>のように<code>範囲選択</code>したい場合には<code>df.loc[行番号,列名]</code>と書きます.
また,行名,列名それぞれにスライスを利用することでの,<code>X~Y列のV~W行</code>のような指定ができます.
スライスで表せない行名や列名を指定する場合には,それぞれに抜き出したい列や行のリストを渡します.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co">#範囲指定(3行目,'Sal'列)</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.loc[<span class="dv">3</span>,<span class="st">'Sal'</span>])</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co">#スライスを利用した範囲指定</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.loc[<span class="dv">3</span>:<span class="dv">5</span>,<span class="st">'Ind'</span>:<span class="st">'Sal'</span>])</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="co">#リストを利用した範囲指定</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.loc[[<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">7</span>],[<span class="st">'Ind'</span>,<span class="st">'Sal'</span>]])</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="ex">1949</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>            <span class="ex">Ind</span>   Sal</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>  Accomodation  1949</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>       Finance  5711</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>   Real Estate  3786</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>         <span class="ex">Ind</span>   Sal</span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>  Wholesale  3186</span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>    Finance  5711</span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>     Energy  8199</span></code></pre></div>
<p>特定の一つのセルにアクセスする場合には<code>loc</code>を利用することもできますが,<code>df.at[行名,列名]</code>を使うほうが高速です.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co">#atによる単独のセルの指定</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.at[<span class="dv">3</span>,<span class="st">'Sal'</span>])</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="ex">1949</span></span></code></pre></div>
<p>行名や列名ではなく,行番号,列番号による指定も可能です. 行番号,列番号は行名や列名とは無関係に,0から始まる連番として指定されています.
範囲選択は<code>df.iloc[行番号,列番号]</code>,単独の値は<code>df.iat[行番号,列番号]</code>で行うことができます.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co">#行番号,列番号による範囲指定</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.iloc[<span class="dv">3</span>:<span class="dv">5</span>,<span class="dv">0</span>:])</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co">#行番号,列番号による単独のセルの指定</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.iat[<span class="dv">3</span>,<span class="dv">1</span>])</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>         <span class="ex">Ind</span>   Sal</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>  Wholesale  3186</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>    Finance  5711</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>     Energy  8199</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="ex">1949</span></span></code></pre></div>
<div class="note">
<ul>
<li>演習問題</li>
</ul>
<p>以下の画像における範囲①~③を一度に抽出してください.
単独の値を抜き出す際には<code>.at</code>,<code>.iat</code>メソッドを利用しましょう.</p>
<figure>
<img src="../images/pandas-select-practice.png" alt="値の抽出" />
<figcaption aria-hidden="true">値の抽出</figcaption>
</figure>
</div>
<h3 data-number="6.2" id="条件による抽出"><span class="header-section-number">6.2</span> 条件による抽出</h3>
<p>Excelにおけるフィルター機能のように,pandasでも条件による値の抽出が可能です.
pandsでは,DataFrameオブジェクトに,真偽値のリストを渡すと,<code>True</code>の行のみを抜き出すことができます.</p>
<p>以下のコードでは,<code>False</code>と<code>True</code>を交互に繰り返し,奇数行のみを抜き出しています.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co">#真偽値のリストによる抜き出し</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>bools <span class="op">=</span> [<span class="va">False</span>,<span class="va">True</span>] <span class="op">*</span> <span class="dv">7</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bools)</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[bools])</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[False,</span> True, False, True, False, True, False, True, False, True, False, True, False, True]</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>              <span class="ex">Ind</span>   Sal</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing  4756</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation  1949</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate  3786</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy  8199</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu  3913</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other  4239</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>           AFFC  2190</span></code></pre></div>
<p>DataFrameオブジェクトに対して,真偽値計算をすると,各行に対する真偽値計算の結果が帰ってきます.
以下のコードでは,Salaryが3000以上の行のみ<code>True</code>の値が帰ってきているのが確認できます.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co">#DataFrameオブジェクトに対する論理演算</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'Sal'</span>])</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'Sal'</span>] <span class="op">&gt;=</span> <span class="dv">3000</span>)</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>     4503</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>     4756</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>     3186</span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>     1949</span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>     5711</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     3786</span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>     3909</span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>     8199</span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>     5337</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>     3913</span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>    4144</span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>    4239</span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>    3086</span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>    2190</span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a><span class="ex">Name:</span> Sal, dtype: int64</span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>      True</span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>      True</span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>      True</span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>     False</span>
<span id="cb127-20"><a href="#cb127-20" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>      True</span>
<span id="cb127-21"><a href="#cb127-21" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>      True</span>
<span id="cb127-22"><a href="#cb127-22" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>      True</span>
<span id="cb127-23"><a href="#cb127-23" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>      True</span>
<span id="cb127-24"><a href="#cb127-24" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>      True</span>
<span id="cb127-25"><a href="#cb127-25" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>      True</span>
<span id="cb127-26"><a href="#cb127-26" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>     True</span>
<span id="cb127-27"><a href="#cb127-27" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>     True</span>
<span id="cb127-28"><a href="#cb127-28" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>     True</span>
<span id="cb127-29"><a href="#cb127-29" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>    False</span>
<span id="cb127-30"><a href="#cb127-30" aria-hidden="true" tabindex="-1"></a><span class="ex">Name:</span> Sal, dtype: bool</span></code></pre></div>
<p>この<strong>①BoolのリストをDataFrameに渡すとTrueの行が返ってくる</strong>,<strong>②DataFrameに論理演算を行うとBoolのリストが返ってくる</strong>という機能の2つを組み合わせて,条件抽出を行うことができます.
例えば,<code>Sal列</code>から3000以上の行のみを抜き出すには以下のように書きます.</p>
<p>1行のプログラムですが,いくつかの機能を組み合わせているので,どの部分で何が起きているのかを分解して理解するようにしましょう.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co">#DataFrameオブジェクトに対する条件抽出</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[df[<span class="st">'Sal'</span>] <span class="op">&gt;=</span> <span class="dv">3000</span>][<span class="st">'Sal'</span>])</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Name:</span> Sal, dtype: bool</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>     4503</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>     4756</span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>     3186</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>     5711</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     3786</span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>     3909</span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>     8199</span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>     5337</span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>     3913</span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>    4144</span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>    4239</span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>    3086</span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a><span class="ex">Name:</span> Sal, dtype: int64</span></code></pre></div>
<div class="note">
<ul>
<li>演習</li>
</ul>
<p>Salary.csvから以下の条件に従った抽出を行ってください.</p>
<ol type="1">
<li><p><code>Ind列</code>の文字数が5文字以上の<code>Ind列</code>の行</p></li>
<li><p><code>Sal列</code>が偶数の<code>Sal列</code>の行</p></li>
<li><p><code>Sal列</code>が奇数の<code>Ind列</code>の行</p></li>
<li><p><code>Ind列</code>が<code>Info</code>,<code>Edu</code>,<code>Med</code>のいずれかで,<code>Sal列</code>が<code>4000以上5000未満</code>の<code>Sal列</code></p></li>
</ol>
</div>
<h3 data-number="6.3" id="値の変更"><span class="header-section-number">6.3</span> 値の変更</h3>
<p>DataFrameでは選択したセルなどに<code>=</code>を利用して代入することで,値の更新が可能です.
以下のコードで,どの部分が変更されているか,コードと結果の対応関係を見てみましょう.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>df.at[<span class="dv">1</span>,<span class="st">'Sal'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>              <span class="ex">Ind</span>   Sal</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    Construction  4503</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing  4756</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>       Wholesale  3186</span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation  1949</span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>         Finance  5711</span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate  3786</span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>       Transport  3909</span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy  8199</span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>            Info  5337</span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu  3913</span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>            Med  4144</span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other  4239</span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>       Suervice  3086</span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>           AFFC  2190</span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a>              <span class="ex">Ind</span>   Sal</span>
<span id="cb131-17"><a href="#cb131-17" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    Construction  4503</span>
<span id="cb131-18"><a href="#cb131-18" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing     0</span>
<span id="cb131-19"><a href="#cb131-19" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>       Wholesale  3186</span>
<span id="cb131-20"><a href="#cb131-20" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation  1949</span>
<span id="cb131-21"><a href="#cb131-21" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>         Finance  5711</span>
<span id="cb131-22"><a href="#cb131-22" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate  3786</span>
<span id="cb131-23"><a href="#cb131-23" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>       Transport  3909</span>
<span id="cb131-24"><a href="#cb131-24" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy  8199</span>
<span id="cb131-25"><a href="#cb131-25" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>            Info  5337</span>
<span id="cb131-26"><a href="#cb131-26" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu  3913</span>
<span id="cb131-27"><a href="#cb131-27" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>            Med  4144</span>
<span id="cb131-28"><a href="#cb131-28" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other  4239</span>
<span id="cb131-29"><a href="#cb131-29" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>       Suervice  3086</span>
<span id="cb131-30"><a href="#cb131-30" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>           AFFC  2190</span></code></pre></div>
<p>範囲の変更は,同じ形のリストを渡すことで可能です.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co">#範囲の変更</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="dv">3</span>:<span class="dv">5</span>,<span class="st">'Sal'</span>] <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div>
<div class="sourceCode" id="cb133"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>              <span class="ex">Ind</span>   Sal</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    Construction  4503</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing     0</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>       Wholesale  3186</span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation     1</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>         Finance     2</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate     3</span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>       Transport  3909</span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy  8199</span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>            Info  5337</span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu  3913</span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>            Med  4144</span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other  4239</span>
<span id="cb133-14"><a href="#cb133-14" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>       Suervice  3086</span>
<span id="cb133-15"><a href="#cb133-15" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>           AFFC  2190</span></code></pre></div>
<p>リストではなく,単一の値を渡すと一括で変更されます.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co">#一括変更</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="dv">3</span>:<span class="dv">5</span>,<span class="st">'Sal'</span>] <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div>
<div class="sourceCode" id="cb135"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>              <span class="ex">Ind</span>   Sal</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    Construction  4503</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing     0</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>       Wholesale  3186</span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation     4</span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>         Finance     4</span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate     4</span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>       Transport  3909</span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy  8199</span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>            Info  5337</span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu  3913</span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>            Med  4144</span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other  4239</span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>       Suervice  3086</span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>           AFFC  2190</span></code></pre></div>
<div class="warn">
<ul>
<li>配列のコピーと変更</li>
</ul>
<p>リストの節でも説明しましたが,pandasのDataFrameは,別の変数に代入して,そのDataFrameの値を変更すると<strong>元のDataFrameの値も変更されます.</strong></p>
<div class="sourceCode" id="cb136"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'Sal'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df2)</span></code></pre></div>
<p><code>df</code>を<code>df2</code>に代入して,<code>df2</code>の値を変更すると,元の<code>df</code>の値も変更されていることが確認できます.
これは割り当てられるメモリの大きなDataFrameを効率的に利用するための仕様ですが,仕様を理解していないと思わぬ結果となるので注意してください.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>              <span class="ex">Ind</span>  Sal</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    Construction    0</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing    0</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>       Wholesale    0</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation    0</span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>         Finance    0</span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate    0</span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>       Transport    0</span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy    0</span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>            Info    0</span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu    0</span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>            Med    0</span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other    0</span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>       Suervice    0</span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>           AFFC    0</span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a>              <span class="ex">Ind</span>  Sal</span>
<span id="cb137-17"><a href="#cb137-17" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span>    Construction    0</span>
<span id="cb137-18"><a href="#cb137-18" aria-hidden="true" tabindex="-1"></a><span class="ex">1</span>   Manufacturing    0</span>
<span id="cb137-19"><a href="#cb137-19" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span>       Wholesale    0</span>
<span id="cb137-20"><a href="#cb137-20" aria-hidden="true" tabindex="-1"></a><span class="ex">3</span>    Accomodation    0</span>
<span id="cb137-21"><a href="#cb137-21" aria-hidden="true" tabindex="-1"></a><span class="ex">4</span>         Finance    0</span>
<span id="cb137-22"><a href="#cb137-22" aria-hidden="true" tabindex="-1"></a><span class="ex">5</span>     Real Estate    0</span>
<span id="cb137-23"><a href="#cb137-23" aria-hidden="true" tabindex="-1"></a><span class="ex">6</span>       Transport    0</span>
<span id="cb137-24"><a href="#cb137-24" aria-hidden="true" tabindex="-1"></a><span class="ex">7</span>          Energy    0</span>
<span id="cb137-25"><a href="#cb137-25" aria-hidden="true" tabindex="-1"></a><span class="ex">8</span>            Info    0</span>
<span id="cb137-26"><a href="#cb137-26" aria-hidden="true" tabindex="-1"></a><span class="ex">9</span>             Edu    0</span>
<span id="cb137-27"><a href="#cb137-27" aria-hidden="true" tabindex="-1"></a><span class="ex">10</span>            Med    0</span>
<span id="cb137-28"><a href="#cb137-28" aria-hidden="true" tabindex="-1"></a><span class="ex">11</span>          Other    0</span>
<span id="cb137-29"><a href="#cb137-29" aria-hidden="true" tabindex="-1"></a><span class="ex">12</span>       Suervice    0</span>
<span id="cb137-30"><a href="#cb137-30" aria-hidden="true" tabindex="-1"></a><span class="ex">13</span>           AFFC    0</span></code></pre></div>
<p>大きなデータを扱う際に,部分的に抜き出したデータに編集を加えて,元のデータを変更したくない場合があります.そのような場合には,<code>.copy()</code>メソッドを利用します.<code>.copy()</code>メソッドを利用することで,元のデータとは異なるメモリが割り当てられます.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode py"><code class="sourceCode python"></code></pre></div>
<p>実行結果</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode sh"><code class="sourceCode bash"></code></pre></div>
</div>
<h3 data-number="6.4" id="dataframeの作成"><span class="header-section-number">6.4</span> DataFrameの作成</h3>
<h3 data-number="6.5" id="データ型の変更"><span class="header-section-number">6.5</span> データ型の変更</h3>
<h3 data-number="6.6" id="データの削除"><span class="header-section-number">6.6</span> データの削除</h3>
<h3 data-number="6.7" id="データの追加"><span class="header-section-number">6.7</span> データの追加</h3>
<h3 data-number="6.8" id="データの確認"><span class="header-section-number">6.8</span> データの確認</h3>
<h3 data-number="6.9" id="欠損値の処理"><span class="header-section-number">6.9</span> 欠損値の処理</h3>
<h3 data-number="6.10" id="データの保存"><span class="header-section-number">6.10</span> データの保存</h3>
<p>BOM付きでの保存 <code>utf-8-sig</code></p>
<p>例えば連続した数値のようなデータを扱うために,先に習ったリストを利用するのはあまり適切ではありません. 大きなテーブル型のデータを高速に利用するためにpandasの提供するデータ型として,<code>DataFrame</code>があります.</p>
</details>
<h2 data-number="7" id="pythonの基本構文執筆中"><span class="header-section-number">7</span> Pythonの基本構文(執筆中)</h2>
<details>
<summary>
開く/閉じる
</summary>
<p>データを適切に処理するためには,これまで扱ったpandasの技法だけでは足りません.ライブラリに含まれていない処理をPythonで自分で記述する必要があります.</p>
<p>Pythonで処理を記述するためにはそのための<strong>構文</strong>を学習する必要があります.</p>
<h3 data-number="7.1" id="アルゴリズムとは"><span class="header-section-number">7.1</span> アルゴリズムとは</h3>
<h3 data-number="7.2" id="インデントとブロック"><span class="header-section-number">7.2</span> インデントとブロック</h3>
<p>pythonは手続き型言語なので,基本的に上から1行ずつプログラムが実行されます. これによってアルゴリズムの構成要素における逐次処理が実現されています.</p>
<p>これまでにこの講義で扱ってきたプログラムは,基本的に1行に1処理を記述しており,処理は上から1行ずつ実行されていました.</p>
<p>しかし,プログラムがより複雑になると,一つの処理が1行では記述できなくなってきます. そこで,プログラムの中で<strong>処理の塊</strong>を作って,その処理の塊を順番に実行していくことになります. Pythonではこの処理の塊を<code>ブロック</code>と呼び,<code>インデント</code>によって表現します.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sample():</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'sample'</span>)</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="co">####</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="co">#↑def のブロックをインデントで表現</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>    total <span class="op">+=</span> i</span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(total)</span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a><span class="co">####</span></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a><span class="co">#↑forのブロックをインデントで表現</span></span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb140-18"><a href="#cb140-18" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(i<span class="op">*</span>j)</span>
<span id="cb140-19"><a href="#cb140-19" aria-hidden="true" tabindex="-1"></a><span class="co">####</span></span>
<span id="cb140-20"><a href="#cb140-20" aria-hidden="true" tabindex="-1"></a><span class="co">########</span></span>
<span id="cb140-21"><a href="#cb140-21" aria-hidden="true" tabindex="-1"></a><span class="co">#↑ インデントの中でインデントを使って</span></span>
<span id="cb140-22"><a href="#cb140-22" aria-hidden="true" tabindex="-1"></a><span class="co"># ブロックの中のブロックを表現</span></span></code></pre></div>
<p><code>インデント</code>は,パワーポイントと同様に,行頭からの空白を意味します.<code>半角スペース4つ</code>が一つの単位となります. <code>TABキー</code>で入力される<code>TAB</code>をインデントとして利用することもできますが,プログラム中にタブとスペースが混在することになり編集が複雑になるので推奨しません.</p>
<p>しかし,いちいちスペースキーを4回テキストエディタで入力するのは面倒なので,
テキストエディタの設定でタブをスペース4つに変換するように設定しておくと楽です.</p>
<p>Sublime Textでは, <code>View &gt; Indentation &gt; Indent Using Spaces</code> をクリックして, <code>TAB Width: 4</code>を選択すると,自動でタブがスペースになります.</p>
<figure>
<img src="../images/tab-to-spaces.png" alt="TAB to Spaces" />
<figcaption aria-hidden="true">TAB to Spaces</figcaption>
</figure>
<h3 data-number="7.3" id="分岐"><span class="header-section-number">7.3</span> 分岐</h3>
<p>0/1や空白の判定について</p>
<h3 data-number="7.4" id="繰り返し"><span class="header-section-number">7.4</span> 繰り返し</h3>
<h4 data-number="7.4.1" id="for文"><span class="header-section-number">7.4.1</span> for文</h4>
<h4 data-number="7.4.2" id="while文"><span class="header-section-number">7.4.2</span> While文</h4>
<p>リストの判定について</p>
<h3 data-number="7.5" id="関数-執筆中"><span class="header-section-number">7.5</span> 関数 (執筆中)</h3>
<p>平均値には,用途に応じて,算術平均,幾何平均,調和平均などがあります.
𝑛個の観測値 𝑥_1, 𝑥_2, …, 𝑥_𝑛があるとき
算術平均: 𝑥 ̅ =1/𝑛 (𝑥_1+ …+𝑥_𝑛 )</p>
<p>幾何平均: 𝑥_G=√(𝑛&amp;𝑥_1∙𝑥_2∙ …∙𝑥_𝑛 )</p>
<p>調和平均 :𝑥_H=𝑛/(1/𝑥_1 +…+1/𝑥_𝑛 )</p>
<p>それぞれの平均値の用途を調べてください.
3個程度の変数を作成し,それぞれの算術平均,幾何平均,調和平均を計算してください,</p>
<p>For文のところでリスト内包表記</p>
</details>
<h2 data-number="8" id="データの可視化"><span class="header-section-number">8</span> データの可視化</h2>
<details>
<summary>
開く/閉じる
</summary>
</details>
<h2 data-number="9" id="一般化線形モデル執筆中"><span class="header-section-number">9</span> 一般化線形モデル(執筆中)</h2>
<details>
<summary>
開く/閉じる
</summary>
</details>
<p>yakagika</p>



    <div style="clear: both"></div>

    <div id="footer">
        Site proudly generated by
        <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
    </div>
</div>

        <!-- GUID -->
        <div style="display: none">ce0f13b2-4a83-4c1c-b2b9-b6d18f4ee6d2</div>
        
        <!-- KaTeX JavaScript and auto-render extension -->
        <script>
          document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
              delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "\[", right: "\]", display: true},
                {left: "$", right: "$", display: false} // インライン数式用のデリミタを追加
              ]
            });
          });
        </script>
        
    </body>
</html>
