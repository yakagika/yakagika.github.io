---
title: 特別講義(データサイエンス)
description: 資料
tags: datascience, lecture, statistics, python
featured: true
tableOfContents: true
---


特別講義(データサイエンス)の授業資料などを書いてく予定です.
(執筆準備中)

# 第1回 イントロダクション
<details>
    <summary> 開く </summary>

こちらの資料では,授業に必要な技術的な内容に限定して掲載します.
授業概要,授業の注意点,成績等については講義中に別資料で説明します.

この授業では, プログラムの基礎を学習したあとに, 様々なDS(Data Science)の技術を実際に試します.
DSは名前の通り,データを扱います. 現在ではデータは基本的に,電子データとして収集,処理されるため,それらの編集,処理にはプログラムを利用します. プログラミングができないと何もできません.

最終的には,自身で研究のためのプログラムを組んでもらいます.
DSや統計でよく使われる言語は, Python, Julia, R, SPSS, matlab などいくつかありますが, この授業では, 現在世界的に広く使われており,習得も容易なPythonを利用します.

## プログラミング言語の種類

プログラミング言語には沢山の種類がありますが,言語によって機能や得意なことが異なります.

![Langage icons](/images/2024-04-08-lecture-DS-languages.png)


プログラミング言語は **実行方式**, **書き方**,**検査の仕方**などの特徴がそれぞれ異なり,大まかにはそれぞれ以下のような意味になります.

---

**実行方式**

プログラミング言語は,人間にとって理解しやすくデータ構造やアルゴリズムを記述するための手段です.しかし,コンピュータはプログラミング言語を直接理解することはできません.そのため,書かれたプログラムはコンピュータが解釈できる形式,すなわち0と1のビット列である機械語に翻訳される必要があります.この翻訳プロセスは,プログラムの実行方式を以下の二つに分ける要因となります.



::: note
- インタプリタ方式

インタプリタ方式では,プログラムは逐次的に機械語に翻訳されながら実行されます.この方式の特徴は,コンパイルする必要がないため,翻訳と実行が同時に行われる点です.これにより,プログラムの変更がすぐに反映されるため,開発中のテストやデバッグが容易になります.しかし,実行のたびに翻訳を行う必要があるため,実行速度が遅くなることが欠点です.
:::



::: note
- コンパイラ方式

コンパイラ方式では,プログラム全体が事前に機械語に翻訳され,その結果として得られる実行可能なプログラムが生成されます.コンパイラ方式の利点は,一度コンパイルされたプログラムは,何度も実行される際に追加の翻訳が不要であるため,実行速度が速いことです.また,コンパイル時にプログラム全体を分析できるため,エラーやバグの発見が早期に行え,より安全性が高まるという利点があります.
:::

この二つの実行方式は,プログラムの性質や用途に応じて選択されます.インタプリタ方式は開発の柔軟性が求められる場合に適しており,コンパイラ方式は性能が重視される場合に好まれます.プログラマはこれらの特性を理解し,それぞれの場面で最適な選択をすることが求められます.

---


**書き方**

プログラミングとは,基本的にコンピュータに対して実行してほしい命令を記述する作業です.現在主流のプログラミング言語には,大まかに**手続き型言語**と**関数型言語**の二つの記述方法が存在します.

::: note

- 手続き型言語

この言語タイプでは,プログラムが｢何を,どうするか｣を順番に記述していきます. Python,Java,VBAなど多くの広く使われている言語がこの方法を採用しています. これにより,処理の流れが直観的に理解しやすくなります.

:::

::: note

- 関数型言語

関数型言語では,プログラムを実行によってユーザーが得たい結果を抽象化し,関数の組み合わせで記述します.このアプローチは,安全性の向上やデバッグのしやすさといったメリットを提供しますが. 概念の抽象化により理解が難しくなることがあります.

:::

近年では,手続き型言語にも関数型の構文が取り入れられるようになり,手続き型言語内で関数型風に記述することや,その逆も可能になっています.

これらの違いについて更に詳しく知りたい方は,別の[講義資料](/lectures/2024-03-29-introduction-to-algebraic-programing.html)で更に詳しく説明しています.

---

**検査の仕方**

プログラミングは,データ構造とアルゴリズムを使用して命令を記述する作業です.ここではデータ型の詳細に深くは触れませんが,あらゆるプログラミング言語において,データはコンピュータのメモリ上に数値の羅列として存在します.それらの数値に意味を与えることでデータ型が形成されます.

プログラムは実行時に,これらのデータ型が適切に使用されているかを検査します.主な検査方法には**動的型付け**と**静的型付け**があります.動的型付けでは,プログラムの実行時にデータ型が決定され,静的型付けではコンパイル時にデータ型が固定されます.さらに,型付けには「弱い型付け」と「強い型付け」という区別も存在しますが,この講義ではその詳細には触れません.興味のある方は,このトピックについてさらに調査してみてください.

::: note
- 動的型付け
動的型付けのシステムでは,プログラマが変数の型を明示的に宣言する必要がありません.代わりに,コンピュータはプログラムの実行時に型を推論し,適切な型を自動で割り当てます.この柔軟性により,プログラマはより迅速に開発を進めることが可能になります.一方で,このシステムではコンパイル時の型チェックが行われないため,実行時に型関連のエラーが発生するリスクが高まります.そのため,安全性を確保するためには,プログラマ自身が型の整合性に注意を払い,エラー処理やテストにより問題を検出する必要があります.
:::

::: note
- 静的型付け

静的型付けでは,プログラマが変数や関数の型をコード内で明示的に宣言し,これらはコンパイル時にチェックされます.この事前の型チェックにより,プログラムの安全性が向上し,実行時のエラーが減少します.また,コンパイラが型情報を利用して効率的なコード生成を行い,パフォーマンスが向上することがあります.静的型付けは特に,大規模プロジェクトや高い信頼性が求められる場合に適しています.

:::

---

プログラミング言語は,このような区分や,それ以外の様々な機能によって,用途の向き不向きが決まります(大雑把な目安です).

![Languages and usages](/images/2024-04-08-language-and-purpose.png)

ではこれらの特徴を踏まえて,Pythonとはどのような言語なのかを見てみましょう.

::: note
Pythonは

    - インタプリタ型言語で
        - 機械語に翻訳しながら動く
        - 手軽に書けて手軽に試せる
        - でも少し安全性が低く,遅い

    - 手続き型言語で
        - 次に何をするかを順番に書く
        - (ただし関数型っぽい書き方もできる)

    - 動的型付け言語で
        - 型検査を動かしながら実施
        - 動かしてから型が違うと失敗する
:::

これらは,プログラミング言語の大きな分類からみたPythonですが, Python固有の特徴として以下のようなものがあります.


::: note

    - とにかく読みやすく書きやすく覚えやすい
        - ABC言語という教育用言語が元になっている
            - 予約語が少ない,      → 覚えることが少ない
            - インデントでかき分け → 間違いが少ない
            - だれが書いても同じになる(と言われてはいる)

    - ライブラリが豊富
        - 統計処理を全部0から自分で書くのは大変
        - 他の人が作ったものを使えるようにするのがライブラリ
        - 様々な大学や企業,研究者が膨大な量の統計処理,機械学習ライブラリを開発している

    - 遅いけど,Cなどと連携しやすい.
        - プログラミング言語ごとに速度は異なる.
        - Pythonは結構遅いので大きな計算に時間がかかる.
            - とても早い言語で遅い部分を書き換えやすい
            - ライブラリは基本的に早くなっている
:::

Pythonが教育用に良く使われるのは, インタプリタ方式の動的型付け言語であることから手軽に書けるだけではなく,もともと言語として簡単に書けるように作られていることが大きいです.

また, 統計,データサイエンス分野のライブラリが充実しており, これによって誰でも簡単に複雑な統計処理やデータサイエンスの技法が利用できることで,Pythonが広く普及しています.

簡単 → 教育用に → 多くの人が使う → ライブラリが充実 → もっと多くの人が使う

という流れがPythonの最大の強みと言えるでしょう.

実際にPythonはユーザー数が増え続けており,プログラムの共有サイトGitHubにおける2023年のすべての言語のなかで2番目にユーザ数が多い言語となっています.
[Top 10 Programming languages on GitHub](https://github.blog/2023-11-08-the-state-of-open-source-and-ai/)

![Top 10 Programming languages on GitHub](/images/top-programming-languages-2023.png)


## 授業準備

この講義では,プログラムを自分で作成し,様々な演習をこなしてもらいますが,その前段階として,いくつかの準備が必要となります. このあたりはこの科目の先修科目の統計学入門でも扱っていますが,履修していない人もいますので,順番にやっていきましょう. 非常に基礎的な内容なので, 問題のない人は飛ばしましょう.

### テキストエディタ

テキストエディタとは,プログラムを書くためのソフトウェアです.
プログラムを書くことをコーディング(Coding)といいます.

テキストエディタには沢山の種類があり,それぞれ独自の機能を持っています.
Windwosに最初から入っている｢メモ帳｣もテキストエディタですが,プログラムを書くために様々な機能が追加された高機能なテキストエディタも沢山あります.

例えば,シンタックスハイライト機能は,以下のプログラムのように,プログラムの記述を役割や意味に応じて色付けして見やすくしてくれます.

~~~ python
## シンタックスハイライト
from datetime import datetime

def greet_based_on_time():
    now = datetime.now()
    current_hour = now.hour

    if 5 <= current_hour < 12:
        greeting = "Good morning, world!"
    elif 12 <= current_hour < 18:
        greeting = "Good afternoon, world!"
    else:
        greeting = "Good night, world!"

    return greeting

# 関数を呼び出して結果を表示
print(greet_based_on_time())
~~~


また,スペースをタブに変換するなどの機能も非常に便利です. 最近では生成AIを利用した自動補完機能がついたエディタなどもありますが,本講義における生成AIの利用に関しては第2回でコードを書き始めた際に説明します.

今までメモ帳以外のテキストエディタを利用したことが無い方には,シンプルなSublime Text 3をおすすめします(今世界的に人気があるのは VSCodeです.非常に便利ですが機能が多すぎて皆さんが混乱する可能性があるので,こちらを選びました).

既に何かしらのテキストエディタを利用している方は,現在使用しているエディタをそのまま利用して頂いても構いません.

[このURL](https://www.sublimetext.com/3)をクリックして,ページ上部にあるDownloadをクリックします. 自分のPCに合わせたインストール方法を選択しましょう.

![Screenshot Sublime Text](/images/2024-04-08-lecture-DS-sublime-install.png)

::: warn
SublimeTextもいろいろな機能を追加することができます.
｢SublimeText 設定｣などで調べて,好きなようにカスタマイズして構い舞いません.
カスタマイズをしなくても基本的な機能には問題ありません.
:::



## IMEの設定

プログラムは基本的に **｢半角英数字｣** で記述されます. プログラム中に全角の空白や記号が交じるとエラーの原因となる場合があります. そのため,プログラムを書く前に,そういったミスが起きないようにIMEの設定をしましょう.

タスクトレーからIMEの設定ができます．基本的に記号をすべて半角に設定しましょう（スペースは必ず半角にしましょう）．特に，句読点をコンマとピリオドに変更しましょう．

![IME](/images/2024-04-08-lecture-DS-IME.png)

## CLIの基本操作

プログラムの開発環境にはマウスなどでクリックして操作するGUI(Graphical User Interface)をもったIDE(Integrated Development Environment)などもありますが,基本的には文字によってコンピュータに命令を送るCLI(Command Line Interface)を利用します. 映画やマンガなどで,ハッカーが黒い画面に文字を打っているあれのことです.

コンピュータのオペレーティングシステムとユーザー間のCLIを提供するプログラムをShellといい,Windowsでは,Command PromptやPowerShellなどがあります. MacなどのUnix系では,Bashやzshがあります. いずれも (Windows) Terminalというソフトウェアを介して利用します.

本講義では環境や好みによって好きな環境で開発して構いませんが,ここでは,PowerShellの利用法を解説します.

Windows11の検索バーで `Terminal`と検索して,出てきた `Terminal`をクリックしましょう.

![Screenshot Terminal](/images/Terminal-launch.png)

自動的に`Windows PowerShell`が起動します. 立ち上がった,黒色の画面に文字でコマンド(命令)を入力して,コンピュータを操作します.

![Screenshot Terminal](/images/Terminal-window.png)


### エンコーディング

実際にコマンドを入力する前に, 初心者がつまづきやすいポイントとして,Windowsのエンコーディングについて解説します.

PCは人間の使う文字（日本語，英語など）が理解できません.PCは機械語と呼ばれる言語で命令を受け付けます.一方で,人間は機械語を読むのが困難です.そこで,人間の使う文字と,機械語の間に変換ルールを設けて人間の文字でされた命令をPCにわかる文字に変換します.この変換ルールを文字エンコーディングと呼びます.

エンコーディングには複数の種類があります(日本語設定のWindowsはShift-JIS,Unix系はUnicodeが一般的です).
PythonはUTF-8という文字エンコーディングがデフォルトなので,Windowsにおいても可能な限りUTF-8を用いた方が良いです.

そこで,ターミナル上で利用するエンコーディングを変更します.
PowerShellを起動して, `chcp 65001` と打ち込み, PowerShell上で利用する文字エンコーディングをUTF-8に変更しましょう. `chcp`が利用する文字コードを変更するコマンド(change code page)で,その後に変更したい文字コードを入力します. `65001`は`UTF-8`のコードページ(Windows独自の文字エンコーディング)です. これはPowerShellを起動する度に行ってください．

~~~ sh
chcp 65001
~~~

と入力すると,

~~~ sh
Active code page: 65001
PS C:\Users\user>
~~~
のように表示されるはずです.

### 日本語表示

Power Shellの設定によっては日本語が表示されず,日本語部分が `□` で置き換えられて表示されます.これは,使用しているフォントに日本語が含まれていないために発生します.


![Screenshot PowerShell](/images/powershell-tofu.png)


設定を変更してて日本語を表示可能にしましょう(
適当な日本語を入力してみて,問題なく表示されるようであれば,変更は必要ありません).

左上の`下向きの矢印 > 既定値 > 外観 > フォントフェイス`の部分を日本語フォントに変更し`保存`をクリックすることで,日本語が表示されるようになります.

![Screenshot Terminal](/images/Terminal-setting1.png)

![Screenshot Terminal](/images/Terminal-setting2.png)

![Screenshot Terminal](/images/Terminal-setting3.png)

その他色やサイズなど,好きな設定に変更できます. あとで,好みにカスタマイズしましょう.

### ディレクトリ

基礎的なコマンドを学ぶ前に,ディレクトリに関して理解しておきましょう.
コンピュータの中のデータは,以下のような木構造になっています. このような木構造によるファイルの構造をディレクトリといいます.

~~~
C: -- Users -- hoge
          |
            -- hoge2 -- Desktop
                   |
                     -- Downloads
                   |
                     -- Documents -- huga
                                |
                                  -- huga2
~~~


CLIにおいて,ユーザはこの木構造のどこかに存在しており,この木構造を移動しながら様々な作業を行います. 現在いるディレクトリのことを `working directory`(以下wd)や`current directory`といいます.


## 基礎的なコマンド

ここでは, この講義で必要となる最低限のコマンド,特にディレクトリの移動に関するコマンドを学習します.

wdは, CLIの左側に表示されていることが多いです.

~~~ sh
PS C:/Users/hoge2>
~~~

のように表示されていれば今`C:`ドライブ下の`Users`下の`hoge2`がwdとなります.

::: warn

- Windowsでは,ディレクトリを区切る文字が`¥`あるいは`\`で表示されていると思います.

- Macでは,`/`です.

本資料では,`¥`を表示するのが ~~ダルい~~ 技術的に難しいので`/`を利用しています. 自分の環境に併せて適宜読み替えてください.
:::

CLIの左側に表示されていない場合にも`pwd`コマンド (print working directory)を入力すると,現在のディレクトリが表示されます.

~~~ sh
PS C:/Users/hoge2> pwd

PATH
----
C:/Users/hoge2
~~~

wdの下に何があるかを調べるコマンドとして`ls`コマンド(list)があります.

::: warn
以下, `PS C:\Users\hoge2`の部分は省略します.
:::

~~~ sh
> ls

Desktop
Downloads
Documents
~~~

※実際の画面では,もう少しいろいろな情報が書かれているかと思います.

wdから別のディレクトリに移動するコマンドとして `cd` コマンド(change directory)があります

`cd [移動先]` と打つことで,lsコマンドで出てきた,ディレクトリに移動することができます.

~~~ sh
> ls
Desktop
Downloads
Documents

> cd Documents
> pwd
PS C:/Users/hoge2/Documents
~~~

::: warn

移動先のディレクトリ名はすべて自分で入力する必要はありません. 最初の数文字を入力して`Tab` Keyを押すと,自動で保管してくれます.

:::


`cd ..` と打つと一つ前のディレクトリ,`cd ~`と打つとホームディレクトリ(基本的には最初に開いた際にいた場所)に一挙に移動することができます.

~~~ sh
> pwd
PS C:/Users/hoge2/Documents
> cd ..
> pwd
PS C:/Users/hoge2
> cd Documents/huga
> pwd
PS C:/Users/hoge2/huga
> cd ~
> pwd
PS C:/Users/hoge2
~~~

`mkdir [作りたいディレクトリ名]` コマンド(make directory)で,新しいディレクトリを作成できます.

`rmdir [消したいディレクトリ名]` コマンド(remove directory)で,ディレクトリを消すことができます.

~~~ sh
> pwd
PS C:/Users/hoge2
> ls
Desktop
Downloads
Documents
> cd Documents
> ls
huga
huga2
> mkdir huga3
> ls
huga
huga2
huga3
> rmdir huga3
> ls
huga
huga2
~~~

`rmdir` コマンドでは中身のあるディレクトリは消せません. オプションを追加することで消せますが,危険なのでここでは教えません.興味があったら自分で調べてみましょう.

::: note
**練習:作業用ディレクトリを作ろう**

- これから,作業をするためのディレクトリをコマンドで作成しましょう.

    - Documentsに移動
    - Programs というディレクトリを作成し移動
    - Python というディレクトリを作成し移動
    - slds というディレクトリを作成し移動
    (名前は好きに設定して良いです. slds; special lecture data science)

これからこの講義で利用するプログラムなどはsldsに保存しましょう.
:::


## 環境構築

自身の環境(PC)でプログラムが動くようにすることを環境構築といいます. Python自分のPCで動くように設定をしましょう.

Pythonの環境構築に関して説明します.Pythonを動かす方法は沢山あります.一つのソフトの中でプログラムの編集から実行まで全て完結するIDE(統合開発環境)やブラウザ上で実行する方法もありますが,ここではCLIを利用して実行する方法を準備します.Windowsを所有している学生が多いと思われるので,Windowsを前提に説明します. それ以外のOSの方は分からなければ教員に聞いて下さい.

Pythonの[公式サイト](https://www.python.org/downloads/windows/)からPythonをダウンロードしましょう.

Windows → 最新の一つ前のバージョンの Windows installer (64-bit) をクリック

最新版を入れたいところですが,一番上のVersionは色々と不具合が起きる可能性があるので,上から2つ目のVersionにしておきましょう(バージョンの数字は,サイトを開いた時期によって変わります.)

![Download Python](/images/python-download.png)

ダウンロードした Python-3.12.1.exeをクリックするとウィンドウが開きます. 指示に従ってインストールしましょう．

::: warn
注意点

開いたWindowで

-  `Insatall launcher for all users(recommended)`

- `Add Python 12.1 to PATH`

というチェックボックスが出てきたら,それらにチェックを入れてから次に進みましょう.

この画面もVersionなどによって変わるため,分からなければ教員に聞いて下さい.

![Install Python](/images/install-python.png)

:::

インストールが終わったら **新しくPowerShellを開いて** `python --version` と入力しましょう.
**Macの人は** `python3 --version` とコマンドが変わりますので注意してください. Macの人は以降,`python` コマンドはすべて  `python3` コマンドに読み替えてください.

install したversionのPythonが表示されれば無事インストールされています.



~~~ sh
> python --version
Python 3.12.1
~~~

## Hello World

初めて作成するプログラムとして標準出力(PowerShellなどの画面)に`Hello World`と出力するだけのプログラムを作成してみます.

`PowerShell`を開いて,自分の作業用ディレクトリに移動します.

~~~ sh
> chcp 65001
> cd Documents/Programs/Python/slds
~~~


テキストエディタで新しいファイルを開き,**作業用ディレクトリ**に`hello.py`という名前で保存しましょう.

`.py`はPythonプログラムの拡張子です.

保存は,タブから`File > save with encoding > UTF-8`の順にクリックし`UTF-8`で保存しましょう.
それ以降は `Ctrl + s`などで上書き保存しても構いません.


作成したディレクトリに移動し, lsコマンドでファイルがあるか確認しましょう.
ょう.

~~~ sh
> ls
hello.py
~~~

確認できたらhello.pyに以下の2行を書き足して上書き保存します.

~~~ python
# -*- coding:utf-8 -*-
print(“Hello world!”)
~~~

保存できたら`python hello.py`コマンドでプログラムを実行します.
(Macの人は `python3 hello.py`です.)

標準出力に`Hello World!`と表示されれば成功です.

~~~ sh
> python hello.py
Hello World!
~~~

ここまでで，皆さんはPCでプログラムを書く準備が整いました．
あとはプログラムの書き方を学習すれば自身の環境で開発が行なえます．

## プログラミングの勉強の仕方

プログラミング言語は,文字通り**言語**です. 英語などと同じ様に,使わないと身につきません.なので,大事なことは**勉強するより使う**ことです.

英語の勉強で,一つひとつ文法を覚えることは大切かもしれませんが,実際に英文を書いたり,会話しないと使えるようにはなりません. プログラミングの学習で,学習用の資料や教科書を一つ一つ**読んだり,ノートに書き写す人**がたまにいますが,かなり効率が悪い方法です. 何も分からなくてもいいので,取り敢えずプログラムを書いて実行するようにしましょう. 資料に載っている例はすべて,実際に書いて実行してみましょう.

一番いい方法は,何も分からなくても取り敢えず,プログラムをつかってしてみたいことを実行することです.1からすべての構文などを覚えようとしないで,自分がやりたい,しなければならないことを,書き始めましょう. **分からないところだけを**調べれば十分です.

その際に,新しく知ったことは,メモなどして,あとで参照できるようにしておきましょう. その資料が後々役に立ちます.

プログラミングは,すべて暗記する必要はありません. 覚えていなくても,それの調べ方や載っている資料を知っていれば十分です. 何回も使う機能であれば自然に覚えます.

**ただし,** Pythonは非常に多くの人が利用しているので,みなさんがこの講義で習うレベルのことは検索すれば既に,完成したプログラムを参考にすることができます. また,ChatGPTなどの生成AIを利用すれば,皆さんの書いたプログラムよりかなりできの良いものをすぐに得ることができます. それらを見て勉強することは大切ですが,ただ,只管コピペしたり,生成AIの結果を利用しているだけでは,全く身につきません. 検索して出てきたコードや,生成AIによるコードを利用しても構いませんが, それをただ貼り付けるのではなく,**自分で読んで,理解する**ようにしましょう.

知らない部分,自分では書けない部分が見つかったらそれを理解するように勉強しましょう. ChatGPTに質問しても構いません. ただ,聞いたことを説明できるようにしましょう.

自分で説明できないものを使えるのは**せいぜい学校の課題くらいです**. 仕事や研究では,中身の良く分からないコードは利用できません. 最低限自分で理解したものだけを利用してください.

講義では,結果があっていればよいだけではなく,**なぜそのように書いたのか**,**どのような意味か**,**なぜこうなるのか**などを皆さんに聞きますので,理解に務めるようにしましょう.





::: note

**演習**

- <u>演習1 Shellコマンドの調査</u>

今回ならったいくつかのコマンド以外にも便利なコマンドが沢山あります. 3つ調べて,使い方を説明してください.

- <u>演習2 チートシートの作成</u>

チートシートとは「それだけを見れば必要な情報が分かるメモ書き」のことです.
プログラミングの学習では, 自分でノートを取って,それさえ見ればなんとかできる資料を作る のは非常に有用です.

`.ppt`でも`.txt`でも形態は何でも良いので, 自分だけのチートシートを作成して, 今日覚えたこと,調べたことなどをメモしていきましょう.

◦ CLI, Pythonの基礎, Pandasなど学習の区切りごとにシートを分けると便利です.

◦ スライドサイズを事前に大きく設定しておくと便利です

書き方は自由ですが, [検索して](https://www.google.com/search?newwindow=1&client=safari&sca_esv=635483f0705dd420&sca_upv=1&q=python+%E3%83%81%E3%83%BC%E3%83%88%E3%82%B7%E3%83%BC%E3%83%88&uds=AMwkrPtd7EXxieMQKehnHvZf8S6pNpVcJzQvmfSMfustdt5GVU4paqDezVS1KwRLLfnWdTPfRKqI2vio1swnpAMe65pQfFGqsLrhLm9FBruViqbu8gs83egRP5pID9cAUWbOoFAII8Bi4Sa9pC2nZB8uNY_Im_IVhSc-ISQJazoPJyS7Y5hq8j_wtxEDwusT0kav7Mhx_On2phc8rZKZ0rWb3f5AykS1iJlyMqAYBs5Ke8QgUSIasP6AkeP9P6DIKWQaXCglNYTRDcA_cLO0qv_MU45G2ng9BfipwmjcaL4l2EsY-TdRRazsTUowT__BAUHIv2lsEG32&udm=2&prmd=ivsnmbtz&sa=X&ved=2ahUKEwiA48qB-bOFAxU3aPUHHYJmBQsQtKgLegQICRAB&biw=1147&bih=1269&dpr=1)有名なチートシートを参考にしてください.

このチートシートは後で紹介してもらいます.

- <u>演習3 `print()`の利用</u>

今回作成した`hello.py`における
`print()` という関数は()内の文字(`""`で囲われている部分)を標準出力する関数です.
`print()`の括弧内の `Hello World!` 部分を好きな文字に書き換えて実行してみましょう.

:::


</details>

# 第2回 Pythonの基礎

<details open>
    <summary> 開く </summary>



第2回では,Pythonの基礎の基礎を学習します.
本講義はプログラミング自体の学習を対象としているわけではないので,
講義内で必要な技能を紹介するのみに留めます.

基本的には,公式の[Pythonチュートリアル](https://docs.python.org/ja/3/tutorial/index.html)の内容で必要十分ですので,そちらにそって学習を進めます.
より詳しい内容を勉強したい場合には,プログラミングの講義を履修するか,
[千葉商科大学IEEESB](http://cucieee.stars.ne.jp/index.html)
などに参加するのが良いかと思います.

今回は取り敢えず,以下の作業を自分で行いながら,Pythonの体験をしてみましょう.

::: warn
生成AIの使用に関して

:::

## REPLを使ってみよう



プログラムの対話環境全般をREPL (Read Eval Print Loop)と呼びます. 長いプログラム(スクリプト)を書かなくても対話的にプログラムを実行することができます.

Pythonには複数のREPLがあり,iPython, jupyternotebook, Google Colaboratoryなどがあります.ここではとりあえず,iPythonを利用します. 他のものについても,後ほど出てきます.

CLI(PowerShellやTerminal)を開いて,`python`(Mac の人はPython3)とだけ打ってEnter Keyを入力するとPythonのREPLが立ち上がります.

~~~ sh
~/Desktop
python3
Python 3.10.11 (v3.10.11:7d4cc5aa85, Apr  4 2023, 19:05:19) [Clang 13.0.0 (clang-1300.0.29.30)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>>
~~~

プログラムを書いてEnter Keyを押すとその行のプログラムが実行されます.

~~~ sh
>>> 1 + 1
2
~~~


終了するには,`exit()`と入力します.

~~~ sh
~/Desktop 1m 7s
Python 3.10.11 (v3.10.11:7d4cc5aa85, Apr  4 2023, 19:05:19) [Clang 13.0.0 (clang-1300.0.29.30)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 1 + 1
2
>>> exit()
~/Desktop 1m 7s
~~~

## コメントアウト

REPL上でもスクリプトでも,\#を先頭につけると,その行はコメントとして扱われます.

ただのコメントであり,プログラムとしては何も実行されません.

~~~ sh
>>> # これはコメント何も起きない
>>>
~~~

## Pythonを電卓として使う

REPLの動きに慣れるために,簡単な計算をREPL上で行いましょう.
簡単な計算に用いる記号は以下のとおりです.


|  計算      | 記号 |
| ------     | ---- |
| 足し算     | `+`  |
| 引き算     | `-`  |
| 掛け算     | `*`  |
| 割り算     | `/`  |
| 整数除算   | `//` |
| 累乗       | `**` |
| 剰余(余り) | `%`  |

実際の計算は以下のようになるはずです.

~~~ sh
>>> # 計算は普通の電卓と同じような感覚で使えます.
>>> # 足し算
>>> 1 + 1
2
>>> # 引き算
>>> 10 - 5
5
>>> # 掛け算
>>> 2 * 3
6
>>> # 割り算
>>> 100 / 5
20.0
>>> # 整数除算
>>> 6 / 4
>>> 1.0
>>> # カッコも使えます
>>> (50 - 5 * 6) / 4
5.0
>>> 50 - 5 * 6 / 4
42.5
>>> # 剰余(余り)
>>> 17 % 3
2
>>> 5 * 3 + 2
17
>>> # 累乗
>>> 2 ** 2
4
>>> 2 ** 3
8
~~~

### 練習問題

以下の計算をREPLを使って自分でしてみましょう.
Pythonの計算になれることが目的ですので,どのように計算したかを説明できるようにしましょう.

- 飴が40個あります.7人で同じ数ずつ分けると1人分は何個で何個あまりますか?

- 底辺5cm,高さ4cmの三角形の面積はいくつですか?

- 変数を利用して以下の猫型ロボットのBMIを計算してください
    - BMI = [体重(kg)]÷[身長(m)の2乗]
    - 猫型ロボットの身長 129.3cm
    - 猫型ロボットの体重 129.3kg


## 変数と代入



値に名前をつけることを`代入`といい,名前のついた値を`変数`といいます. `=` の左側に付けたい名前,右側に値を書きます.

プログラムでは,データはコンピュータの記憶領域(メモリ)に格納されています. メモリは,1バイト(8bit, 1bit は0/1の値)ごとにアドレスという連番がついています.


![memory null](/images/memory-null.png)

~~~ sh
>>> x = 10
~~~

変数を宣言するということは,このアドレスにデータを割り当てることを意味します.
`x = 10`という変数が4バイト利用するとしたら以下のようにアドレス 201 から204 に 10という数字(int)を割り当てるイメージです.

![memory 10](/images/memory-10.png)

`x`のアドレスは`id(x)`で確認できます.

~~~ sh
>>> id(x)
4438639120
~~~

`y = x` と変数に別の名前を宣言する場合は,同じ場所が参照されます.

~~~ sh
>>> y = x
>>> id(x)
4438639120
>>> id(y)
4438639120
~~~

![memory 10](/images/memory-10y.png)

`x=15`と再度代入する(再代入)と,新しくメモリが確保されます.
その際に,`x`をコピーしていた`y`の値も変わることに注意しましょう.

~~~ sh
>>> x = 15
>>> id(x)
4438639280
>>> id(y)
4438639280
~~~

![memory 15](/images/memory-15.png)

数値の場合には`y`に再代入しても,`x`の値は変わりません.

~~~ sh
>>> x = 10
>>> y = x
>>> id(x)
4438639120
>>> id(y)
4438639120
>>> y = 15
>>> y
15
>>> x
10
>>> id(x)
4438639120
>>> id(y)
4438639280
~~~

この挙動は,後に出てくる配列では,異なるので注意が必要です.


::: note
変数に名前をつける際には,以下の点に注意しましょう.

- 小文字で始まる英数字を使う

- 複数の単語を使うときは`_`(アンダーバー)でつなげる

- 英語で名前をつける
    - `nagasa` ではなく `length`
    - `namae` ではなく `name`

- 長くなっても良いので他の人が見たときに意味がわかる名前をつける
    - 三角形の高さを表したいとして
        - `x`や`h`などの一文字よりも
        - `height`のほうが良い
        - 他にも高さを表す変数が登場するなら
        `triangle_height`のほうがより分かりやすい

~~~ sh
>>> # 長方形の面積を求める
>>> width = 20
>>> height = 5
>>> area = width * height
>>> area
900
>>> #定義されていないものはエラーがでます
>>> space
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
NameError: name 'space' is not defined
~~~

:::


### 代入演算子

代入は`=`でつなげる以外にもいくつかのパターンがあります.
まずは,普通に変数に数値を代入してみます.

~~~ sh
>>> x = 1
>>> x
1
>>> x = 2
>>> x
2
~~~

このように具体的な値を`=`の右側に記入するのは直感的に分かりやすいのですが,pythonのプログラムを見ていると,左右に同じ変数名が登場する場合があります.

~~~ sh
>>> x = 1
>>> x = x + 1
>>> x
2
~~~

これは,**右側に登場する**`x`は過去の`x`を表しており,**左側に登場する**`x`は,過去の`x`を利用して作られた新しい`x`であると解釈しましょう.

上の例では,`x=1`という過去の変数を使って, `x(=1) + 1`という新しい`x`を作っています.
これは**自己代入**と呼ばれ,数学や関数型言語における**再帰**とは異なり,手続き型言語独特の記法なので注意しましょう.

足し算`+`を使った自己代入は省略して, `x += 1`のように書けます. これは `x = x + 1`の省略形で**複合代入演算子**といいます.

同様に,引き算`-=`,掛け算 `*=`, 割り算 `/=`などの代入演算子も存在します.

~~~ sh
>>> x = 10
>>> x -= 5
>>> x
5
>>> x *= 5
>>> x
25
>>> x /= 5
>>> x
5
~~~

## 文字列型

ここまでは,数値のみを扱ってきましたが,Pythonには数値以外にもいくつものデータ型が存在します.
次に, 文字を表す`文字列型`の利用法について見ていきましょう.

文字列型は,文字を`""`(ダブルクオーテーション),あるいは`''`(シングルクォーテーション)で囲みます.

~~~ sh
>>> "イヌ"
'イヌ'
>>> 'ネコ'
'ネコ'
~~~

三連引用符`"""`で囲むことで複数行書くことができます.

~~~ sh
>>> """ あ
... い
... う"""
'あ\nい\nう'
~~~

`\n`は改行を表しています.

~~~ sh
>>> print('あ\nい\nう')
あ
い
う
~~~

### 文字列の演算

文字列は`+`で連結,`*`で反復させることができます.

~~~ sh
>>> name = '太郎'
>>> '私は' + name 'です!'
'私は太郎です!'
>>> name * 3
'太郎太郎太郎'
~~~

文字列が代入された変数の後ろに`[]`をつけて,番号を`[]`の中に入れると,指定した番号番目の文字が取得できます. このような`[]`で指定する数字を`index`といいます.

`Python`という文字に対して,indexは以下のように振られています.
`-`をつけて後ろから数えることもできます.

|文字列    |  P    |  y    |  t    |  h    |  o    |  n    |
| :---:    | :---: | :---: | :---: | :---: | :---: | :---: |
|前から    |  0    |  1    |  2    |  3    |  4    |  5    |
|後ろから  |  -6   |  -5   |  -4   |  -3   |  -2   |  -1   |

Pythonの文字列は,最初の文字を`0`番目と数えるので注意しましょう.

~~~ sh
>>> word = 'Python'
>>> word[0]
'P'
>>> word[5]
'n'
>> word[-6]
'p'
~~~

インデックスの`[]`の中で,`[Start:End]`のようにはじめと終わりのインデックスを指定することで,文字列の1文字ではなく,部分的な文字列を取得することもできます. これを**スライス**といいます.

終わりは,一つ手前までになるので注意しましょう.

~~~ sh
>>> word[0:2]
'Py'
>>> word[2:5]
'tho'
~~~

はじめか終わりのインデックスを省略すると,**以降全て**という意味になります.

~~~ sh
>>> word[:4] #0から4まで
'Pyth'
>>> word[2:] #2から最後まで
'thon'
~~~

::: note
**演習**

- 演習1

`'abcdefg'` から `'cde'`をスライスで抜き出してください.

- 演習2

`x = 'abcdefg'`と定義して, xに操作を加えて`'abfg'`を作ってください.

- 演習3

`x = 'abcdefg'`と定義して, xに操作を加えて`'bbbeee'`を作ってください.

:::

## リスト

複数の値をまとめるデータ型の一種に**リスト型**があります. コンマで区切って角括弧の中に複数の値を書くことで,ひとまとまりのデータを作れます.
リストの中身一つ一つを**要素**といいます.

~~~ sh
>>> squares = [1,4,9,16,25]
>>> squares
[1,4,9,16,25]
~~~

リストは文字列と同じ様に,インデックスやスライスで要素を取得できます.

~~~ sh
>>> squares[0]
1
>>> squares[-1]
25
>>> squares[-3:]
[9,16,25]
~~~

### リストの演算

リストも`+`で連結,`*`で反復させることができます.

~~~ sh
>>> [1,2,3] + [4,5,6]
[1,2,3,4,5,6]
>>> [1] * 3
[1,1,1]
>>> [1,2] * 3
[1,2,1,2,1,2]
~~~

リストはインデックスやスライスで指定した要素に値を再代入して変更することができます.

~~~ sh
>>> animal = ['cat','dog','bird']
>>> animal[1] = 'mouse'
>>> animal
['cat','mouse','bird']
>>> animal[1:] = ['fish','pig']
>>> animal
['cat','fish','pig']
~~~

::: warn

リストは,数値などとは**変数に別の名前をつけたときの挙動が異なる**ので注意が必要です.

数値や文字列は,別の名前をつけた変数に再代入した場合もとの変数は,変更されません.

~~~ sh
>>> cat = 'cat'
>>> cute_cat = cat
>>> cute_cat = 'cute_cat'
>>> cat
'cat'
>>> cute_cat
'cute_cat'
~~~

`cute_cat`を変更しても`cat`は変わりません. 代入の説明箇所で見たように,数値などの変数の場合は,`cute_cat`には`cat`の値が渡されており,値が同じ場合には同じアドレスを参照するが,値が変更された場合には,
新しいメモリが確保されます.

しかし,リストは別名の変数を変更すると元の変数の値も変更されます.

~~~ sh
>>> animal = ['cat','fish','pig']
>>> species = animal
>>> species[0] = 'horse'
>>> animal
['horse', 'fish', 'pig']
>>> species
['horse', 'fish', 'pig']
~~~

`animal`の別名`species`を変更すると`animal`も変更されています. これは,配列などは新しい名称の変数に,値ではなくアドレスを渡していることによります.どちらの変数もずっと同じアドレスを参照しつづけるため,片方が変化すると同じアドレスを参照しているもう片方の値も変わります.

~~~ sh
>>> id(animal)
4441753024
>>> id(species)
4441753024
>>> species[0] = 'cat'
>>> id(species)
4441753024
~~~

しかし,インデックスやスライスによる要素の変更ではなく,全体を再代入した場合には新しいアドレスが割り当てられます.

~~~ sh
>>> species = ['a','b','c']
>>> id(species)
4441834752
~~~

同じ値を持つが異なる場所を参照するリストを作りたい場合には,`copy()`を利用します.

~~~ sh
>>> animal = ['cat','fish','pig']
>>> species = animal.copy()
>>> id(animal)
4441764160
>>> id(species)
4441798208
>>> species[0] = 'dog'
>>> animal
['cat', 'fish', 'pig']
>>> species
['dog', 'fish', 'pig']
~~~

このような挙動は今後出てくる`pandas`などの配列でも同様なので,注意が必要です.

:::

`append()`というメソッドを使って,リストの末尾に要素を追加することができます.

~~~ sh
>>> animal
['cat','fish','pig']
>>> animal.append('dog')
>>> animal
['cat','fish','pig','dog']
~~~

リストの長さ(要素数)を知りたい場合には,`len()`関数を利用します.

~~~ sh
>>> animal
['cat','fish','pig','dog']
>>> len(animal)
4
~~~

リストはリストも要素にすることができます. このようなリストを**多重リスト**と呼びます.

~~~ sh
>>> x = [1,2,3]
>>> y = [4,5,6]
>>> z = [x,y]
>>> z
[[1,2,3],[4,5,6]]
>>> z[1]
[4,5,6]
>>> z[0][1]
2
~~~

::: note
**演習**

`xs = [[1,2,3],[4,5,6],[7,8,9]]` というリストを作り,以下の操作を行ってください.

- `xs`の長さを求める

- スライスを使って以下を抽出する
    - `[[4,5,6],[7,8,9]]`
    - `[[1,2,3]]`
    - `[[7,8,9]]`
    - `[8,9]`

- `[4,5,6]`を`[-4,-5,-6]`に更新する

- `1` を `-1`に,`9`を`-9`にする

- `[7,8,-9]`のあとに,`[10,11,12]`を追加する

:::

## 論理演算

それが正しいか間違っているか判別できる文を**命題**といいます. 命題の結果を表すものとして真(正しい),偽(間違っている)という値を用います. 真と偽を併せて**真偽値**といいます.

例えば,`1は2より大きい`という命題は,間違っているので**偽**となります. `人間は必ず死ぬ`という命題は,今のところ不老不死の人間がいないので**真**です.

プログラミングではこのような命題の判断がしばしば必要となるため,それらを扱うデータ型が提供されています.

真偽値を表すデータ型として`Bool`があります. `Bool`は`True`(真),`False`(偽)のいずれかです.

Pythonには命題の判定を行う演算子として,以下のようなものが準備されています.

|記号       | 意味         |
| :---:     | :---:        |
| `>`       |  より大きい  |
| `>=`      |  以上        |
| `<`       |  より小さい  |
| `<=`      |  以下        |
| `==`      |  等しい      |
| `!=`      |  等しくない  |
| `in`      |  含む        |

数値などの大小関係を調べるときには,比較演算子 `>`,`>=`.`<`,`<=`を利用します. 演算子の左右に数値を書くと,結果に応じて真偽値が帰ってきます.

~~~ sh
>>> 1 > 2
False
>>> 1 < 1.5
True
~~~

リストや文字列に特定の要素(文字列)が含まれているかは,`in`で判定できます.

~~~ sh
>>> 'ab' in 'abcd'
True
>>> 1 in [3,4,5]
False
~~~

値が等しいか/等しくないかを判定するには,`==`と`!=`を利用します.

~~~ sh
>>> 4 == 4
True
>>> 'cat' != 'cat'
False
~~~

これ以外にもPythonにはいくつかの演算が準備されていますし,自分で作ることも可能です.

`True` や `False`などの`Bool`値は, `AND`(かつ),`OR`(または),`NOT`という演算で計算することができます(`XOR`というのもあるが省略).
PythonではAND は `&`, OR は `|`, NOT は `not` という演算子が提供されています.

A,Bが命題だとして,`A & B`は両方`True`のときに,`True`となります. `A | B`は片方どちらかが`True`のときに`True`となります.

例えば,

- `1は2より大きい かつ 2は0より大きい` という命題は,`2は0より大きい`は正しいですが,`1は2より大きい`が間違っているので全体として,`False`です.

- `ネコは哺乳類である または ネコは鳥類である`という命題は `ネコは鳥類である`が間違っていますが全体としては`True`です.

演算の結果は,それぞれ以下のようになります. これを真偽値表といいます. ここでは,最低限の例だけを紹介しますが,より深く理解したい人は論理学などの講義を受講しましょう.

| 命題Aの値 | Bの値 | `A & B` | `A | B`|
| :---:     | :---: | :---:   | :---:  |
| True      | False | True    | True   |
| False     | True  | False   | True   |
| True      | False | False   | True   |
| False     | False | False   | True   |

Pythonではそれぞれの命題を丸括弧で囲んで,`&`,`|`演算子で論理演算を行うことができます.


~~~ sh
>>> (1 > 2)
False
>>> (2 > 0)
True
>>> (1 > 2) & (2 > 0)
False
>>> (1 > 2) | (2 > 0)
True
~~~

`not` は命題の否定を表しており `True`が`False`,`False`が`True`になります.`not`は命題の前に書きます.

~~~ sh
>>> (1 > 2)
False
>>> not (1 > 2)
True
~~~

::: note

**演習**

ある値が偶数かどうかは,2で割った余りが0かどうかを判定することで判定できます.
`x=101`,`y=202`として, 以下の命題の真偽をPythonで計算してください.

- xが偶数
- yが偶数
- xが偶数かつyが偶数
- xが偶数またはyが偶数
- x + y が奇数

:::

## タプル

## 辞書型

</details>

# 関数

平均値には,用途に応じて,算術平均,幾何平均,調和平均などがあります.
𝑛個の観測値 𝑥_1, 𝑥_2, …, 𝑥_𝑛があるとき
算術平均: 𝑥 ̅  =1/𝑛 (𝑥_1+ …+𝑥_𝑛 )

幾何平均: 𝑥_G=√(𝑛&𝑥_1∙𝑥_2∙ …∙𝑥_𝑛 )

調和平均 :𝑥_H=𝑛/(1/𝑥_1 +…+1/𝑥_𝑛 )

それぞれの平均値の用途を調べてください.
3個程度の変数を作成し,それぞれの算術平均,幾何平均,調和平均を計算してください,


For文のところでリスト内包表記


yakagika